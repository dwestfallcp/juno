(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,n){"use strict";t.__esModule=!0,function(e){e[e.ADD=0]="ADD",e[e.COMPLETED=1]="COMPLETED",e[e.REVISION=2]="REVISION",e[e.DELETED=3]="DELETED",e[e.MANAGE=4]="MANAGE"}(t.FORM_CONTROLLER_STATES||(t.FORM_CONTROLLER_STATES={})),function(e){e.FORM_NAME="name",e.ADDITIONAL="subject",e.MOD_DATE="date",e.CREATE_DATE="createDate"}(t.FORM_CONTROLLER_SORT_MODES||(t.FORM_CONTROLLER_SORT_MODES={})),function(e){e.EFORM="eform",e.FORM="form"}(t.FORM_CONTROLLER_FORM_TYPES||(t.FORM_CONTROLLER_FORM_TYPES={})),function(e){e[e.SELECT_ALL=-1]="SELECT_ALL",e[e.SELECT_EFORM=-2]="SELECT_EFORM",e[e.SELECT_FORM=-3]="SELECT_FORM"}(t.FORM_CONTROLLER_SPECIAL_GROUPS||(t.FORM_CONTROLLER_SPECIAL_GROUPS={}))},,function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.getAppointmentHistory=function(e,t){var n=this.basePath+"/schedule/{demographicNo}/appointmentHistory".replace("{demographicNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter demographicNo was null or undefined when calling getAppointmentHistory.");var a={method:"GET",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.getAppointmentReasons=function(e){var t={method:"GET",url:this.basePath+"/schedule/reasons",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getAppointmentStatuses=function(e){var t={method:"GET",url:this.basePath+"/schedule/statuses",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getAppointmentTypes=function(e){var t={method:"GET",url:this.basePath+"/schedule/types",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getAppointmentsForDay=function(e,t){var n=this.basePath+"/schedule/day/{date}".replace("{date}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter date was null or undefined when calling getAppointmentsForDay.");var a={method:"GET",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.getCalendarAppointmentStatuses=function(e){var t={method:"GET",url:this.basePath+"/schedule/calendar/statuses",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getCalendarSchedule=function(e,t,n,o,a,r,i,l,s,c){var u=this.basePath+"/schedule/calendar",d={},p=Object.assign({},this.defaultHeaders);void 0!==e&&(d.scheduleId=e),void 0!==t&&(d.scheduleIdType=t),void 0!==n&&(d.scheduleFilter=n),void 0!==o&&(d.startDate=o),void 0!==a&&(d.endDate=a),void 0!==r&&(d.startTime=r),void 0!==i&&(d.endTime=i),void 0!==l&&(d.site=l),void 0!==s&&(d.slotDuration=s);var m={method:"GET",url:u,params:d,headers:p};return c&&(m=Object.assign(m,c)),this.$http(m)},e.prototype.getScheduleGroups=function(e){var t={method:"GET",url:this.basePath+"/schedule/groups",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getScheduleTemplateCodes=function(e){var t={method:"GET",url:this.basePath+"/schedule/templateCodes",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.searchAvailable=function(e,t,n,o,a,r,i){var l=this.basePath+"/schedule/search/available",s={},c=Object.assign({},this.defaultHeaders);void 0!==e&&(s.providerNo=e),void 0!==t&&(s.dayOfWeek=t),void 0!==n&&(s.startTime=n),void 0!==o&&(s.endTime=o),void 0!==a&&(s.code=a),void 0!==r&&(s.resultCount=r);var u={method:"GET",url:l,params:s,headers:c};return i&&(u=Object.assign(u,i)),this.$http(u)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.ScheduleApi=o},function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.addAppointment=function(e,t){var n={method:"POST",url:this.basePath+"/appointment",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.addRepeatingAppointment=function(e,t){var n={method:"POST",url:this.basePath+"/appointment/repeating",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.deleteAppointment=function(e,t){var n=this.basePath+"/appointment/{appointmentNo}".replace("{appointmentNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter appointmentNo was null or undefined when calling deleteAppointment.");var a={method:"DELETE",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.getAppointment=function(e,t){var n=this.basePath+"/appointment/{appointmentNo}".replace("{appointmentNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter appointmentNo was null or undefined when calling getAppointment.");var a={method:"GET",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.getEditHistory=function(e,t){var n=this.basePath+"/appointment/{appointmentNo}/edit_history".replace("{appointmentNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter appointmentNo was null or undefined when calling getEditHistory.");var a={method:"GET",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.setNextStatus=function(e,t){var n=this.basePath+"/appointment/{appointmentNo}/rotate_status".replace("{appointmentNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter appointmentNo was null or undefined when calling setNextStatus.");var a={method:"POST",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.setStatus=function(e,t,n){var o=this.basePath+"/appointment/{appointmentNo}/set_status".replace("{appointmentNo}",encodeURIComponent(String(e))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter appointmentNo was null or undefined when calling setStatus.");var r={method:"PUT",url:o,data:t,params:{},headers:a};return n&&(r=Object.assign(r,n)),this.$http(r)},e.prototype.updateAppointment=function(e,t){var n={method:"PUT",url:this.basePath+"/appointment",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.AppointmentApi=o},,function(e,t,n){"use strict";t.__esModule=!0,function(e){e.ADMIN_RELOAD_NAV="adminNavReload",e.ADMIN_EXPAND_NAV_GROUP="adminExpandNavGroup"}(t.ADMIN_PAGE_EVENTS||(t.ADMIN_PAGE_EVENTS={}))},,function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.getPreferenceEnabled=function(e,t,n){var o=this.basePath+"/systemPreference/{key}/enabled".replace("{key}",encodeURIComponent(String(e))),a={},r=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter key was null or undefined when calling getPreferenceEnabled.");void 0!==t&&(a.default=t);var i={method:"GET",url:o,params:a,headers:r};return n&&(i=Object.assign(i,n)),this.$http(i)},e.prototype.getPreferenceValue=function(e,t,n){var o=this.basePath+"/systemPreference/{key}".replace("{key}",encodeURIComponent(String(e))),a={},r=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter key was null or undefined when calling getPreferenceValue.");void 0!==t&&(a.default=t);var i={method:"GET",url:o,params:a,headers:r};return n&&(i=Object.assign(i,n)),this.$http(i)},e.prototype.getPropertyEnabled=function(e,t){var n=this.basePath+"/systemPreference/property/{key}/enabled".replace("{key}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter key was null or undefined when calling getPropertyEnabled.");var a={method:"GET",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.getPropertyValue=function(e,t,n){var o=this.basePath+"/systemPreference/property/{key}".replace("{key}",encodeURIComponent(String(e))),a={},r=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter key was null or undefined when calling getPropertyValue.");void 0!==t&&(a.default=t);var i={method:"GET",url:o,params:a,headers:r};return n&&(i=Object.assign(i,n)),this.$http(i)},e.prototype.putPreferenceValue=function(e,t,n){var o=this.basePath+"/systemPreference/{key}".replace("{key}",encodeURIComponent(String(e))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter key was null or undefined when calling putPreferenceValue.");var r={method:"PUT",url:o,data:t,params:{},headers:a};return n&&(r=Object.assign(r,n)),this.$http(r)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.SystemPreferenceApi=o},function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}t.__esModule=!0,o(n(190)),o(n(191))},function(e,t,n){"use strict";t.__esModule=!0,function(e){e.INSTANCE_TYPE="instance_type",e.BILLING_TYPE="billing_type"}(t.SYSTEM_PROPERTIES||(t.SYSTEM_PROPERTIES={})),function(e){e.BC="BC",e.ON="ON",e.AB="AB"}(t.INSTANCE_TYPE||(t.INSTANCE_TYPE={})),function(e){e.BC="BC",e.ON="ON",e.CLINICAID="CLINICAID"}(t.BILLING_TYPE||(t.BILLING_TYPE={}))},function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.getProviderSiteBySchedule=function(e,t,n){var o=this.basePath+"/sites/provider/{providerNo}/{sdate}".replace("{providerNo}",encodeURIComponent(String(e))).replace("{sdate}",encodeURIComponent(String(t))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter providerNo was null or undefined when calling getProviderSiteBySchedule.");if(null===t||void 0===t)throw new Error("Required parameter sdate was null or undefined when calling getProviderSiteBySchedule.");var r={method:"GET",url:o,params:{},headers:a};return n&&(r=Object.assign(r,n)),this.$http(r)},e.prototype.getSiteList=function(e){var t={method:"GET",url:this.basePath+"/sites",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getSitesByProvider=function(e,t){var n=this.basePath+"/sites/provider/{providerNo}".replace("{providerNo}",encodeURIComponent(String(e))),o=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter providerNo was null or undefined when calling getSitesByProvider.");var a={method:"GET",url:n,params:{},headers:o};return t&&(a=Object.assign(a,t)),this.$http(a)},e.prototype.getSitesEnabled=function(e){var t={method:"GET",url:this.basePath+"/sites/enabled",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.SitesApi=o},function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.getProviderSettings=function(e){var t={method:"GET",url:this.basePath+"/providerSettings/get",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.saveProviderSettings=function(e,t,n){var o=this.basePath+"/providerSettings/{providerNo}/save".replace("{providerNo}",encodeURIComponent(String(e))),a=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter providerNo was null or undefined when calling saveProviderSettings.");var r={method:"POST",url:o,data:t,params:{},headers:a};return n&&(r=Object.assign(r,n)),this.$http(r)},e.prototype.updateProviderSetting=function(e,t,n,o){var a=this.basePath+"/providerSettings/{providerNo}/{key}".replace("{providerNo}",encodeURIComponent(String(e))).replace("{key}",encodeURIComponent(String(t))),r=Object.assign({},this.defaultHeaders);if(null===e||void 0===e)throw new Error("Required parameter providerNo was null or undefined when calling updateProviderSetting.");if(null===t||void 0===t)throw new Error("Required parameter key was null or undefined when calling updateProviderSetting.");var i={method:"PUT",url:a,data:n,params:{},headers:r};return o&&(i=Object.assign(i,o)),this.$http(i)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.ProviderPreferenceApi=o},,,,,,function(e,t,n){"use strict";t.__esModule=!0;var o=function(){function e(e,t,n){this.$http=e,this.$httpParamSerializer=t,this.basePath="http://localhost/",this.defaultHeaders={},void 0!==n&&(this.basePath=n)}return e.prototype.authenticateWithIceFallApi=function(e){var t={method:"POST",url:this.basePath+"/integrations/iceFall/authenticate",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getIceFallSettings=function(e){var t={method:"GET",url:this.basePath+"/integrations/iceFall/settings",params:{},headers:Object.assign({},this.defaultHeaders)};return e&&(t=Object.assign(t,e)),this.$http(t)},e.prototype.getLogEntries=function(e,t,n,o,a,r,i,l){var s=this.basePath+"/integrations/iceFall/logs",c={},u=Object.assign({},this.defaultHeaders);void 0!==e&&(c.startDate=e),void 0!==t&&(c.endDate=t),void 0!==n&&(c.page=n),void 0!==o&&(c.pageSize=o),void 0!==a&&(c.status=a),void 0!==r&&(c.SortBy=r),void 0!==i&&(c.sortDirection=i);var d={method:"GET",url:s,params:c,headers:u};return l&&(d=Object.assign(d,l)),this.$http(d)},e.prototype.sendFormToIceFall=function(e,t){var n={method:"POST",url:this.basePath+"/integrations/iceFall/sendForm",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.prototype.setIceFallSettings=function(e,t){var n={method:"PUT",url:this.basePath+"/integrations/iceFall/settings",data:e,params:{},headers:Object.assign({},this.defaultHeaders)};return t&&(n=Object.assign(n,t)),this.$http(n)},e.$inject=["$http","$httpParamSerializer","basePath"],e}();t.IceFallApi=o},function(e,t){e.exports='<h4 class="ng-scope">Summary Items - Left Side</h4>\n<table class="table table-hover table-condensed ng-scope">\n\t<tbody>\n\t<tr>\n\t\t<td class="col-xs-4">\n\t\t\tOngoing Concerns\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-10">\n\t\t\t\t\t<input name="radios-enc-10" id="radios-enc-10" ng-model="$ctrl.pref.cppDisplayOngoingConcerns"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-11">\n\t\t\t\t\t<input name="radios-enc-11" id="radios-enc-11" ng-model="$ctrl.pref.cppDisplayOngoingConcerns"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\n\t\t\t\t<br>\n\t\t\t\t\x3c!-- ngIf: pref.cppDisplayOngoingConcerns --\x3e\n\t\t\t\t<small ng-if="$ctrl.pref.cppDisplayOngoingConcerns" class="ng-scope">\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-7" id="check-enc-7"\n\t\t\t\t\t\t\t   ng-model="$ctrl.pref.cppOngoingConcernsStartDate" value="true" class="ng-pristine ng-valid">\n\t\t\t\t\t\tShow Start Date\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-8" id="check-enc-8"\n\t\t\t\t\t\t\t   ng-model="$ctrl.pref.cppOngoingConcernsResDate" value="true" class="ng-pristine ng-valid"> Show\n\t\t\t\t\t\tResolution Date\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-9" id="check-enc-9"\n\t\t\t\t\t\t\t   ng-model="$ctrl.pref.cppOngoingConcernsProblemStatus" value="true"\n\t\t\t\t\t\t\t   class="ng-pristine ng-valid"> Show Problem Status\n\t\t\t\t\t</label>\n\t\t\t\t</small>\x3c!-- end ngIf: pref.cppDisplayOngoingConcerns --\x3e\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tMedical History\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-8">\n\t\t\t\t\t<input name="radios-enc-8" id="radios-enc-8" ng-model="$ctrl.pref.cppDisplayMedHx" ng-value="true"\n\t\t\t\t\t\t   type="radio" class="ng-valid ng-dirty" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-9">\n\t\t\t\t\t<input name="radios-enc-9" id="radios-enc-9" ng-model="$ctrl.pref.cppDisplayMedHx" ng-value="false"\n\t\t\t\t\t\t   type="radio" class="ng-valid ng-dirty" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\n\t\t\t\t<br>\n\t\t\t\t\x3c!-- ngIf: pref.cppDisplayMedHx --\x3e\n\t\t\t\t<small ng-if="$ctrl.pref.cppDisplayMedHx" class="ng-scope">\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-3" id="check-enc-3" ng-model="$ctrl.pref.cppMedHxStartDate"\n\t\t\t\t\t\t\t   value="true" class="ng-pristine ng-valid"> Show Start Date\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-4" id="check-enc-4" ng-model="$ctrl.pref.cppMedHxResDate"\n\t\t\t\t\t\t\t   value="true" class="ng-pristine ng-valid"> Show Resolution Date\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-5" id="check-enc-5" ng-model="$ctrl.pref.cppMedHxTreatment"\n\t\t\t\t\t\t\t   value="true" class="ng-pristine ng-valid"> Show Treatment\n\t\t\t\t\t</label>\n\t\t\t\t\t<br>\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-6" id="check-enc-6" ng-model="$ctrl.pref.cppMedHxProcedureDate"\n\t\t\t\t\t\t\t   value="true" class="ng-pristine ng-valid"> Show Procedure Date\n\t\t\t\t\t</label>\n\t\t\t\t</small>\x3c!-- end ngIf: pref.cppDisplayMedHx --\x3e\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tSocial History\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-6">\n\t\t\t\t\t<input name="radios-enc-6" id="radios-enc-6" ng-model="$ctrl.pref.cppDisplaySocialHx" ng-value="true"\n\t\t\t\t\t\t   type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-7">\n\t\t\t\t\t<input name="radios-enc-7" id="radios-enc-7" ng-model="$ctrl.pref.cppDisplaySocialHx" ng-value="false"\n\t\t\t\t\t\t   type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\n\t\t\t\t<br>\n\t\t\t\t\x3c!-- ngIf: pref.cppDisplaySocialHx --\x3e\n\t\t\t\t<small ng-if="$ctrl.pref.cppDisplaySocialHx" class="ng-scope">\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-1" id="check-enc-1" ng-model="$ctrl.pref.cppSocialHxStartDate"\n\t\t\t\t\t\t\t   value="true" class="ng-pristine ng-valid"> Show Start Date\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-2" id="check-enc-2" ng-model="$ctrl.pref.cppSocialHxResDate"\n\t\t\t\t\t\t\t   value="true" class="ng-pristine ng-valid"> Show Resolution Date\n\t\t\t\t\t</label>\n\t\t\t\t</small>\x3c!-- end ngIf: pref.cppDisplaySocialHx --\x3e\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tReminders\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-12">\n\t\t\t\t\t<input name="radios-enc-12" id="radios-enc-12" ng-model="$ctrl.pref.cppDisplayReminders" ng-value="true"\n\t\t\t\t\t\t   type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-13">\n\t\t\t\t\t<input name="radios-enc-13" id="radios-enc-13" ng-model="$ctrl.pref.cppDisplayReminders" ng-value="false"\n\t\t\t\t\t\t   type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\n\t\t\t\t<br>\n\t\t\t\t\x3c!-- ngIf: pref.cppDisplayReminders --\x3e\n\t\t\t\t<small ng-if="$ctrl.pref.cppDisplayReminders" class="ng-scope">\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-10" id="check-enc-10"\n\t\t\t\t\t\t\t   ng-model="pref.cppRemindersStartDate" value="true" class="$ctrl.ng-pristine ng-valid"> Show\n\t\t\t\t\t\tStart Date\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t<input type="checkbox" name="check-enc-11" id="check-enc-11" ng-model="$ctrl.pref.cppRemindersResDate"\n\t\t\t\t\t\t\t   value="true" class="ng-pristine ng-valid"> Show Resolution Date\n\t\t\t\t\t</label>\n\t\t\t\t</small>\x3c!-- end ngIf: pref.cppDisplayReminders --\x3e\n\t\t\t</div>\n\t\t</td>\n\t</tr>\x3c!-- CPP Display --\x3e\n\t<tr>\x3c!-- Summary Items --\x3e\n\t\t<td>\n\t\t\tPreventions\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-14">\n\t\t\t\t\t<input name="radios-enc-14" id="radios-enc-14" ng-model="$ctrl.pref.summaryItemDisplayPreventions"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-15">\n\t\t\t\t\t<input name="radios-enc-15" id="radios-enc-15" ng-model="$ctrl.pref.summaryItemDisplayPreventions"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tFamily History\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-32">\n\t\t\t\t\t<input name="radios-enc-32" id="radios-enc-32" ng-model="$ctrl.pref.summaryItemDisplayFamHx"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-33">\n\t\t\t\t\t<input name="radios-enc-33" id="radios-enc-33" ng-model="$ctrl.pref.summaryItemDisplayFamHx"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tRisk Factors\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-30">\n\t\t\t\t\t<input name="radios-enc-30" id="radios-enc-30" ng-model="$ctrl.pref.summaryItemDisplayRiskFactors"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-31">\n\t\t\t\t\t<input name="radios-enc-31" id="radios-enc-31" ng-model="$ctrl.pref.summaryItemDisplayRiskFactors"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tAllergies\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-28">\n\t\t\t\t\t<input name="radios-enc-28" id="radios-enc-28" ng-model="$ctrl.pref.summaryItemDisplayAllergies"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-29">\n\t\t\t\t\t<input name="radios-enc-29" id="radios-enc-29" ng-model="$ctrl.pref.summaryItemDisplayAllergies"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tMedications\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-16">\n\t\t\t\t\t<input name="radios-enc-16" id="radios-enc-16" ng-model="$ctrl.pref.summaryItemDisplayMeds"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-17">\n\t\t\t\t\t<input name="radios-enc-17" id="radios-enc-17" ng-model="$ctrl.pref.summaryItemDisplayMeds"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tOther Medications\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-18">\n\t\t\t\t\t<input name="radios-enc-18" id="radios-enc-18" ng-model="$ctrl.pref.summaryItemDisplayOtherMeds"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-19">\n\t\t\t\t\t<input name="radios-enc-19" id="radios-enc-19" ng-model="$ctrl.pref.summaryItemDisplayOtherMeds"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tAssessments\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-20">\n\t\t\t\t\t<input name="radios-enc-20" id="radios-enc-20" ng-model="$ctrl.pref.summaryItemDisplayAssessments"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-21">\n\t\t\t\t\t<input name="radios-enc-21" id="radios-enc-21" ng-model="$ctrl.pref.summaryItemDisplayAssessments"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t</tbody>\n</table>\n\n<h4 class="ng-scope">Summary Items - Right Side</h4>\n<table class="table table-hover table-condensed ng-scope">\n\t<tbody>\n\t<tr>\n\t\t<td class="col-xs-4">\n\t\t\tIncoming\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-24">\n\t\t\t\t\t<input name="radios-enc-24" id="radios-enc-24" ng-model="$ctrl.pref.summaryItemDisplayIncoming"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-25">\n\t\t\t\t\t<input name="radios-enc-25" id="radios-enc-25" ng-model="$ctrl.pref.summaryItemDisplayIncoming"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td>\n\t\t\tDecision Support\n\t\t</td>\n\t\t<td>\n\t\t\t<div class="col-lg-12 col-md-12 col-sm-12">\n\t\t\t\t<label class="radio-inline" for="radios-enc-26">\n\t\t\t\t\t<input name="radios-enc-26" id="radios-enc-26" ng-model="$ctrl.pref.summaryItemDisplayDsSupport"\n\t\t\t\t\t\t   ng-value="true" type="radio" class="ng-pristine ng-valid" value="true">\n\t\t\t\t\tEnable\n\t\t\t\t</label>\n\t\t\t\t<label class="radio-inline" for="radios-enc-27">\n\t\t\t\t\t<input name="radios-enc-27" id="radios-enc-27" ng-model="$ctrl.pref.summaryItemDisplayDsSupport"\n\t\t\t\t\t\t   ng-value="false" type="radio" class="ng-pristine ng-valid" value="false">\n\t\t\t\t\tDisable\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</td>\n\t</tr>\n\t</tbody>\n</table>'},function(e,t,n){n(25),n(26),n(27),n(28),n(30),n(31),n(32),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),e.exports=n(281)},function(module,exports){function popup(e,t,n,o){return popup2(e,t,0,0,n,o)}function newWindow(e,t){var n=document.getElementsByTagName("body")[0].clientWidth,o=document.getElementsByTagName("body")[0].clientHeight;return n=Math.max(n,window.innerWidth),popup2(o=Math.max(o,window.innerHeight),n,0,0,e,t)}function popup2(e,t,n,o,a,r){return void 0===popup2.winRefs&&(popup2.winRefs={}),void 0===popup2.winRefs[r]||popup2.winRefs[r].closed?(windowprops="height="+e+",width="+t+",location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes,screenX=0,screenY=0,top="+n+",left="+o,popup2.winRefs[r]=window.open(a,r,windowprops)):(popup2.winRefs[r].location.href=a,popup2.winRefs[r].resizeTo(t,e),popup2.winRefs[r].focus()),popup2.winRefs[r]}function confirmNGo(e,t){return confirm(t)&&(location.href=e),!1}function showHideItem(e){"none"==document.getElementById(e).style.display?showItem(e):hideItem(e)}function showItem(e){document.getElementById(e).style.display=""}function hideItem(e){document.getElementById(e).style.display="none"}function validDate(e){return validDateText(document.getElementById(e).value)}function validDateText(e){var t="/";-1==e.indexOf("/")&&(t="-");var n=e.split(t);return 3==n.length&&(year=n[0]-0,month=n[1]-1,day=n[2]-0,dateObject=new Date(year,month,day),day==dateObject.getDate()&&month==dateObject.getMonth()&&year==dateObject.getFullYear())}function validDateFieldsByClass(e,t){for(var n=document.getElementsByClassName(e,t),o=0;o<n.length;o++)if(!validDateText(n[o].value))return n[o].focus(),!1;return!0}function getMouseCoords(e){var t=new Array(2),n=0,o=0;if(!e)e=window.event;return e.pageX||e.pageY?(n=e.pageX,o=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t[0]=n,t[1]=o,t}function checkAll(e,t,n){var o=e.checked,a=document.getElementsByClassName(n,t);for(i=0;i<a.length;i++)a[i].checked=o}function oscarLog(e){window.console&&console.log(e)}function grabEnter(event,callb){if(window.event&&13==window.event.keyCode||event&&13==event.which)return eval(callb),!1}function isNumericInt(e){var t,n=!0;for(i=0;i<e.length&&1==n;i++)t=e.charAt(i),-1=="0123456789".indexOf(t)&&(n=!1);return n}function isNumeric(e){var t,n=!0;for(i=0;i<e.length&&1==n;i++)t=e.charAt(i),-1=="0123456789.".indexOf(t)&&(n=!1);return n}function trim(e){return e=(e=e.replace(/^\s+/g,"")).replace(/\s+$/g,"")}document.getElementsByAttribute=function(e,t,n,o){for(var a,r,i="*"==t&&e.all?e.all:e.getElementsByTagName(t),l=new Array,s=void 0!==o?new RegExp("(^|\\s)"+o+"(\\s|$)"):null,c=0;c<i.length;c++)"string"==typeof(r=(a=i[c]).getAttribute&&a.getAttribute(n))&&r.length>0&&(void 0===o||s&&s.test(r))&&l.push(a);return l}},function(e,t,n){"use strict";window.Oscar||(window.Oscar={}),Oscar.HealthCardParser||(Oscar.HealthCardParser={});Oscar.HealthCardParser.isWhitelisted=function(e){return(e=e.toUpperCase()).startsWith("%B610043")||e.startsWith("%B610054")||e.startsWith("%BC")&&e.substring(e.indexOf("?")).startsWith("?;636028")},Oscar.HealthCardParser.validateDate=function(e,t,n){var o=e+"-"+t+"-"+n;return!isNaN(Date.parse(o))},Oscar.HealthCardParser.getFieldValue=function(e,t,n){var o="";try{var a=e.indexOf("^",t);o=a<0||a>n?e.substring(t,t+n):e.substring(t,a)}catch(e){console.err("Error reading data field",e)}return o.trim()},Oscar.HealthCardParser.parseBCCombined=function(e,t){var n=t.data,o=t.meta,a=e.indexOf("?")+1,r=e.indexOf("?",a)+1,i=e.substring(0,a),l=e.substring(a,r),s=e.substring(r),c=1;n.province=Oscar.HealthCardParser.getFieldValue(i,c,2),c+=n.province.length,n.city=Oscar.HealthCardParser.getFieldValue(i,c,13),c+=n.city.length+1;var u=Oscar.HealthCardParser.getFieldValue(i,c,35);c+=u.length+1;var d=Oscar.HealthCardParser.getFieldValue(i,c,29);n.lastName=u.substring(0,u.indexOf("$")-1).toUpperCase(),n.firstName=u.substring(u.indexOf("$")+1).toUpperCase(),n.address=d.includes("$")?d.substring(0,d.indexOf("$")):d,c=1,o.isoiin=Oscar.HealthCardParser.getFieldValue(l,c,6),c+=o.isoiin.length;var p=l.substring(c,l.indexOf("="));c+=p.length,7===p.length?n.driverLicenseNo=p:n.clientNo=p,c++;var m=Oscar.HealthCardParser.getFieldValue(l,c,4);c+=m.length,"0000"!==m&&(n.endYear="20"+m.substring(0,2),n.endMonth=m.substring(2,4),n.endDay="01");var h=Oscar.HealthCardParser.getFieldValue(l,c,8);return n.dobYear=h.substring(0,4),n.dobMonth=h.substring(4,6),n.dobDay=h.substring(6,8),c=1,o.versionNo=Oscar.HealthCardParser.getFieldValue(s,c,1),c+=1,o.secVersionNo=Oscar.HealthCardParser.getFieldValue(s,c,1),c+=1,n.postal=Oscar.HealthCardParser.getFieldValue(s,c,11),c+=11,n.class=Oscar.HealthCardParser.getFieldValue(s,c,2),c+=2,n.restrictions=Oscar.HealthCardParser.getFieldValue(s,c,10),c+=10,n.endorsements=Oscar.HealthCardParser.getFieldValue(s,c,4),c+=4,n.sex=Oscar.HealthCardParser.getFieldValue(s,c,1),c+=1,n.height=Oscar.HealthCardParser.getFieldValue(s,c,3),c+=3,n.weight=Oscar.HealthCardParser.getFieldValue(s,c,3),c+=3,n.hairColour=Oscar.HealthCardParser.getFieldValue(s,c,3),c+=3,n.eyeColour=Oscar.HealthCardParser.getFieldValue(s,c,3),c+=3,n.hin=Oscar.HealthCardParser.getFieldValue(s,c,10),c+=10,o.fourteenA=Oscar.HealthCardParser.getFieldValue(s,c,16),c+=16,o.ecc=Oscar.HealthCardParser.getFieldValue(s,c,6),c+=6,o.securityFunction=Oscar.HealthCardParser.getFieldValue(s,c,5),t.meta=o,t.data=n,t},Oscar.HealthCardParser.parseBCStandalone=function(e,t){var n=t.data,o=t.meta;n.hin=e.substring(8,e.indexOf("0^")),n.lastName=e.substring(e.indexOf("^")+1,e.indexOf("/")).toUpperCase();var a=e.substring(e.indexOf("/")+1);n.firstName=a.substring(0,a.indexOf("^")).toUpperCase();var r=(a=a.substring(a.indexOf("^")+1)).substring(0,4);"0000"!==r&&(n.endYear="20"+r.substring(0,2),n.endMonth=r.substring(2,4),n.endDay="01");var i=a.substring(4,8);"0000"!==i&&(n.effYear="20"+i.substring(0,2),n.effMonth=i.substring(2,4),n.effDay="01");var l=a.substring(8,16);return n.dobYear=l.substring(0,4),n.dobMonth=l.substring(4,6),n.dobDay=l.substring(6,8),n.sex="M",n.province="BC",t.meta=o,t.data=n,t},Oscar.HealthCardParser.parseOntario=function(e,t){var n=t.data,o=t.meta;n.hin=e.substring(8,e.indexOf("^")),n.lastName=e.substring(e.indexOf("^")+1,e.indexOf("/")).toUpperCase();var a=e.substring(e.indexOf("/")+1);n.firstName=a.substring(0,a.indexOf("^")).toUpperCase(),n.dobYear=a.substring(a.indexOf("^")+9,a.indexOf("^")+13),n.dobMonth=a.substring(a.indexOf("^")+13,a.indexOf("^")+15),n.dobDay=a.substring(a.indexOf("^")+15,a.indexOf("^")+17),n.versionCode=a.substring(a.indexOf("^")+17,a.indexOf("^")+19),n.versionCode=n.versionCode.toUpperCase();var r=parseInt(a.substring(a.indexOf("^")+1,a.indexOf("^")+3));n.endYear=(r>30?"19":"20")+a.substring(a.indexOf("^")+1,a.indexOf("^")+3),n.endMonth=a.substring(a.indexOf("^")+3,a.indexOf("^")+5),n.endDay=n.dobDay,r=parseInt(a.substring(a.indexOf("^")+24,a.indexOf("^")+26)),n.effYear=(r>30?"19":"20")+a.substring(a.indexOf("^")+24,a.indexOf("^")+26),n.effMonth=a.substring(a.indexOf("^")+26,a.indexOf("^")+28),n.effDay=a.substring(a.indexOf("^")+28,a.indexOf("^")+30);var i=a.substring(a.indexOf("^")+8,a.indexOf("^")+9);return n.sex="2"===i?"F":"M",n.province="ON",t.meta=o,t.data=n,t},Oscar.HealthCardParser.parse=function(e){var t={meta:{},data:{}};try{e=e.toUpperCase(),console.info(e),t=e.startsWith("%B610043")?Oscar.HealthCardParser.parseBCStandalone(e,t):e.startsWith("%BC")&&e.substring(e.indexOf("?")).startsWith("?;636028")?Oscar.HealthCardParser.parseBCCombined(e,t):Oscar.HealthCardParser.parseOntario(e,t)}catch(e){console.error("Error parsing card data",e)}return t}},function(e,t,n){"use strict";window.Juno=window.Juno||{},window.Juno.Common=window.Juno.Common||{},window.Juno.Common.DisplayMessages=function(e,t){var n=this;n.messages_hash={},n.display_field_errors=!0,n.field_errors_label_map={},n.field_errors_label_map_key=null,n.extra_info={},n.meta={},n.saving_message="Saving...",n.init=function(){Juno.Common.Util.exists(e)&&(n.messages_hash=e),n.force_field_error_arrays(),Juno.Common.Util.exists(t)&&(Juno.Common.Util.exists(t.display_field_errors)&&!1===t.display_field_errors&&(n.display_field_errors=!1),Juno.Common.Util.exists(t.field_errors_label_map)&&(n.field_errors_label_map=t.field_errors_label_map,Juno.Common.Util.exists(t.field_errors_label_map_key)&&(n.field_errors_label_map_key=t.field_errors_label_map_key)))},n.merge=function(e){n.messages_hash=angular.merge(n.messages_hash,e.messages_hash)},n.has_alert_warnings=function(){return n.alert_warnings().length>0},n.alert_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.alert_warnings)?n.messages_hash.alert_warnings:[]},n.add_alert_warning=function(e){n.has_alert_warnings()||(n.messages_hash.alert_warnings=[]),n.messages_hash.alert_warnings.push(e)},n.has_validation_warnings=function(){return n.validation_warnings().length>0},n.add_validation_warning=function(e){n.has_validation_warnings()||(n.messages_hash.validation_warnings=[]),n.messages_hash.validation_warnings.push(e)},n.validation_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.validation_warnings)?n.messages_hash.validation_warnings:[]},n.has_standard_errors=function(){return n.standard_errors().length>0},n.standard_errors=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_errors)?n.messages_hash.standard_errors:[]},n.add_standard_error=function(e){n.has_standard_errors()||(n.messages_hash.standard_errors=[]),n.messages_hash.standard_errors.push(e)},n.add_generic_fatal_error=function(){n.add_standard_error("Fatal Error")},n.has_standard_warnings=function(){return n.standard_warnings().length>0},n.standard_warnings=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_warnings)?n.messages_hash.standard_warnings:[]},n.add_standard_warning=function(e){n.has_standard_warnings()||(n.messages_hash.standard_warnings=[]),n.messages_hash.standard_warnings.push(e)},n.has_standard_info=function(){return n.standard_info().length>0},n.standard_info=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_info)?n.messages_hash.standard_info:[]},n.add_standard_info=function(e){n.has_standard_info()||(n.messages_hash.standard_info=[]),n.messages_hash.standard_info.push(e)},n.has_standard_success=function(){return n.standard_success().length>0},n.standard_success=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.standard_success)?n.messages_hash.standard_success:[]},n.add_standard_success=function(e){n.has_standard_success()||(n.messages_hash.standard_success=[]),n.messages_hash.standard_success.push(e)},n.has_field_errors=function(){return n.field_errors()&&!angular.equals(n.field_errors(),{})},n.field_errors=function(e){var t={};if(Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.field_errors))if(Juno.Common.Util.exists(e)&&!0===e)for(var o in n.messages_hash.field_errors)t[o]=n.prepend_label(o,n.messages_hash.field_errors[o]);else t=n.messages_hash.field_errors;return t},n.has_one_of_field_error=function(e){for(var t in angular.isArray(e)||(e=[e]),e)if(n.has_field_error(e[t]))return!0;return!1},n.has_indexed_field_error=function(e,t){return!(!Juno.Common.Util.exists(n.extra_info)||!Juno.Common.Util.exists(n.extra_info.index)||n.extra_info.index!=t)&&n.has_field_error(e)},n.has_field_error=function(e){return!!(n.has_field_errors()&&e in n.field_errors())},n.field_error_string=function(e,t){return n.has_field_error(e)?(Juno.Common.Util.exists(t)||(t=", "),n.field_errors()[e].join(t)):""},n.add_field_error=function(e,t){n.has_field_errors()||(n.messages_hash.field_errors={}),n.has_field_error(e)||(n.messages_hash.field_errors[e]=[]),n.messages_hash.field_errors[e].push(t)},n.remove_field_error=function(e){n.has_field_error(e)&&delete n.messages_hash.field_errors[e]},n.has_error_links=function(){return n.error_links().length>0},n.add_error_link=function(e){n.has_error_links()||(n.messages_hash.error_links=[]),n.messages_hash.error_links.push(e)},n.error_links=function(){return Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.error_links)?n.messages_hash.error_links:[]},n.has_field_warnings=function(){return n.field_warnings()&&!angular.equals(n.field_warnings(),{})},n.field_warnings=function(e){var t={};if(Juno.Common.Util.exists(n.messages_hash)&&Juno.Common.Util.exists(n.messages_hash.field_warnings))if(Juno.Common.Util.exists(e)&&!0===e)for(var o in n.messages_hash.field_warnings)t[o]=n.prepend_label(o,n.messages_hash.field_warnings[o]);else t=n.messages_hash.field_warnings;return t},n.has_field_warning=function(e){return!!(n.has_field_warnings()&&e in n.field_warnings())},n.field_warning_string=function(e,t){return n.has_field_warning(e)?(Juno.Common.Util.exists(t)||(t=", "),n.field_warnings()[e].join(t)):""},n.add_field_warning=function(e,t){n.has_field_warnings()||(n.messages_hash.field_warnings={}),n.has_field_warning(e)||(n.messages_hash.field_warnings[e]=[]),n.messages_hash.field_warnings[e].push(t)},n.remove_field_warning=function(e){n.has_field_warning(e)&&delete n.messages_hash.field_warnings[e]},n.has_errors=function(){return!!(n.has_field_errors()||n.has_standard_errors()||n.has_error_links())},n.clear=function(){n.messages_hash={}},n.force_field_error_arrays=function(){if(n.has_field_errors())for(var e in n.messages_hash.field_errors)angular.isArray(n.messages_hash.field_errors[e])||(n.messages_hash.field_errors[e]=[angular.copy(n.messages_hash.field_errors[e])])},n.prepend_label=function(e,t){var o="",a=[];if(e in n.field_errors_label_map)for(var r in o=n.field_errors_label_map[e],Juno.Common.Util.exists(n.field_errors_label_map_key)&&(o=n.field_errors_label_map[e][n.field_errors_label_map_key]),t){var i=[o,t[r]].join(" ").trim();a.push(i)}else a=t;return a},n.merge_messages=function(e){for(var t=e.field_errors(),o=e.field_warnings(),a=e.error_links(),r=e.standard_info(),i=e.standard_warnings(),l=e.standard_errors(),s=e.alert_warnings(),c=e.validation_warnings(),u=e.standard_success(),d=0;d<u.length;d++)n.add_standard_success(u[d]);for(d=0;d<r.length;d++)n.add_standard_info(r[d]);for(d=0;d<i.length;d++)n.add_standard_warning(i[d]);for(d=0;d<l.length;d++)n.add_standard_error(l[d]);for(d=0;d<s.length;d++)n.add_alert_warning(s[d]);for(d=0;d<c.length;d++)n.add_validation_warning(c[d]);for(d=0;d<a.length;d++)n.add_error_link(a[d]);for(var p in t)if(t.hasOwnProperty(p))for(d=0;d<t[p].length;d++)n.add_field_error(p,t[p][d]);for(var p in o)if(o.hasOwnProperty(p))for(d=0;d<o[p].length;d++)n.add_field_warning(p,o[p][d])},n.init()}},function(e,t,n){"use strict";(function(e,t){window.Juno||(window.Juno={}),Juno.Common||(Juno.Common={}),Juno.Common.Util={},Juno.Common.Util.settings={datetime_format:"YYYY-MM-DDTHH:mm:ssZ",datetime_no_timezone_format:"YYYY-MM-DDTHH:mm:ss",time_format:"h:mma",date_format:"YYYY-MM-DD",dayofweek_format:"dddd"},Juno.Common.Util.DisplaySettings={dateFormat:"yyyy-MM-dd",timeFormat:"HH:mm a"},Juno.Common.Util.exists=function(e){return angular.isDefined(e)&&null!==e},Juno.Common.Util.isBlank=function(e){return!Juno.Common.Util.exists(e)||""===e},Juno.Common.Util.parseBoolean=function(e){let t=["on","yes","true","enabled"],n=["off","no","false","disabled"];if(null!==e&&t.includes(e))return!0;if(null===e||n.includes(e))return!1;throw"Invalid Argument, ["+e+"] not one of, "+t+", "+n},Juno.Common.Util.toArray=function(e){return e instanceof Array?e:null==e?[]:[e]},Juno.Common.Util.pad0=function(e){var t=e.toString();return 1==t.length&&(t="0"+t),t},Juno.Common.Util.toTrimmedString=function(e){return null==e&&(e=""),e instanceof String&&(e=e.trim()),e},Juno.Common.Util.formatDate=function(e){return(e=Juno.Common.Util.toTrimmedString(e))&&(e instanceof Date||(e=new Date(e)),e=e.getFullYear()+"-"+Juno.Common.Util.pad0(e.getMonth()+1)+"-"+Juno.Common.Util.pad0(e.getDate())),e},Juno.Common.Util.formatTime=function(e){return(e=Juno.Common.Util.toTrimmedString(e))&&(e instanceof Date||(e=new Date(e)),e=Juno.Common.Util.pad0(e.getHours())+":"+Juno.Common.Util.pad0(e.getMinutes())),e},Juno.Common.Util.formatMomentDate=function(e,t){return t||(t=Juno.Common.Util.settings.date_format),e.format(t)},Juno.Common.Util.formatMomentTime=function(e,t){return t||(t=Juno.Common.Util.settings.time_format),e.format(t)},Juno.Common.Util.formatMomentDateTimeNoTimezone=function(e){return e.format(Juno.Common.Util.settings.datetime_no_timezone_format)},Juno.Common.Util.getDateMoment=function(t){return e.utc(t,Juno.Common.Util.settings.date_format,!0)},Juno.Common.Util.getTimeMoment=function(t){return e.utc(t,Juno.Common.Util.settings.time_format,!0)},Juno.Common.Util.getDateMomentFromComponents=function(t,n,o){return e.utc({year:t,month:Number(n)-1,day:o})},Juno.Common.Util.getDateAndTimeMoment=function(t,n){return e.utc(t+" "+n,Juno.Common.Util.settings.date_format+" "+Juno.Common.Util.settings.time_format,!0)},Juno.Common.Util.getDatetimeNoTimezoneMoment=function(t){return e.utc(t,Juno.Common.Util.settings.datetime_no_timezone_format,!0)},Juno.Common.Util.getUserISOTimezoneOffset=function(){let e="-",t=(new Date).getTimezoneOffset();t<0&&(e="+",t*=-1);let n=t%60;return e+(t/60).toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},Juno.Common.Util.validateDateString=function(e,t,n,o,a){Juno.Common.Util.exists(e)?Juno.Common.Util.getDateMoment(e).isValid()||t.add_field_error(n,o+" is invalid"):a&&t.add_field_error(n,o+"is required")},Juno.Common.Util.validateTimeString=function(e,t,n,o,a){Juno.Common.Util.exists(e)?Juno.Common.Util.getTimeMoment(e).isValid()||t.add_field_error(n,o+"is invalid"):a&&t.add_field_error(n,o+"is required")},Juno.Common.Util.validateIntegerString=function(e,t,n,o,a,r,i){Juno.Common.Util.isBlank(e)?a&&t.add_field_error(n,o+"is required"):(!Juno.Common.Util.isIntegerString(e)||r&&Number(e)<0||i&&0===Number(e))&&t.add_field_error(n,o+"is invalid")},Juno.Common.Util.addNewLine=function(e,t){return null==e||""==e.trim()?t:(null==t||""==t.trim()?t=e.trim():t+="\n"+e.trim(),t)},Juno.Common.Util.calcAge=function(t,n,o){let a=e({year:t,month:n,day:o});return e().diff(a,"years")},Juno.Common.Util.isInArray=function(e,t){return t.indexOf(e)>-1},Juno.Common.Util.mergeHash=function(e,n){return"undefined"!==n&&(t.extend(!0,e,n),!0)},Juno.Common.Util.noNull=function(e){return"string"==typeof e?e=e.trim():null===e&&(e=""),e},Juno.Common.Util.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},Juno.Common.Util.isDefinedAndNotNull=function(e){return angular.isDefined(e)&&null!==e},Juno.Common.Util.objectArrayIndexOf=function(e,t,n){for(var o=0,a=e.length;o<a;o++)if(e[o][n]===t)return o;return-1},Juno.Common.Util.isIntegerString=function(e){parseInt(e);return!!/^-?\d+$/.test(e.toString())},Juno.Common.Util.isNumber=function(e){return"number"==typeof e},Juno.Common.Util.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},Juno.Common.Util.formatName=function(e,t){return t||e?e?t?t+", "+e:e:t:null},Juno.Common.Util.trimToLength=function(e,t){var n=e;return n.length>t&&(n=n.substring(0,t)),n},Juno.Common.Util.windowClosedPromise=function(e){return new Promise(function(t,n){let o=window.setInterval(function(){e.closed&&(t(!0),window.clearInterval(o))},500)})}}).call(this,n(6),n(4))},,function(e,t,n){"use strict";window.Juno=window.Juno||{},Juno.Common=Juno.Common||{},Juno.Common.ServiceHelper={},Juno.Common.ServiceHelper.configHeaders=function(){return{headers:{"Content-Type":"application/json",Accept:"application/json"}}},Juno.Common.ServiceHelper.configHeadersWithCache=function(){return{headers:{"Content-Type":"application/json",Accept:"application/json"},cache:!0}}},function(e,t,n){"use strict";window.Juno=window.Juno||{},Juno.Consults=Juno.Consults||{},Juno.Consults.Common={},Juno.Consults.Common.sortAttachmentDocs=function(e){e.sort(function(e,t){return e.documentType<t.documentType?-1:e.documentType>t.documentType?1:e.displayName<t.displayName?-1:e.displayName>t.displayName?1:0})}},function(e,t,n){"use strict";n.r(t);var o=n(5);n(4),n(33),n(39),n(20),n(41),n(6),n(11),n(43),n(282),n(47),n(48),n(50),n(51),n(52),n(53),n(54),n(56),n(57),n(59),n(60),n(61),n(62),n(63),n(64),n(21),n(65),n(66),angular.module("oscarProviderViewModule",["ui.router","infinite-scroll","ui.router.state.events","ngResource","ui.bootstrap","ui.calendar","angular-loading-bar","ngTable","ngStorage","Common","Common.Services","Common.Filters","Common.Directives","Common.Components","Common.Util","Layout","Tickler","Record","Record.Summary","Record.Tracker","Record.Details","Record.PHR","Record.Forms","Schedule","Settings","Report","Patient","Patient.Search","Inbox","Help","Document","Dashboard","Consults","Admin","Admin.Integration","Admin.Integration.Know2act","Admin.Integration.Fax"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(e,t,n){t.otherwise("/dashboard"),e.state("dashboardManager",{url:"/dashboard/admin",templateUrl:"src/dashboard/admin/DashboardManager.jsp",controller:"dashboardManagerController"}).state("dashboard",{url:"/dashboard",templateUrl:"src/dashboard/dashboard.jsp",controller:"Dashboard.DashboardController"}).state("inbox",{url:"/inbox",templateUrl:"src/inbox/inbox_popup.jsp",controller:"Inbox.InboxController"}).state("consultRequests",{url:"/consults",templateUrl:"src/consults/consultRequestList.jsp",controller:"Consults.ConsultRequestListController as consultRequestListCtrl"}).state("consultResponses",{url:"/consultResponses",templateUrl:"src/consults/consultResponseList.jsp",controller:"Consults.ConsultResponseListController as consultResponseListCtrl"}).state("billing",{url:"/billing",templateUrl:"src/billing/billing_popup.jsp",controller:"BillingCtrl"}).state("schedule",{url:"/schedule",templateUrl:"src/schedule/view.jsp",controller:"Schedule.ScheduleController as scheduleController",resolve:{loadedSettings:["providerService",function(e){return e.getSettings()}]}}).state("admin",{url:"/admin",templateUrl:"src/admin/admin.jsp",controller:"Admin.AdminController as AdminCtrl"}).state("admin.frame",{url:"/frame?frameUrl&useCompat",templateUrl:"src/admin/integration/frameContent/frameContent.jsp",controller:"Admin.Integration.FrameContentController as FrameCtrl"}).state("admin.faxConfig",{url:"/faxConfig",templateUrl:"src/admin/integration/fax/faxConfiguration.jsp",controller:"Admin.Integration.Fax.FaxConfigurationController as faxController"}).state("admin.faxSendReceive",{url:"/faxSendReceive",templateUrl:"src/admin/integration/fax/faxSendReceive.jsp",controller:"Admin.Integration.Fax.FaxSendReceiveController as faxSendReceiveController"}).state("admin.landingPage",{url:"/landingPage",component:"landingPage"}).state("admin.integrationModules",{url:"/integrationModules",component:"integrationModules"}).state("admin.panelManagement",{url:"/panelManagement",component:"panelManagementAdmin"}).state("admin.iceFall",{url:"/iceFall",component:"iceFallAdmin"}).state("admin.iceFall.settings",{url:"/settings",component:"iceFallAdminSettings"}).state("admin.iceFall.activity",{url:"/activity",component:"iceFallAdminActivity"}).state("ticklers",{url:"/ticklers",templateUrl:"src/tickler/ticklerList.jsp",controller:"Tickler.TicklerListController as ticklerListCtrl",resolve:{providers:["providerService",function(e){return e.searchProviders({active:!0})}]}}).state("search",{url:"/search",templateUrl:"src/patient/search/patientSearch.jsp",controller:"Patient.Search.PatientSearchController as patientSearchCtrl",params:{term:null}}).state("reports",{url:"/reports",templateUrl:"src/report/reports.jsp",controller:"Report.ReportsController as reportsCtrl"}).state("documents",{url:"/documents",templateUrl:"src/document/documents_classic.jsp",controller:"Document.DocumentsController"}).state("settings",{url:"/settings",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",resolve:{user:["providerService",function(e){return e.getMe()}],billingServiceTypes:["billingService",function(e){return e.getUniqueServiceTypes()}],providerList:["providerService",function(e){return e.searchProviders({active:!0})}],loadedSettings:["providerService",function(e){return e.getSettings()}],encounterForms:["formService",function(e){return e.getAllEncounterForms()}],eforms:["formService",function(e){return e.getAllEForms()}],teams:["providerService",function(e){return e.getActiveTeams()}],groupNames:["formService",function(e){return e.getGroupNames()}],loadedApps:["appService",function(e){return e.getApps()}]}}).state("settings.persona",{url:"/persona",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"persona"}}).state("settings.general",{url:"/general",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"general"}}).state("settings.schedule",{url:"/schedule",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"schedule"}}).state("settings.billing",{url:"/billing",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"billing"}}).state("settings.rx",{url:"/rx",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"rx"}}).state("settings.masterdemo",{url:"/masterdemo",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"masterdemo"}}).state("settings.consults",{url:"/consults",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"consults"}}).state("settings.documents",{url:"/documents",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"documents"}}).state("settings.summary",{url:"/summary",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"summary"}}).state("settings.eforms",{url:"/eforms",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"eforms"}}).state("settings.inbox",{url:"/inbox",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"inbox"}}).state("settings.programs",{url:"/programs",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"programs"}}).state("settings.integration",{url:"/integration",templateUrl:"src/settings/settings.jsp",controller:"Settings.SettingsController as settingsCtrl",data:{tab:"integration"}}).state("support",{url:"/support",templateUrl:"src/help/support.jsp",controller:"Help.SupportController"}).state("help",{url:"/help",templateUrl:"src/help/help.jsp",controller:"Help.HelpController"}).state("record",{url:"/record/:demographicNo",templateUrl:"src/record/record.jsp",controller:"Record.RecordController as recordCtrl",resolve:{demo:["$stateParams","demographicService",function(e,t){return t.getDemographic(e.demographicNo)}],user:["providerService",function(e){return e.getMe()}],properties:["uxService",function(e){return e.getDisplayProperties()}]}}).state("record.details",{url:"/details",templateUrl:"src/record/details/details.jsp",controller:"Record.Details.DetailsController as detailsCtrl"}).state("record.summary",{url:"/summary?appointmentNo&encType",templateUrl:"src/record/summary/summary.jsp",controller:"Record.Summary.SummaryController as summaryCtrl"}).state("record.forms",{url:"/forms",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl",params:{viewState:o.FORM_CONTROLLER_STATES.COMPLETED}}).state("record.forms.add",{url:"/add",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl",params:{viewState:o.FORM_CONTROLLER_STATES.ADD}}).state("record.forms.completed",{url:"/completed",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl",params:{viewState:o.FORM_CONTROLLER_STATES.COMPLETED}}).state("record.forms.revisions",{url:"/revisions",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl",params:{viewState:o.FORM_CONTROLLER_STATES.REVISION}}).state("record.forms.deleted",{url:"/deleted",templateUrl:"src/record/forms/forms.jsp",controller:"Record.Forms.FormController as formCtrl",params:{viewState:o.FORM_CONTROLLER_STATES.DELETED}}).state("record.consultRequests",{url:"/consults",templateUrl:"src/consults/consultRequestList.jsp",controller:"Consults.ConsultRequestListController as consultRequestListCtrl"}).state("record.consultResponses",{url:"/consultResponses",templateUrl:"src/consults/consultResponseList.jsp",controller:"Consults.ConsultResponseListController as consultResponseListCtrl"}).state("record.consultRequest",{url:"/consult/:requestId",templateUrl:"src/consults/consultRequest.jsp",controller:"Consults.ConsultRequestController as consultRequestCtrl",resolve:{consult:["$stateParams","consultService",function(e,t){return"new"===e.requestId?t.getNewRequest(e.demographicNo):t.getRequest(e.requestId)}],user:["providerService",function(e){return e.getMe()}]}}).state("record.consultResponse",{url:"/consultResponse/:responseId",templateUrl:"src/consults/consultResponse.jsp",controller:"Consults.ConsultResponseController as consultResponseCtrl",resolve:{consult:["$stateParams","consultService",function(e,t){return t.getResponse(e.responseId,e.demographicNo)}],user:["providerService",function(e){return e.getMe()}]}}).state("record.tickler",{url:"/tickler",templateUrl:"src/tickler/ticklerList.jsp",controller:"Tickler.TicklerListController as ticklerListCtrl",resolve:{providers:["providerService",function(e){return e.searchProviders({active:!0})}]}}).state("record.tracker",{url:"/tracker",templateUrl:"src/record/tracker/tracker.jsp",controller:"Record.Tracker.TrackerController as trackerCtrl"}).state("record.phr",{url:"/phr",templateUrl:"src/record/phr/phr.jsp",controller:"Record.PHR.PHRController as phrCtrl"}).state("k2aConfig",{url:"/k2aConfig",templateUrl:"src/admin/integration/know2act/Know2actConfiguration.jsp",controller:"Admin.Integration.Know2act.k2aConfigController as k2aConfigCtrl"}).state("k2aTemplate",{url:"/k2aTemplate",templateUrl:"src/admin/integration/know2act/Know2actTemplate.jsp",controller:"Admin.Integration.Know2act.k2aTemplateController as k2aTemplateCtrl"}).state("k2aNotification",{url:"/k2aNotification",templateUrl:"src/admin/integration/know2act/Know2actNotifications.jsp",controller:"Admin.Integration.Know2act.k2aNotificationController as k2aNoteCtrl"}).state("faxConfig",{url:"/faxConfig",templateUrl:"src/admin/integration/fax/faxConfiguration.jsp",controller:"Admin.Integration.Fax.FaxConfigurationController as faxController"}).state("faxSendReceive",{url:"/faxSendReceive",templateUrl:"src/admin/integration/fax/faxSendReceive.jsp",controller:"Admin.Integration.Fax.FaxSendReceiveController as faxSendReceiveController"}),n.interceptors.push(["$q",function(e){return{responseError:function(t){return 401===t.status&&"<error>Not authorized</error>"===t.data&&location.reload(),e.reject(t)}}}])}]),angular.module("oscarProviderViewModule").factory("Navigation",[function(){return{location:"",load:function(e){this.location=e}}}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";angular.module("Common",[])},function(e,t,n){"use strict";angular.module("Common.Util",[])},function(e,t,n){"use strict";angular.module("Common.Util").service("angularUtil",["$window",function(e){var t={inMobileView:function(){return e.innerWidth<768}};return t}])},function(e,t,n){"use strict";angular.module("Common.Util").service("junoHttp",["$http","$window","$q",function(e,t,n){var o={request:function(t){var a=n.defer();return e(t).then(function(e){o.success_function(e,t,a)},function(e){o.errors_function(e,t,a)},function(e){a.notify(e)}),a.promise},success_function:function(e,t,n){var o=e;try{if("SUCCESS"===o.data.status){var a={meta:angular.copy(o.data.headers),data:angular.copy(o.data.body)};n.resolve(a)}else{if("ERROR"!==o.data.status)throw"Invalid Response Status";var r={meta:angular.copy(o.data.headers),data:angular.copy(o.data.error.message)};n.reject(r)}}catch(e){r={meta:{},data:"An Error has occurred. please contact technical support"};n.reject(r)}},errors_function:function(e,t,n){n.reject(e)},call:function(e,t,n){var a={method:e,url:t,data:n};return o.request(a)},get:function(e,t){var n={method:"GET",url:e};return Juno.Common.Util.mergeHash(n,t),o.request(n)},post:function(e,t){var n={method:"POST",url:e,data:t};return o.request(n)},put:function(e,t){var n={method:"PUT",url:e,data:t};return o.request(n)},del:function(e,t){var n={method:"DELETE",url:e,data:t};return o.request(n)}};return o}])},function(e,t,n){"use strict";window.Juno=window.Juno||{},Juno.Common=Juno.Common||{},Juno.Common.SearchListHelper=function(e,t){var n=this;n.searchParams=t||{},n.defaults={page:1,perPage:10},n.initSearchParameters=function(){var t;if(Juno.Common.Util.exists(e))for(t in e)e.hasOwnProperty(t)&&(n.defaults[t]=e[t])},n.getParams=function(){var e={};for(var t in n.searchParams)n.searchParams.hasOwnProperty(t)&&(e[t]=n.searchParams[t]);for(var t in n.defaults)e.hasOwnProperty(t)||(e[t]=n.defaults[t]);return e},n.initSearchParameters()}},function(e,t,n){"use strict";angular.module("Common.Services",["Common.Util"])},function(e,t,n){"use strict";angular.module("Common.Services").service("appService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/app",getApps:function(){var o=t.defer();return e({url:n.apiPath+"/getApps",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("appServices::getApps error",e),o.reject("An error occured while getting app content")}),o.promise}};return n}])},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").service("autoCompleteService",["$q","demographicService",function(t,n){var o={init_autocomplete_values:function(a,r){var i=t.defer();return n.getDemographic(a.patient).then(function(t){console.log(t),t.dob=e([t.dobYear,t.dobMonth,t.dobDay]),i.resolve({data:{patient:{data:o.formatDemographic(t)}}})}),i.promise},formatDemographic:function(e){return{uuid:e.demographicNo,full_name:e.lastName+","+e.firstName,birth_date:Juno.Common.Util.formatMomentDate(e.dob),health_number:e.hin,phone_number_primary:e.phone}}};return o}])}).call(this,n(6))},function(e,t,n){"use strict";angular.module("Common.Services").service("billingService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",getUniqueServiceTypes:function(){var o=t.defer();return e.get(n.apiPath+"billing/uniqueServiceTypes",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){o.resolve(e.data.content)},function(e){console.log("billingService::getUniqueServiceTypes error",e),o.reject("An error occured while fetching billing service types")}),o.promise},getBillingRegion:function(){var o=t.defer();return e.get(n.apiPath+"billing/billingRegion",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){o.resolve(e.data)},function(e){console.log("billingService::getBillingRegion error",errorsz),o.reject("An error occured while setting billingRegion")}),o.promise},getDefaultView:function(){var o=t.defer();return e.get(n.apiPath+"billing/defaultView",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){o.resolve(e.data)},function(e){console.log("billingService::getDefaultView error",e),o.reject("An error occured while setting defaultView")}),o.promise}};return n}])},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").service("consultService",["$http","$q","junoHttp",function(t,n,o){var a={apiPath:"../ws/rs/consults/",searchRequests:function(e){var t=n.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params=e,o.get(a.apiPath+"searchRequests",r).then(function(e){t.resolve(e)},function(e){console.log("consultService::searchRequests error",e),t.reject("An error occurred while searching consult requests")}),t.promise},getTotalRequests:function(e){var t=n.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params=e,o.get(a.apiPath+"getTotalRequests",r).then(function(e){t.resolve(e)},function(e){console.log("consultService::getTotalRequests error",e),t.reject("An error occurred while getting total number of consult requests")}),t.promise},getRequest:function(t){var r=n.defer(),i=Juno.Common.ServiceHelper.configHeaders();return o.get(a.apiPath+"getRequest/"+encodeURIComponent(t),i).then(function(t){t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),r.resolve(t.data)},function(e){console.log("consultService::getRequest error",e),r.reject("An error occurred while getting consult request (requestId="+t+")")}),r.promise},getNewRequest:function(t){var r=n.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={demographicNo:t},o.get(a.apiPath+"getNewRequest",i).then(function(t){t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),r.resolve(t.data)},function(e){console.log("consultService::getNewRequest error",e),r.reject("An error occurred while getting new consult request")}),r.promise},getRequestAttachments:function(e,t,r){var i=n.defer(),l=Juno.Common.ServiceHelper.configHeaders();return l.params={demographicId:encodeURIComponent(t),attached:encodeURIComponent(r)},o.get(a.apiPath+"getRequestAttachments/"+encodeURIComponent(e),l).then(function(e){i.resolve(e.data)},function(t){console.log("consultService::getRequestAttachments error",t),i.reject("An error occured while getting consult attachments (requestId="+e+")")}),i.promise},saveRequest:function(e){var t=n.defer();return o.post(a.apiPath+"saveRequest",e).then(function(e){t.resolve(e.data)},function e(n){console.log("consultService::saveRequest error",e),t.reject("An error occurred while fetching consult request after save")}),t.promise},eSendRequest:function(e){var t=n.defer();return o.get(a.apiPath+"eSendRequest/"+encodeURIComponent(e),Juno.Common.ServiceHelper.configHeaders()).then(function(e){t.resolve(e.data)},function(n){console.log("consultService::eSendRequest error",n),t.reject("An error occurred while e-sending consult request (requestId="+e+")")}),t.promise},searchResponses:function(e){var t=n.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params=e,o.get(a.apiPath+"searchResponses",r).then(function(e){t.resolve(e)},function(e){console.log("consultService::searchRequests error",e),t.reject("An error occured while searching consult requests")}),t.promise},getResponse:function(o,r){var i=n.defer();return"new"===o&&(o=0),t.get(a.apiPath+"getResponse",{params:{responseId:o,demographicNo:r}}).then(function(t){t.data.responseDate&&(t.data.responseDate=e(t.data.responseDate).toDate()),t.data.referralDate&&(t.data.referralDate=e(t.data.referralDate).toDate()),t.data.appointmentDate&&(t.data.appointmentDate=e(t.data.appointmentDate).toDate()),t.data.followUpDate&&(t.data.followUpDate=e(t.data.followUpDate).toDate()),i.resolve(t.data)},function(e){console.log("consultService::getResponse error",e),i.reject("An error occurred while getting consult response (responseId="+o+")")}),i.promise},getResponseAttachments:function(e,o,r){var i=n.defer();return t.get(a.apiPath+"getResponseAttachments?responseId="+encodeURIComponent(e)+"&demographicNo="+encodeURIComponent(o)+"&attached="+encodeURIComponent(r)).then(function(e){i.resolve(e.data)},function(t){console.log("consultService::getResponseAttachments error",t),i.reject("An error occurred while getting consult response attachments (responseId="+e+")")}),i.promise},saveResponse:function(e){var o=n.defer();return t.post(a.apiPath+"saveResponse",e).then(function(e){o.resolve(e.data)},function(e){console.log("consultService::saveResponse error",e),o.reject("An error occurred while fetching consult response after save")}),o.promise},getReferralPathwaysByService:function(e){var o=n.defer();return t.get(a.apiPath+"getReferralPathwaysByService?serviceName="+encodeURIComponent(e)).then(function(e){o.resolve(e.data)},function(e){console.log("consultService::getReferralPathwaysByService error",e),o.reject("An error occured while fetching referral pathways")}),o.promise},getLetterheadList:function(){var e=n.defer(),t=Juno.Common.ServiceHelper.configHeaders();return o.get(a.apiPath+"getLetterheadList",t).then(function(t){e.resolve(t)},function(t){console.log("consultService::getLetterheadList error",t),e.reject("An error occurred while fetching letterheads")}),e.promise}};return a}])}).call(this,n(6))},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").service("demographicService",["$q","junoHttp",function(t,n){var o={apiPath:"../ws/rs/demographic",getDemographic:function(a){var r=t.defer();return n.get(o.apiPath+"/"+encodeURIComponent(a),Juno.Common.ServiceHelper.configHeaders()).then(function(t){t.data.effDate&&(t.data.effDate=e(t.data.effDate).toDate()),t.data.hcRenewDate&&(t.data.hcRenewDate=e(t.data.hcRenewDate).toDate()),t.data.endDate&&(t.data.endDate=e(t.data.endDate).toDate()),t.data.patientStatusDate&&(t.data.patientStatusDate=e(t.data.patientStatusDate).toDate()),t.data.onWaitingListSinceDate&&(t.data.onWaitingListSinceDate=e(t.data.onWaitingListSinceDate).toDate()),t.data.scrPaperChartArchivedDate&&(t.data.scrPaperChartArchivedDate=e(t.data.scrPaperChartArchivedDate).toDate()),t.data.dateJoined&&(t.data.dateJoined=e(t.data.dateJoined).toDate()),t.data.rosterTerminationDate&&(t.data.rosterTerminationDate=e(t.data.rosterTerminationDate).toDate()),t.data.rosterDate&&(t.data.rosterDate=e(t.data.rosterDate).toDate()),r.resolve(t.data)},function(e){console.log("demographicServices::getDemographic error",e),r.reject("An error occurred while fetching demographic")}),r.promise},getDemographicContacts:function(e,a){var r=t.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={category:a},n.get(o.apiPath+"/"+encodeURIComponent(e)+"/contacts",i).then(function(e){r.resolve(e.data)},function(e){console.log("demographicServices::getDemographicContacts error",e),r.reject("An error occurred while fetching demographic contacts")}),r.promise},saveDemographic:function(e){var a=t.defer();return n.post(o.apiPath,e).then(function(e){a.resolve(e.data)},function(e){console.log("demographicServices::saveDemographic error",e),a.reject(e.data.error.message)}),a.promise},updateDemographic:function(e){var a=t.defer();return n.put(o.apiPath,e).then(function(e){a.resolve(e.data)},function(e){console.log("demographicServices::updateDemographic error",e),a.reject("An error occurred while updating demographic")}),a.promise}};return o}])}).call(this,n(6))},function(e,t,n){"use strict";angular.module("Common.Services").service("demographicsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/demographics"};return n.SEARCH_MODE=Object.freeze({Name:"search_name",DOB:"search_dob",Phone:"search_phone",Hin:"search_hin",Address:"search_address",Email:"search_email",ChartNo:"search_chart_no",DemographicNo:"search_demographic_no"}),n.STATUS_MODE=Object.freeze({ALL:"all",ACTIVE:"active",INACTIVE:"inactive"}),n.quickSearch=function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={query:o},t.get(n.apiPath+"/quickSearch",r).then(function(e){a.resolve(e)},function(e){console.log("demographicsService::quickSearch error",e),a.reject("An error occurred while searching")}),a.promise},n.search=function(o,a,r){var i=e.defer(),l=Juno.Common.ServiceHelper.configHeaders();return l.params={jsonData:o,page:a,perPage:r},t.get(n.apiPath+"/search",l).then(function(e){i.resolve(e)},function(e){console.log("demographicsService::search error",e),i.reject("An error occurred while searching")}),i.promise},n.searchIntegrator=function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={jsonData:o,itemsToReturn:a},t.get(n.apiPath+"/searchIntegrator",i).then(function(e){r.resolve(e.data)},function(e){console.log("demographicsService::searchIntegrator error",e),r.reject("An error occurred while searching")}),r.promise},n.getStatusList=function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={type:o},t.get(n.apiPath+"/statusList",r).then(function(e){a.resolve(e.data)},function(e){console.log("demographicsService::getStatusList error",e),a.reject("An error occurred while getting status list")}),a.promise},n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("diseaseRegistryService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs/dxRegisty/",getQuickLists:function(){var e=t.defer();return n.get(o.apiPath+"quickLists/",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(t){e.resolve(t.data)},function(t){console.log("diseaseRegistryService::getQuickLists error",t),e.reject("An error occurred while fetching quick lists")}),e.promise},getIssueQuickLists:function(){var e=t.defer();return n.get(o.apiPath+"issueQuickLists/",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(t){e.resolve(t.data)},function(t){console.log("diseaseRegistryService::getIssueQuickLists error",t),e.reject("An error occurred while fetching quick lists")}),e.promise},addToDxRegistry:function(n,a){var r=t.defer(),i={};return i.id=a.id,i.type=a.type,i.code=a.code,i.description=a.description,e.post(o.apiPath+encodeURIComponent(n)+"/add",i).then(function(e){r.resolve(e.data)},function(e){console.log("diseaseRegistryService::addToDxRegistry error",e),r.reject("An error occurred while adding to dx registry")}),r.promise},findDxIssue:function(e,a){var r=t.defer(),i=Juno.Common.ServiceHelper.configHeadersWithCache();return i.params={codingSystem:a,code:e},n.get(o.apiPath+"findDxIssue",i).then(function(e){r.resolve(e.data)},function(e){console.log("diseaseRegistryService::findDxIssue error",e),r.reject("An error occurred while retrieving a dx issue")}),r.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").factory("errorsService",[function(){var e={factory:function(e,t){return new Juno.Common.DisplayMessages(e,t)}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("eFormService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/eform",saveEForm:function(){var o=e.defer();return t.put(n.apiPath+"/",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e)},function(e){console.log("formService::saveEForm error",e),o.reject("An error occurred while saving an EForm")}),o.promise},updateEForm:function(o){var a=e.defer();return t.post(n.apiPath+"/"+o,Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e)},function(e){console.log("formService::updateEForm error",e),a.reject("An error occurred while updating an EForm")}),a.promise},loadEForm:function(o){var a=e.defer();return t.get(n.apiPath+"/"+o,Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e)},function(e){console.log("formService::loadEForm error",e),a.reject("An error occurred while loading an EForm")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("faxAccountService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/faxAccount",listAccounts:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={page:o,perPage:a},t.get(n.apiPath+"/search",i).then(function(e){r.resolve(e.data)},function(e){console.log("faxService::listAccounts error",e),r.reject("An error occurred while getting fax account data")}),r.promise},isEnabled:function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/"+o+"/enabled",r).then(function(e){a.resolve(e.data)},function(e){console.log("faxService::isEnabled error",e),a.reject("An error occurred while getting fax account data")}),a.promise},getAccountSettings:function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/"+o,r).then(function(e){a.resolve(e.data)},function(e){console.log("faxService::getAccountSettings error",e),a.reject("An error occurred while getting fax account data")}),a.promise},addAccountSettings:function(o){var a=e.defer();return t.post(n.apiPath,o).then(function(e){a.resolve(e.data)},function(e){console.log("faxService::setAccountSettings error",e),a.reject("An error occurred while setting fax account data")}),a.promise},updateAccountSettings:function(o,a){var r=e.defer();return t.put(n.apiPath+"/"+o,a).then(function(e){r.resolve(e.data)},function(e){console.log("faxService::setAccountSettings error",e),r.reject("An error occurred while updating fax account data")}),r.promise},testConnection:function(o){var a=e.defer();let r=o.id,i=n.apiPath+"/testConnection";return r&&null!=r&&""!==r&&(i=n.apiPath+"/"+o.id+"/testConnection"),t.post(i,o).then(function(e){a.resolve(e.data)},function(e){console.log("faxService::validateLogin error",e),a.reject("An error occurred while testing connection")}),a.promise},getInbox:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params=a.getParams(),t.get(n.apiPath+"/"+o+"/inbox",i).then(function(e){r.resolve(e)},function(e){console.log("faxService::getInbox error",e),r.reject("An error occurred while retrieving inbox data")}),r.promise},getOutbox:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params=a.getParams(),t.get(n.apiPath+"/"+o+"/outbox",i).then(function(e){r.resolve(e)},function(e){console.log("faxService::getOutbox error",e),r.reject("An error occurred while retrieving outbox data")}),r.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("faxInboundService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/faxInbound",getNextPullTime:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/getNextPullTime",a).then(function(e){o.resolve(e.data)},function(e){console.log("faxService::getNextPullTime error",e),o.reject("An error occurred while getting scheduled pull time")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("faxOutboundService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/faxOutbound",resendOutboundFax:function(o){var a=e.defer();return t.put(n.apiPath+"/"+o+"/resend").then(function(e){a.resolve(e.data)},function(e){console.log("faxService::resendFax error",e),a.reject("An error occurred while resending a fax")}),a.promise},getNextPushTime:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/getNextPushTime",a).then(function(e){o.resolve(e.data)},function(e){console.log("faxService::getNextPushTime error",e),o.reject("An error occurred while getting scheduled push time")}),o.promise},getDownloadUrl:function(e){return n.apiPath+"/"+e+"/download"},setNotificationStatus:function(o,a){var r=e.defer();return t.put(n.apiPath+"/"+o+"/notificationStatus",a).then(function(e){r.resolve(e.data)},function(e){console.log("faxService::setNotificationStatus error",e),r.reject("An error occurred while acknowledging a fax")}),r.promise},archive:function(o){var a=e.defer();return t.put(n.apiPath+"/"+o+"/archive").then(function(e){a.resolve(e.data)},function(e){console.log("faxService::archive error",e),a.reject("An error occurred while archiveing a fax")}),a.promise}};return n}])},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").factory("fieldHelperService",["$timeout",function(t){var n={default_scope:{form_group_class:"@caFormGroupClass",label_size:"@caLabelSize",input_size:"@caInputSize",text_length:"@caTextLength",text_placeholder:"@caTextPlaceholder",hide_label_colon:"@caTitleNoColon",template:"@caTemplate",name:"@caName",title:"@caTitle",hint:"@caHint",tab_index:"@caTabindex",error_message:"@caError",warning_message:"@caWarning",depends_on_field:"@caDependsOnField",depends_on_value:"@caDependsOnValue",model:"=caModel",disabled:"=caDisabled",hide:"=caHide",focus_field:"=caFocusField",requiredField:"@caRequiredField",on_focus_fn:"&caFocus",change_fn:"&caChange",blur_fn:"&caBlur",keypress_enter_fn:"&caKeypressEnter"},resolve_template:function(e,t){return Juno.Common.Util.exists(e.caTemplate)?t+"_"+e.caTemplate+".jsp":t+".jsp"},merge_title_messages:function(e){e.title_array=[],Juno.Common.Util.exists(e.error_message)&&e.title_array.push(e.error_message),Juno.Common.Util.exists(e.warning_message)&&e.title_array.push(e.warning_message),0==e.title_array.length&&Juno.Common.Util.exists(e.hint)&&e.title_array.push(e.hint),e.title_string=e.title_array.join("|")},default_link_function:function(o,a,r,i){n.merge_title_messages(o),o.focus_fn=function(){angular.isFunction(o.on_focus_fn)&&t(function(){e(a).is("input:enabled, select:enabled, textarea:enabled")&&e(a).is(":focus")||e(a).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.$watch("focus_field",function(){Juno.Common.Util.exists(o.name)&&o.focus_field==o.name&&t(function(){e(a).is("input:enabled, select:enabled, textarea:enabled")?e(a).focus().select():e(a).find("input:enabled, select:enabled, textarea:enabled").first().focus().select()})}),o.$on("focusCaFocusField",function(t,n){Juno.Common.Util.exists(o.name)&&o.name==n&&(e(a).is("input:enabled, select:enabled, textarea:enabled")?e(a).focus().select():e(a).find("input:enabled, select:enabled, textarea:enabled").first().focus().select())}),angular.isFunction(o.keypress_enter_fn)&&a.bind("keydown keypress",function(e){13===e.which&&(o.$apply(function(){o.$eval(o.keypress_enter_fn)}),e.preventDefault())})},default_controller:["$scope","$element","$attrs",function(e,t,n){this.ignore_focus_field=function(){return!0}}],textInputDirective:function(e){var t=angular.copy(n.default_scope);t.rows="@caRows",t.hideText="@caHideText",t.max_characters="@caMaxCharacters",t.no_label="@caNoLabel";return{restrict:"EAC",scope:t,templateUrl:function(e,t){return n.resolve_template(t,"src/common/directives/clinicaid/ca_field_text")},replace:!0,link:function(t,o,a,r){e&&(t.hideText=!0),t.model||(t.model=""),t.$watch("model",function(e,n){Juno.Common.Util.exists(t.model)&&t.model.length>t.max_characters&&(t.error_message="Character limit exceeded. Max allowed: "+t.max_characters)}),n.default_link_function(t,o,a,r)},controller:n.default_controller}}};return n}])}).call(this,n(4))},function(e,t,n){"use strict";(function(e){angular.module("Common.Services").factory("focusService",["$timeout","$window",function(t,n){var o={element:function(n){t(function(){e(n).focus()})},first_form_input:function(n){n||(n="form:visible:first"),t(function(){e(n+" input:enabled, "+n+" select:enabled, "+n+" textarea:enabled ").first().focus()})},first_error_input:function(n){angular.isObject(n)||(n={});var a=n.selector||"";t(function(){e(a+" .has-error:first input:enabled, "+a+" .has-error:first select:enabled, "+a+" .has-error:first textarea:enabled ").first().focus(),o.first_alert(n)})},first_alert:function(n){angular.isObject(n)||(n={});var o=n.selector||"",a=n.scroll_offset;(!a||a<0)&&(a=10),t(function(){e("body").hasClass("modal-open")?e(".modal").animate({scrollTop:0}):e("html, body").animate({scrollTop:e(o+" .alert:visible:first").offset().top-a},500)})}};return o}])}).call(this,n(4))},function(e,t,n){"use strict";angular.module("Common.Services").service("formService",["$http","$q","junoHttp","providerService",function(e,t,n,o){var a={apiPath:"../ws/rs/forms",popupOptions:"left=100,top=100,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no"};return o.getSettings().then(function(e){a.popupOptions="height="+e.eformPopupHeight+",width="+e.eformPopupWidth+","+a.popupOptions},function(e){console.error("Failed to load provider settings with error: "+e)}),a.getAllFormsByHeading=function(n,o){var r=t.defer();return e.get(a.apiPath+"/"+encodeURIComponent(n)+"/all?heading="+encodeURIComponent(o),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("formService::getAllFormsByHeading error",e),r.reject("An error occurred while fetching forms")}),r.promise},a.genericFormGet=function(n){var o=t.defer();return e.get(n,Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("formService::getAllFormsByHeading error",e),o.reject("An error occurred while fetching forms")}),o.promise},a.getAllEncounterForms=function(){var n=t.defer();return e.get(a.apiPath+"/allEncounterForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getAllEncounterForms error",e),n.reject("An error occurred while fetching encounter forms")}),n.promise},a.getSelectedEncounterForms=function(){var n=t.defer();return e.get(a.apiPath+"/selectedEncounterForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getSelectedEncounterForms error",e),n.reject("An error occurred while fetching selected encounter forms")}),n.promise},a.getCompletedEncounterForms=function(e){return a.genericFormGet(a.apiPath+"/"+encodeURIComponent(e)+"/all/completed")},a.getAddForms=function(e){return a.genericFormGet(a.apiPath+"/allForms")},a.getRevisionForms=function(e){return a.genericFormGet(a.apiPath+"/"+encodeURIComponent(e)+"/all/revisions")},a.getDeletedForms=function(e){return a.genericFormGet(a.apiPath+"/"+encodeURIComponent(e)+"/all/deleted")},a.getAllEForms=function(){var n=t.defer();return e.get(a.apiPath+"/allEForms",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data.content)},function(e){console.log("formService::getAllEForms error",e),n.reject("An error occurred while fetching eforms")}),n.promise},a.deleteForm=function(n,o){let r=t.defer();return e.put(a.apiPath+"/delete/"+encodeURIComponent(n)+"?type="+encodeURIComponent(o),null,Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.error("Error deleting form: "+n),r.reject("Error deleting form: "+n)}),r.promise},a.restoreForm=function(n,o){let r=t.defer();return e.put(a.apiPath+"/restore/"+encodeURIComponent(n)+"?type="+encodeURIComponent(o),null,Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.error("Error restoring form: "+n),r.reject("Error restoring form: "+n)}),r.promise},a.getGroupNames=function(){var n=t.defer();return e.get(a.apiPath+"/groupNames",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data.content)},function(e){console.log("formService::getGroupNames error",e),n.reject("An error occurred while fetching group names")}),n.promise},a.getFormGroups=function(){var n=t.defer();return e.get(a.apiPath+"/getFormGroups",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getFormGroups error",e),n.reject("An error occurred while fetching form groups")}),n.promise},a.getFavouriteFormGroup=function(){var n=t.defer();return e.get(a.apiPath+"/getFavouriteFormGroup",Juno.Common.ServiceHelper.configHeaders()).then(function(e){n.resolve(e.data)},function(e){console.log("formService::getFavouriteFormGroup error",e),n.reject("An error occurred while fetching favourite form groups")}),n.promise},a.getFormOptions=function(n){var o=t.defer();return e.get(a.apiPath+"/"+encodeURIComponent(n)+"/formOptions",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("formService::getFormOptions error",e),o.reject("An error occurred while fetching form options")}),o.promise},a.openEFormPopup=function(e,t){let n="../eform/efmformadd_data.jsp?fid="+t+"&demographic_no="+e+"&appointment=null";return Juno.Common.Util.windowClosedPromise(window.open(n,"popUpWindow",a.popupOptions))},a.openEFormInstancePopup=function(e,t){let n="../eform/efmshowform_data.jsp?fdid="+t+"&demographic_no="+e+"&appointment=null";return Juno.Common.Util.windowClosedPromise(window.open(n,"popUpWindow",a.popupOptions))},a.openFormPopup=function(e,t,n,o){return void 0===n&&(n=""),o=o+encodeURIComponent(t)+"&formId=0&provNo="+encodeURIComponent(e)+"&parentAjaxId=forms&appointmentNo="+encodeURIComponent(n),Juno.Common.Util.windowClosedPromise(window.open(o,"popUpWindow",a.popupOptions))},a.openFormInstancePopup=function(e,t,n,o){void 0!==n&&null!==n||(n="");let r="../form/forwardshortcutname.jsp?formname="+encodeURIComponent(e)+"&demographic_no="+encodeURIComponent(t)+"&appointmentNo="+encodeURIComponent(n)+"&formId="+encodeURIComponent(o);return Juno.Common.Util.windowClosedPromise(window.open(r,"popUpWindow",a.popupOptions))},a}])},function(e,t,n){"use strict";angular.module("Common.Services").service("globalStateService",[function(){return{global_settings:{interface_preferences:{scheduler_license_key:""},schedule:{date_selected:null,view_selected:null}}}}])},function(e,t,n){"use strict";angular.module("Common.Services").service("inboxService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/inbox",getDashboardItems:function(o){var a=t.defer();return e({url:n.apiPath+"/mine?limit="+encodeURIComponent(o),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("inboxService::getDashboardItems error",e),a.reject("An error occured while getting inbox content")}),a.promise},getUnAckLabDocCount:function(){var o=t.defer();return e({url:n.apiPath+"/mine/count",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("inboxService::getUnAckLabDocCount error",e),o.reject("An error occured while getting inbox content")}),o.promise},getInboxCountByStatus:function(o,a){var r=t.defer();return e({url:n.apiPath+"/"+encodeURIComponent(o)+"/"+encodeURIComponent(a)+"/count",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){r.resolve(e.data)},function(e){console.log("inboxService::getUnAckLabDocCount error",e),r.reject("An error occured while getting inbox content")}),r.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("k2aService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs",getK2aFeed:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={key:"k2a",startPoint:encodeURIComponent(o),numberOfRows:encodeURIComponent(a)},t.get(n.apiPath+"/rssproxy/rss",i).then(function(e){r.resolve(e.data)},function(e){console.log("k2aService::getK2aFeed error",e),r.reject("An error occured while getting k2a content")}),r.promise},isK2AInit:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/app/K2AActive",a).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::isK2AInit error",e),o.reject("An error occured while getting k2a content")}),o.promise},initK2A:function(o){var a=e.defer(),r={name:o};return t.post(n.apiPath+"/app/K2AInit",r).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::initK2A error",e),a.reject("An error occured while trying to initialize k2a")}),a.promise},postK2AComment:function(o){var a=e.defer(),r={post:o};return t.post(n.apiPath+"/app/comment",r).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::postK2AComment error",e),a.reject("An error occured while trying to post a comment to k2a")}),a.promise},removeK2AComment:function(o){var a=e.defer();return t.del(n.apiPath+"/app/comment/"+encodeURIComponent(o)).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::removeK2AComment error",e),a.reject("An error occured while trying to remove a comment from k2a")}),a.promise},preventionRulesList:function(){var o=e.defer();return t.get(n.apiPath+"/resources/preventionRulesList",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::preventionRulesList error",e),o.reject("An error occured while trying to remove a comment from k2a")}),o.promise},loadPreventionRuleById:function(o){var a=e.defer();return t.post(n.apiPath+"/resources/loadPreventionRulesById/"+encodeURIComponent(o.id),o).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::loadPreventionRuleById error",e),a.reject("An error occured while trying to loadPreventionRulesById")}),a.promise},getCurrentPreventionRulesVersion:function(){var o=e.defer();return t.get(n.apiPath+"/resources/currentPreventionRulesVersion",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::getCurrentPreventionRulesVersion error",e),o.reject("An error occured while trying to getCurrentPreventionRulesVersion")}),o.promise},getNotifications:function(){var o=e.defer();return t.get(n.apiPath+"/resources/notifications",Juno.Common.ServiceHelper.configHeaders()).then(function(e){o.resolve(e.data)},function(e){console.log("k2aService::getNotifications error",e),o.reject("An error occured while trying to getNotifications")}),o.promise},getMoreNotification:function(o){var a=e.defer();return t.post(n.apiPath+"/resources/notifications/readmore",o,Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::getMoreNotification error",e),a.reject("An error occured while trying to /resources/notifications/readmore")}),a.promise},ackNotification:function(o){var a=e.defer();return t.post(n.apiPath+"/resources/notifications/"+o+"/ack",Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("k2aService::ackNotification error",e),a.reject("An error occured while trying to /resources/notifications/ack")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("messageService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/messaging",getUnread:function(o){var a=t.defer();return e({url:n.apiPath+"/unread?startIndex=0&limit="+encodeURIComponent(o),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("messageService::getUnread error",e),a.reject("An error occurred while getting messages")}),a.promise},getUnreadCount:function(){var o=t.defer();return e({url:n.apiPath+"/count",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("messageService::getUnreadCount error",e),o.reject("An error occurred while getting messages")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("noteService",["$http","$httpParamSerializer","$q","junoHttp",function(e,t,n,o){var a={apiPath:"../ws/rs/notes",getNotesFrom:function(e,t,r,i){var l=n.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={offset:t,numToReturn:r},o.get(a.apiPath+"/"+encodeURIComponent(e)+"/all",s).then(function(e){l.resolve(e.data)},function(e){console.log("noteService::getNotesFrom error",e),l.reject("An error occurred while fetching notes")}),l.promise},saveNote:function(e,t){var r=n.defer();return o.post(a.apiPath+"/"+encodeURIComponent(e)+"/save",t).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::saveNote error",e),r.reject("An error occurred while saving note")}),r.promise},saveIssueNote:function(t,o){var r=n.defer();return e.post(a.apiPath+"/"+encodeURIComponent(t)+"/saveIssueNote",o).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::saveIssueNote error",e),r.reject("An error occurred while saving issue note")}),r.promise},getCurrentNote:function(t,o){var r=n.defer();return e.post(a.apiPath+"/"+encodeURIComponent(t)+"/getCurrentNote",o).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::getCurrentNote error",e),r.reject("An error occurred while fetching current note")}),r.promise},tmpSave:function(t,o){var r=n.defer();return e.post(a.apiPath+"/"+encodeURIComponent(t)+"/tmpSave",o).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::tmpSave error",e),r.reject("An error occurred while posting tmp save")}),r.promise},getNoteExt:function(t){var o=n.defer();return e.get(a.apiPath+"/getGroupNoteExt/"+encodeURIComponent(t)).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getNoteExt error",e),o.reject("An error occurred while fetching note ext")}),o.promise},getIssueNote:function(e){var t=n.defer();return o.get(a.apiPath+"/getIssueNote/"+encodeURIComponent(e),Juno.Common.ServiceHelper.configHeaders()).then(function(e){t.resolve(e.data)},function(e){console.log("noteService::getIssueNote error",e),t.reject("An error occurred while fetching issue note")}),t.promise},getIssueId:function(t){var o=n.defer();return e.get(a.apiPath+"/getIssueId/"+encodeURIComponent(t)).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getIssueId error",e),o.reject("An error occurred while fetching issue id")}),o.promise},getTicklerNote:function(t){var o=n.defer();return e.get(a.apiPath+"/ticklerGetNote/"+encodeURIComponent(t),{headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getTicklerNote error",e),o.reject("An error occurred while fetching tickler note")}),o.promise},saveTicklerNote:function(t){var o=n.defer();return e({url:a.apiPath+"/ticklerSaveNote",method:"POST",data:JSON.stringify(t),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::saveTicklerNote error",e),o.reject("An error occurred while saving tickler note")}),o.promise},searchIssues:function(t,o,r){var i=n.defer();return e.post(a.apiPath+"/searchIssues?startIndex="+encodeURIComponent(o)+"&itemsToReturn="+encodeURIComponent(r),t).then(function(e){i.resolve(e.data)},function(e){console.log("noteService::searchIssues error",e),i.reject("An error occurred while searching issues")}),i.promise},getIssue:function(t){var o=n.defer();return e.post(a.apiPath+"/getIssueById/"+encodeURIComponent(t)).then(function(e){o.resolve(e.data)},function(e){console.log("noteService::getIssue error",e),o.reject("An error occurred while fetching issue")}),o.promise},setEditingNoteFlag:function(t,o){var r=n.defer();return e.post(a.apiPath+"/setEditingNoteFlag?noteUUID="+encodeURIComponent(t)+"&userId="+encodeURIComponent(o)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::setEditingNoteFlag error",e),r.reject("An error occurred while setting editing note flag")}),r.promise},checkEditNoteNew:function(t,o){var r=n.defer();return e.post(a.apiPath+"/checkEditNoteNew?noteUUID="+encodeURIComponent(t)+"&userId="+encodeURIComponent(o)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::checkEditNoteNew error",e),r.reject("An error occurred while checking edit note new")}),r.promise},removeEditingNoteFlag:function(t,o){var r=n.defer();return e.post(a.apiPath+"/removeEditingNoteFlag?noteUUID="+encodeURIComponent(t)+"&userId="+encodeURIComponent(o)).then(function(e){r.resolve(e.data)},function(e){console.log("noteService::removeEditingNoteFlag error",e),r.reject("An error occurred while removing editing note flag")}),r.promise}};return a}])},function(e,t,n){"use strict";angular.module("Common.Services").service("patientDetailStatusService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/patientDetailStatusService",getStatus:function(o){var a=t.defer();return e.get(n.apiPath+"/getStatus?demographicNo="+encodeURIComponent(o),Juno.Common.ServiceHelper.configHeaders()).then(function(e){a.resolve(e.data)},function(e){console.log("patientDetailStatusService::getStatus error",e),a.reject("An error occurred while fetching status")}),a.promise},validateHC:function(o,a){var r=t.defer();return e.get(n.apiPath+"/validateHC?hin="+encodeURIComponent(o)+"&ver="+encodeURIComponent(a),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("patientDetailStatusService::validateHC error",e),r.reject("An error occurred while fetching health card validation info")}),r.promise},isUniqueHC:function(o,a){var r=t.defer();return e.get(n.apiPath+"/isUniqueHC?hin="+encodeURIComponent(o)+"&demographicNo="+encodeURIComponent(a),Juno.Common.ServiceHelper.configHeaders()).then(function(e){r.resolve(e.data)},function(e){console.log("patientDetailStatusService::isUniqueHC error",e),r.reject("An error occurred while checking health card uniqueness")}),r.promise},getEligibilityInfo:function(n){let o=t.defer();return e.get("../billing/CA/BC/ManageTeleplan.do?demographic="+n+"&method=checkElig&rand="+Math.random()).then(function(e){o.resolve(e.data)},function(e){console.error("Failed to perform eligibility check on demographic, "+n+" With error: "+e),o.reject("Failed to perform eligibility check on demographic, "+n+" With error: "+e)}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("personaService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/persona",getDashboardMenu:function(){var o=t.defer();return e({url:n.apiPath+"/dashboardMenu",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::getDashboardMenu error",e),o.reject("An error occured while getting the dashboard menu from persona")}),o.promise},getNavBar:function(){var o=t.defer();return e({url:n.apiPath+"/navbar",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::getNavBar error",e),o.reject("An error occured while getting navbar from persona")}),o.promise},getAdminNav:function(){var o=t.defer();return e({url:n.apiPath+"/adminNav",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){"SUCCESS"===e.data.status?o.resolve(e.data.body):(console.error("personaService::getAdminNav error",e.data.error),o.reject("An error occured while getting admin nav from persona"))},function(e){console.error("personaService::getAdminNav error",e),o.reject("An error occured while getting admin nav from persona")}),o.promise},getPatientListConfig:function(){var o=t.defer();return e({url:n.apiPath+"/patientList/config",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::getPatientListConfig error",e),o.reject("An error occured while getting getPatientListConfig from persona")}),o.promise},setPatientListConfig:function(o){var a=t.defer();return e({url:n.apiPath+"/patientList/config",method:"POST",data:o,headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::setPatientListConfig error",e),a.reject("An error occured while setting setPatientListConfig from persona")}),a.promise},setCurrentProgram:function(o){var a=t.defer();return e({url:n.apiPath+"/setDefaultProgramInDomain?programId="+encodeURIComponent(o),method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::setCurrentProgram error",e),a.reject("An error occured while setting current")}),a.promise},getDashboardPreferences:function(){var o=t.defer();return e({url:n.apiPath+"/preferences",method:"POST",data:{type:"dashboard"},headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){o.resolve(e.data)},function(e){console.log("personaService::getDashboardPreferences error",e),o.reject("An error occured while getting preferences from persona")}),o.promise},updateDashboardPreferences:function(o){var a=t.defer();return e({url:n.apiPath+"/updatePreferences",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("personaService::updateDashboardPreferences error",e),a.reject("An error occured while updating preferences")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("programService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",getPrograms:function(){var o=t.defer();return e.get(n.apiPath+"program/programList",Juno.Common.ServiceHelper.configHeadersWithCache()).then(function(e){o.resolve(e.data.content)},function(e){console.log("error fetching program list:",e),o.reject("An error occured while fetching program list")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("providerService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs/providerService",getMe:function(){var n=t.defer();return e.get(o.apiPath+"/provider/me",o.configHeaders).then(function(e){n.resolve(e.data)},function(e){console.log("providerService::getMe error",e),n.reject("An error occured while getting user data")}),n.promise},getProvider:function(n){var a=t.defer();return e.get(o.apiPath+"/provider/"+encodeURIComponent(n),o.configHeaders).then(function(e){a.resolve(e.data)},function(e){console.log("providerService::getProvider error",e),a.reject("An error occured while getting user data")}),a.promise},searchProviders:function(n){var a=t.defer();return e({url:o.apiPath+"/providers/search",method:"POST",data:JSON.stringify(n),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data.content)},function(e){console.log("providerService::searchProviders error",e),a.reject("An error occured while fetching provider list")}),a.promise},getSettings:function(){var n=t.defer();return e({url:"../ws/rs/providerSettings/get",method:"GET"}).then(function(e){n.resolve(e.data.content[0])},function(e){console.log("providerService::getSettings error",e),n.reject("An error occured while fetching provider settings")}),n.promise},saveSettings:function(n,o){var a=t.defer();return e({url:"../ws/rs/providerSettings/"+n+"/save",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("providerService::saveSettings error",e),a.reject("An error occured while saving settings")}),a.promise},getActiveTeams:function(){var n=t.defer();return e({url:o.apiPath+"/getActiveTeams",method:"GET"}).then(function(e){n.resolve(e.data.content)},function(e){console.log("providerService::getActiveTeams error",e),n.reject("An error occured while fetching provider teams")}),n.promise},getRecentPatientList:function(){var e=t.defer(),a=Juno.Common.ServiceHelper.configHeaders();return n.get(o.apiPath+"/getRecentDemographicsViewed",a).then(function(t){e.resolve(t.data)},function(t){e.reject("An error occurred while getting RecentDemographicsViewed: "+t)}),e.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").service("providersService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/providers",search:function(o,a,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchText:o,searchMode:a,page:r,perPage:i},t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("providersService::search error",e),l.reject("An error occurred while getting providers data")}),l.promise},getBySecurityRole:function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={role:o},t.get(n.apiPath+"/bySecurityRole",r).then(function(e){a.resolve(e.data)},function(e){console.log("providersService::getBySecurityRole error",e),a.reject("An error occurred while getting providers data")}),a.promise},getByType:function(o){var a=e.defer(),r=Juno.Common.ServiceHelper.configHeaders();return r.params={type:o},t.get(n.apiPath+"/byType",r).then(function(e){a.resolve(e.data)},function(e){console.log("providersService::getByType error",e),a.reject("An error occurred while getting providers data")}),a.promise},getAll:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"/all",a).then(function(e){o.resolve(e.data)},function(e){console.log("providersService::getAll error",e),o.reject("An error occurred while getting providers data")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("reportingService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/reporting/",getDemographicSetList:function(){var o=e.defer(),a=Juno.Common.ServiceHelper.configHeaders();return t.get(n.apiPath+"demographicSets/list",a).then(function(e){o.resolve(e.data)},function(e){console.log("reportingService::demographicSets error",e),o.reject("An error occurred while fetching demographicSets")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("resultsService",[function(){var e={factory:function(e,t){var n={data:{},meta:{},has_results:!1,error_type:null};return util.exists(e)&&!angular.equals(e,{})&&(n.data=e,angular.equals(e,{})||angular.equals(e,[])||(n.has_results=!0)),util.exists(t)?n.meta=t:(n.meta={},n.meta.pagination={page:1,per_page:10,total:0,total_pages:0}),n}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("securityService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/",user:null,getUser:function(){return n.user},setUser:function(e){n.user=e},hasRight:function(o,a,r){var i=t.defer(),l=n.apiPath+"persona/hasRight?objectName="+encodeURIComponent(o)+"&privilege="+encodeURIComponent(a)+"&demographicNo="+encodeURIComponent(r);return e.get(l,n.configHeadersWithCache).then(function(e){i.resolve(e.data.success)},function(e){console.log("securityService::hasRight error",e),i.reject("An error occured while fetching access right")}),i.promise},hasRights:function(o){var a=t.defer();return e({url:n.apiPath+"persona/hasRights",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("securityService::hasRights error",e),a.reject("An error occured while fetching access rights")}),a.promise},isAllowedAccessToPatientRecord:function(o){var a=t.defer();return e({url:n.apiPath+"persona/isAllowedAccessToPatientRecord",method:"POST",data:JSON.stringify({demographicNo:o}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("securityService::isAllowedAccessToPatientRecord error",e),a.reject("An error occured while fetching access rights")}),a.promise},hasOneOfPermissions:function(e){return!0},hasPermission:function(e){return!0}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("staticDataService",[function(){var e={getGenders:function(){var e=[];return e.push({value:"M",label:"Male"}),e.push({value:"F",label:"Female"}),e.push({value:"T",label:"Transgender"}),e.push({value:"O",label:"Other"}),e.push({value:"U",label:"Undefined"}),e},getTitles:function(){var e=[];return e.push({value:"MISS",label:"MISS"}),e.push({value:"MRS",label:"MRS"}),e.push({value:"MS",label:"MS"}),e.push({value:"MR",label:"MR"}),e.push({value:"MSSR",label:"MSSR"}),e.push({value:"DR",label:"DR"}),e.push({value:"PROF",label:"PROF"}),e.push({value:"REEVE",label:"REEVE"}),e.push({value:"REV",label:"REV"}),e.push({value:"RT_HON",label:"RT_HON"}),e.push({value:"SEN",label:"SEN"}),e.push({value:"SGT",label:"SGT"}),e.push({value:"SR",label:"SR"}),e},getCanadaProvinces:function(){var e=[];return e.push({value:"AB",label:"AB-Alberta"}),e.push({value:"BC",label:"BC-British Columbia"}),e.push({value:"MB",label:"MB-Manitoba"}),e.push({value:"NB",label:"NB-New Brunswick"}),e.push({value:"NL",label:"NL-Newfoundland Labrador"}),e.push({value:"NT",label:"NT-Northwest Territory"}),e.push({value:"NS",label:"NS-Nova Scotia"}),e.push({value:"NU",label:"NU-Nunavut"}),e.push({value:"ON",label:"ON-Ontario"}),e.push({value:"PE",label:"PE-Prince Edward Island"}),e.push({value:"QC",label:"QC-Quebec"}),e.push({value:"SK",label:"SK-Saskatchewan"}),e.push({value:"YT",label:"YT-Yukon"}),e},getProvinces:function(){var e=[];return e.push({value:"AB",label:"AB-Alberta"}),e.push({value:"BC",label:"BC-British Columbia"}),e.push({value:"MB",label:"MB-Manitoba"}),e.push({value:"NB",label:"NB-New Brunswick"}),e.push({value:"NL",label:"NL-Newfoundland Labrador"}),e.push({value:"NT",label:"NT-Northwest Territory"}),e.push({value:"NS",label:"NS-Nova Scotia"}),e.push({value:"NU",label:"NU-Nunavut"}),e.push({value:"ON",label:"ON-Ontario"}),e.push({value:"PE",label:"PE-Prince Edward Island"}),e.push({value:"QC",label:"QC-Quebec"}),e.push({value:"SK",label:"SK-Saskatchewan"}),e.push({value:"YT",label:"YT-Yukon"}),e.push({value:"US",label:"US resident"}),e.push({value:"US-AK",label:"US-AK-Alaska"}),e.push({value:"US-AL",label:"US-AL-Alabama"}),e.push({value:"US-AR",label:"US-AR-Arkansas"}),e.push({value:"US-AZ",label:"US-AZ-Arizona"}),e.push({value:"US-CA",label:"US-CA-California"}),e.push({value:"US-CO",label:"US-CO-Colorado"}),e.push({value:"US-CT",label:"US-CT-Connecticut"}),e.push({value:"US-CZ",label:"US-CZ-Canal Zone"}),e.push({value:"US-DC",label:"US-DC-District Of Columbia"}),e.push({value:"US-DE",label:"US-DE-Delaware"}),e.push({value:"US-FL",label:"US-FL-Florida"}),e.push({value:"US-GA",label:"US-GA-Georgia"}),e.push({value:"US-GU",label:"US-GU-Guam"}),e.push({value:"US-HI",label:"US-HI-Hawaii"}),e.push({value:"US-IA",label:"US-IA-Iowa"}),e.push({value:"US-ID",label:"US-ID-Idaho"}),e.push({value:"US-IL",label:"US-IL-Illinois"}),e.push({value:"US-IN",label:"US-IN-Indiana"}),e.push({value:"US-KS",label:"US-KS-Kansas"}),e.push({value:"US-KY",label:"US-KY-Kentucky"}),e.push({value:"US-LA",label:"US-LA-Louisiana"}),e.push({value:"US-MA",label:"US-MA-Massachusetts"}),e.push({value:"US-MD",label:"US-MD-Maryland"}),e.push({value:"US-ME",label:"US-ME-Maine"}),e.push({value:"US-MI",label:"US-MI-Michigan"}),e.push({value:"US-MN",label:"US-MN-Minnesota"}),e.push({value:"US-MO",label:"US-MO-Missouri"}),e.push({value:"US-MS",label:"US-MS-Mississippi"}),e.push({value:"US-MT",label:"US-MT-Montana"}),e.push({value:"US-NC",label:"US-NC-North Carolina"}),e.push({value:"US-ND",label:"US-ND-North Dakota"}),e.push({value:"US-NE",label:"US-NE-Nebraska"}),e.push({value:"US-NH",label:"US-NH-New Hampshire"}),e.push({value:"US-NJ",label:"US-NJ-New Jersey"}),e.push({value:"US-NM",label:"US-NM-New Mexico"}),e.push({value:"US-NU",label:"US-NU-Nunavut"}),e.push({value:"US-NV",label:"US-NV-Nevada"}),e.push({value:"US-NY",label:"US-NY-New York"}),e.push({value:"US-OH",label:"US-OH-Ohio"}),e.push({value:"US-OK",label:"US-OK-Oklahoma"}),e.push({value:"US-OR",label:"US-OR-Oregon"}),e.push({value:"US-PA",label:"US-PA-Pennsylvania"}),e.push({value:"US-PR",label:"US-PR-Puerto Rico"}),e.push({value:"US-RI",label:"US-RI-Rhode Island"}),e.push({value:"US-SC",label:"US-SC-South Carolina"}),e.push({value:"US-SD",label:"US-SD-South Dakota"}),e.push({value:"US-TN",label:"US-TN-Tennessee"}),e.push({value:"US-TX",label:"US-TX-Texas"}),e.push({value:"US-UT",label:"US-UT-Utah"}),e.push({value:"US-VA",label:"US-VA-Virginia"}),e.push({value:"US-VI",label:"US-VI-Virgin Islands"}),e.push({value:"US-VT",label:"US-VT-Vermont"}),e.push({value:"US-WA",label:"US-WA-Washington"}),e.push({value:"US-WI",label:"US-WI-Wisconsin"}),e.push({value:"US-WV",label:"US-WV-West Virginia"}),e.push({value:"US-WY",label:"US-WY-Wyoming"}),e.push({value:"OT",label:"Other"}),e},getCountries:function(){var e=[];return e.push({value:"AF",label:"AFGHANISTAN"}),e.push({value:"AX",label:"ALAND ISLANDS"}),e.push({value:"AL",label:"ALBANIA"}),e.push({value:"DZ",label:"ALGERIA"}),e.push({value:"AS",label:"AMERICAN SAMOA"}),e.push({value:"AD",label:"ANDORRA"}),e.push({value:"AO",label:"ANGOLA"}),e.push({value:"AI",label:"ANGUILLA"}),e.push({value:"AQ",label:"ANTARCTICA"}),e.push({value:"AG",label:"ANTIGUA AND BARBUDA"}),e.push({value:"AR",label:"ARGENTINA"}),e.push({value:"AM",label:"ARMENIA"}),e.push({value:"AW",label:"ARUBA"}),e.push({value:"AU",label:"AUSTRALIA"}),e.push({value:"AT",label:"AUSTRIA"}),e.push({value:"AZ",label:"AZERBAIJAN"}),e.push({value:"BS",label:"BAHAMAS"}),e.push({value:"BH",label:"BAHRAIN"}),e.push({value:"BD",label:"BANGLADESH"}),e.push({value:"BB",label:"BARBADOS"}),e.push({value:"BY",label:"BELARUS"}),e.push({value:"BE",label:"BELGIUM"}),e.push({value:"BZ",label:"BELIZE"}),e.push({value:"BJ",label:"BENIN"}),e.push({value:"BM",label:"BERMUDA"}),e.push({value:"BT",label:"BHUTAN"}),e.push({value:"BO",label:"BOLIVIA"}),e.push({value:"BA",label:"BOSNIA AND HERZEGOVINA"}),e.push({value:"BW",label:"BOTSWANA"}),e.push({value:"BV",label:"BOUVET ISLAND"}),e.push({value:"BR",label:"BRAZIL"}),e.push({value:"IO",label:"BRITISH INDIAN OCEAN TERRITORY"}),e.push({value:"BN",label:"BRUNEI DARUSSALAM"}),e.push({value:"BG",label:"BULGARIA"}),e.push({value:"BF",label:"BURKINA FASO"}),e.push({value:"BI",label:"BURUNDI"}),e.push({value:"KH",label:"CAMBODIA"}),e.push({value:"CM",label:"CAMEROON"}),e.push({value:"CA",label:"CANADA"}),e.push({value:"CV",label:"CAPE VERDE"}),e.push({value:"KY",label:"CAYMAN ISLANDS"}),e.push({value:"CF",label:"CENTRAL AFRICAN REPUBLIC"}),e.push({value:"TD",label:"CHAD"}),e.push({value:"CL",label:"CHILE"}),e.push({value:"CN",label:"CHINA"}),e.push({value:"CX",label:"CHRISTMAS ISLAND"}),e.push({value:"CC",label:"COCOS (KEELING) ISLANDS"}),e.push({value:"CO",label:"COLOMBIA"}),e.push({value:"KM",label:"COMOROS"}),e.push({value:"CG",label:"CONGO"}),e.push({value:"CD",label:"CONGO, THE DEMOCRATIC REPUBLIC OF THE"}),e.push({value:"CK",label:"COOK ISLANDS"}),e.push({value:"CR",label:"COSTA RICA"}),e.push({value:"CI",label:"CTE D IVOIRE"}),e.push({value:"HR",label:"CROATIA"}),e.push({value:"CU",label:"CUBA"}),e.push({value:"CY",label:"CYPRUS"}),e.push({value:"CZ",label:"CZECH REPUBLIC"}),e.push({value:"DK",label:"DENMARK"}),e.push({value:"DJ",label:"DJIBOUTI"}),e.push({value:"DM",label:"DOMINICA"}),e.push({value:"DO",label:"DOMINICAN REPUBLIC"}),e.push({value:"EC",label:"ECUADOR"}),e.push({value:"EG",label:"EGYPT"}),e.push({value:"SV",label:"EL SALVADOR"}),e.push({value:"GQ",label:"EQUATORIAL GUINEA"}),e.push({value:"ER",label:"ERITREA"}),e.push({value:"EE",label:"ESTONIA"}),e.push({value:"ET",label:"ETHIOPIA"}),e.push({value:"FK",label:"FALKLAND ISLANDS (MALVINAS)"}),e.push({value:"FO",label:"FAROE ISLANDS"}),e.push({value:"FJ",label:"FIJI"}),e.push({value:"FI",label:"FINLAND"}),e.push({value:"FR",label:"FRANCE"}),e.push({value:"GF",label:"FRENCH GUIANA"}),e.push({value:"PF",label:"FRENCH POLYNESIA"}),e.push({value:"TF",label:"FRENCH SOUTHERN TERRITORIES"}),e.push({value:"GA",label:"GABON"}),e.push({value:"GM",label:"GAMBIA"}),e.push({value:"GE",label:"GEORGIA"}),e.push({value:"DE",label:"GERMANY"}),e.push({value:"GH",label:"GHANA"}),e.push({value:"GI",label:"GIBRALTAR"}),e.push({value:"GR",label:"GREECE"}),e.push({value:"GL",label:"GREENLAND"}),e.push({value:"GD",label:"GRENADA"}),e.push({value:"GP",label:"GUADELOUPE"}),e.push({value:"GU",label:"GUAM"}),e.push({value:"GT",label:"GUATEMALA"}),e.push({value:"GG",label:"GUERNSEY"}),e.push({value:"GN",label:"GUINEA"}),e.push({value:"GW",label:"GUINEA-BISSAU"}),e.push({value:"GY",label:"GUYANA"}),e.push({value:"HT",label:"HAITI"}),e.push({value:"HM",label:"HEARD ISLAND AND MCDONALD ISLANDS"}),e.push({value:"VA",label:"HOLY SEE (VATICAN CITY STATE)"}),e.push({value:"HN",label:"HONDURAS"}),e.push({value:"HK",label:"HONG KONG"}),e.push({value:"HU",label:"HUNGARY"}),e.push({value:"IS",label:"ICELAND"}),e.push({value:"IN",label:"INDIA"}),e.push({value:"ID",label:"INDONESIA"}),e.push({value:"IR",label:"IRAN, ISLAMIC REPUBLIC OF"}),e.push({value:"IQ",label:"IRAQ"}),e.push({value:"IE",label:"IRELAND"}),e.push({value:"IM",label:"ISLE OF MAN"}),e.push({value:"IL",label:"ISRAEL"}),e.push({value:"IT",label:"ITALY"}),e.push({value:"JM",label:"JAMAICA"}),e.push({value:"JP",label:"JAPAN"}),e.push({value:"JE",label:"JERSEY"}),e.push({value:"JO",label:"JORDAN"}),e.push({value:"KZ",label:"KAZAKHSTAN"}),e.push({value:"KE",label:"KENYA"}),e.push({value:"KI",label:"KIRIBATI"}),e.push({value:"KP",label:"KOREA, DEMOCRATIC PEOPLES REPUBLIC OF"}),e.push({value:"KR",label:"KOREA, REPUBLIC OF"}),e.push({value:"KW",label:"KUWAIT"}),e.push({value:"KG",label:"KYRGYZSTAN"}),e.push({value:"LA",label:"LAO PEOPLES DEMOCRATIC REPUBLIC"}),e.push({value:"LV",label:"LATVIA"}),e.push({value:"LB",label:"LEBANON"}),e.push({value:"LS",label:"LESOTHO"}),e.push({value:"LR",label:"LIBERIA"}),e.push({value:"LY",label:"LIBYAN ARAB JAMAHIRIYA"}),e.push({value:"LI",label:"LIECHTENSTEIN"}),e.push({value:"LT",label:"LITHUANIA"}),e.push({value:"LU",label:"LUXEMBOURG"}),e.push({value:"MO",label:"MACAO"}),e.push({value:"MK",label:"MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF"}),e.push({value:"MG",label:"MADAGASCAR"}),e.push({value:"MW",label:"MALAWI"}),e.push({value:"MY",label:"MALAYSIA"}),e.push({value:"MV",label:"MALDIVES"}),e.push({value:"ML",label:"MALI"}),e.push({value:"MT",label:"MALTA"}),e.push({value:"MH",label:"MARSHALL ISLANDS"}),e.push({value:"MQ",label:"MARTINIQUE"}),e.push({value:"MR",label:"MAURITANIA"}),e.push({value:"MU",label:"MAURITIUS"}),e.push({value:"YT",label:"MAYOTTE"}),e.push({value:"MX",label:"MEXICO"}),e.push({value:"FM",label:"MICRONESIA, FEDERATED STATES OF"}),e.push({value:"MD",label:"MOLDOVA"}),e.push({value:"MC",label:"MONACO"}),e.push({value:"MN",label:"MONGOLIA"}),e.push({value:"ME",label:"MONTENEGRO"}),e.push({value:"MS",label:"MONTSERRAT"}),e.push({value:"MA",label:"MOROCCO"}),e.push({value:"MZ",label:"MOZAMBIQUE"}),e.push({value:"MM",label:"MYANMAR"}),e.push({value:"NA",label:"NAMIBIA"}),e.push({value:"NR",label:"NAURU"}),e.push({value:"NP",label:"NEPAL"}),e.push({value:"NL",label:"NETHERLANDS"}),e.push({value:"AN",label:"NETHERLANDS ANTILLES"}),e.push({value:"NC",label:"NEW CALEDONIA"}),e.push({value:"NZ",label:"NEW ZEALAND"}),e.push({value:"NI",label:"NICARAGUA"}),e.push({value:"NE",label:"NIGER"}),e.push({value:"NG",label:"NIGERIA"}),e.push({value:"NU",label:"NIUE"}),e.push({value:"NF",label:"NORFOLK ISLAND"}),e.push({value:"MP",label:"NORTHERN MARIANA ISLANDS"}),e.push({value:"NO",label:"NORWAY"}),e.push({value:"OM",label:"OMAN"}),e.push({value:"PK",label:"PAKISTAN"}),e.push({value:"PW",label:"PALAU"}),e.push({value:"PS",label:"PALESTINIAN TERRITORY, OCCUPIED"}),e.push({value:"PA",label:"PANAMA"}),e.push({value:"PG",label:"PAPUA NEW GUINEA"}),e.push({value:"PY",label:"PARAGUAY"}),e.push({value:"PE",label:"PERU"}),e.push({value:"PH",label:"PHILIPPINES"}),e.push({value:"PN",label:"PITCAIRN"}),e.push({value:"PL",label:"POLAND"}),e.push({value:"PT",label:"PORTUGAL"}),e.push({value:"PR",label:"PUERTO RICO"}),e.push({value:"QA",label:"QATAR"}),e.push({value:"RE",label:"RUNION"}),e.push({value:"RO",label:"ROMANIA"}),e.push({value:"RU",label:"RUSSIAN FEDERATION"}),e.push({value:"RW",label:"RWANDA"}),e.push({value:"BL",label:"SAINT BARTHLEMY"}),e.push({value:"SH",label:"SAINT HELENA"}),e.push({value:"KN",label:"SAINT KITTS AND NEVIS"}),e.push({value:"LC",label:"SAINT LUCIA"}),e.push({value:"MF",label:"SAINT MARTIN"}),e.push({value:"PM",label:"SAINT PIERRE AND MIQUELON"}),e.push({value:"VC",label:"SAINT VINCENT AND THE GRENADINES"}),e.push({value:"WS",label:"SAMOA"}),e.push({value:"SM",label:"SAN MARINO"}),e.push({value:"ST",label:"SAO TOME AND PRINCIPE"}),e.push({value:"SA",label:"SAUDI ARABIA"}),e.push({value:"SN",label:"SENEGAL"}),e.push({value:"RS",label:"SERBIA"}),e.push({value:"SC",label:"SEYCHELLES"}),e.push({value:"SL",label:"SIERRA LEONE"}),e.push({value:"SG",label:"SINGAPORE"}),e.push({value:"SK",label:"SLOVAKIA"}),e.push({value:"SI",label:"SLOVENIA"}),e.push({value:"SB",label:"SOLOMON ISLANDS"}),e.push({value:"SO",label:"SOMALIA"}),e.push({value:"ZA",label:"SOUTH AFRICA"}),e.push({value:"GS",label:"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS"}),e.push({value:"ES",label:"SPAIN"}),e.push({value:"LK",label:"SRI LANKA"}),e.push({value:"SD",label:"SUDAN"}),e.push({value:"SR",label:"SURINAME"}),e.push({value:"SJ",label:"SVALBARD AND JAN MAYEN"}),e.push({value:"SZ",label:"SWAZILAND"}),e.push({value:"SE",label:"SWEDEN"}),e.push({value:"CH",label:"SWITZERLAND"}),e.push({value:"SY",label:"SYRIAN ARAB REPUBLIC"}),e.push({value:"TW",label:"TAIWAN, PROVINCE OF CHINA"}),e.push({value:"TJ",label:"TAJIKISTAN"}),e.push({value:"TZ",label:"TANZANIA, UNITED REPUBLIC OF"}),e.push({value:"TH",label:"THAILAND"}),e.push({value:"TL",label:"TIMOR-LESTE"}),e.push({value:"TG",label:"TOGO"}),e.push({value:"TK",label:"TOKELAU"}),e.push({value:"TO",label:"TONGA"}),e.push({value:"TT",label:"TRINIDAD AND TOBAGO"}),e.push({value:"TN",label:"TUNISIA"}),e.push({value:"TR",label:"TURKEY"}),e.push({value:"TM",label:"TURKMENISTAN"}),e.push({value:"TC",label:"TURKS AND CAICOS ISLANDS"}),e.push({value:"TV",label:"TUVALU"}),e.push({value:"UG",label:"UGANDA"}),e.push({value:"UA",label:"UKRAINE"}),e.push({value:"AE",label:"UNITED ARAB EMIRATES"}),e.push({value:"GB",label:"UNITED KINGDOM"}),e.push({value:"US",label:"UNITED STATES"}),e.push({value:"UM",label:"UNITED STATES MINOR OUTLYING ISLANDS"}),e.push({value:"UY",label:"URUGUAY"}),e.push({value:"UZ",label:"UZBEKISTAN"}),e.push({value:"VU",label:"VANUATU"}),e.push({value:"VA",label:"VATICAN CITY STATE"}),e.push({value:"VE",label:"VENEZUELA"}),e.push({value:"VN",label:"VIET NAM"}),e.push({value:"VG",label:"VIRGIN ISLANDS, BRITISH"}),e.push({value:"VI",label:"VIRGIN ISLANDS, U.S."}),e.push({value:"WF",label:"WALLIS AND FUTUNA"}),e.push({value:"EH",label:"WESTERN SAHARA"}),e.push({value:"YE",label:"YEMEN"}),e.push({value:"ZM",label:"ZAMBIA"}),e.push({value:"ZW",label:"ZIMBABWE"}),e},getEngFre:function(){var e=[];return e.push({value:"English",label:"English"}),e.push({value:"French",label:"French"}),e.push({value:"Other",label:"Other"}),e},getSpokenLanguages:function(){var e=[];return e.push({value:"English",label:"English"}),e.push({value:"French",label:"French"}),e.push({value:"Abkhazian",label:"Abkhazian"}),e.push({value:"Achinese",label:"Achinese"}),e.push({value:"Acoli",label:"Acoli"}),e.push({value:"Adangme",label:"Adangme"}),e.push({value:"Adyghe",label:"Adyghe"}),e.push({value:"Afar",label:"Afar"}),e.push({value:"Afrihili",label:"Afrihili"}),e.push({value:"Afrikaans",label:"Afrikaans"}),e.push({value:"Afro-Asiatic (Other)",label:"Afro-Asiatic"}),e.push({value:"Ainu",label:"Ainu"}),e.push({value:"Akan",label:"Akan"}),e.push({value:"Akkadian",label:"Akkadian"}),e.push({value:"Albanian",label:"Albanian"}),e.push({value:"Aleut",label:"Aleut"}),e.push({value:"Algonquian Languages",label:"Algonquian Languages"}),e.push({value:"Altaic (Other)",label:"Altaic"}),e.push({value:"Amharic",label:"Amharic"}),e.push({value:"Angika",label:"Angika"}),e.push({value:"Apache Languages",label:"Apache Languages"}),e.push({value:"Arabic",label:"Arabic"}),e.push({value:"Aramaic",label:"Aramaic"}),e.push({value:"Arapaho",label:"Arapaho"}),e.push({value:"Araucanian",label:"Araucanian"}),e.push({value:"Arawak",label:"Arawak"}),e.push({value:"Argonese",label:"Argonese"}),e.push({value:"Armenian",label:"Armenian"}),e.push({value:"Aromanian",label:"Aromanian"}),e.push({value:"Artificial (Other)",label:"Artificial"}),e.push({value:"Assamese",label:"Assamese"}),e.push({value:"Asturian",label:"Asturian"}),e.push({value:"Athapascan Languages",label:"Athapascan Languages"}),e.push({value:"Australian Languages",label:"Australian Languages"}),e.push({value:"Austronesian (Other)",label:"Austronesian"}),e.push({value:"Avaric",label:"Avaric"}),e.push({value:"Avestan",label:"Avestan"}),e.push({value:"Awadhi",label:"Awadhi"}),e.push({value:"Aymara",label:"Aymara"}),e.push({value:"Azerbaijani",label:"Azerbaijani"}),e.push({value:"Balinese",label:"Balinese"}),e.push({value:"Baltic (Other)",label:"Baltic"}),e.push({value:"Baluchi",label:"Baluchi"}),e.push({value:"Bambara",label:"Bambara"}),e.push({value:"Bamileke Languages",label:"Bamileke Languages"}),e.push({value:"Banda",label:"Banda"}),e.push({value:"Bantu (Other)",label:"Bantu"}),e.push({value:"Basa",label:"Basa"}),e.push({value:"Bashkir",label:"Bashkir"}),e.push({value:"Basque",label:"Basque"}),e.push({value:"Batak (Indonesia)",label:"Batak (Indonesia)"}),e.push({value:"Beja",label:"Beja"}),e.push({value:"Belarusian",label:"Belarusian"}),e.push({value:"Bemba",label:"Bemba"}),e.push({value:"Bengali",label:"Bengali"}),e.push({value:"Berber (Other)",label:"Berber"}),e.push({value:"Bhojpuri",label:"Bhojpuri"}),e.push({value:"Bihari",label:"Bihari"}),e.push({value:"Bikol",label:"Bikol"}),e.push({value:"Bini",label:"Bini"}),e.push({value:"Bislama",label:"Bislama"}),e.push({value:"Blin",label:"Blin"}),e.push({value:"Bokmal, Norwegian",label:"Bokmal, Norwegian"}),e.push({value:"Bosnian",label:"Bosnian"}),e.push({value:"Braj",label:"Braj"}),e.push({value:"Breton",label:"Breton"}),e.push({value:"Buginese",label:"Buginese"}),e.push({value:"Bulgarian",label:"Bulgarian"}),e.push({value:"Buriat",label:"Buriat"}),e.push({value:"Burmese",label:"Burmese"}),e.push({value:"Caddo",label:"Caddo"}),e.push({value:"Cantonese",label:"Cantonese"}),e.push({value:"Carib",label:"Carib"}),e.push({value:"Catalan",label:"Catalan"}),e.push({value:"Caucasian (Other)",label:"Caucasian"}),e.push({value:"Cebuano",label:"Cebuano"}),e.push({value:"Celtic (Other)",label:"Celtic"}),e.push({value:"Central American Indian (Other)",label:"Central American Indian"}),e.push({value:"Chagatai",label:"Chagatai"}),e.push({value:"Chamic Languages",label:"Chamic Languages"}),e.push({value:"Chamorro",label:"Chamorro"}),e.push({value:"Chechen",label:"Chechen"}),e.push({value:"Cherokee",label:"Cherokee"}),e.push({value:"Cheyenne",label:"Cheyenne"}),e.push({value:"Chibcha",label:"Chibcha"}),e.push({value:"Chichewa",label:"Chichewa"}),e.push({value:"Chinese",label:"Chinese"}),e.push({value:"Chinook Jargon",label:"Chinook Jargon"}),e.push({value:"Chipewyan",label:"Chipewyan"}),e.push({value:"Choctaw",label:"Choctaw"}),e.push({value:"Chuukese",label:"Chuukese"}),e.push({value:"Chuvash",label:"Chuvash"}),e.push({value:"Classical Nepal Bhasa",label:"Classical Nepal Bhasa"}),e.push({value:"Coptic",label:"Coptic"}),e.push({value:"Cornish",label:"Cornish"}),e.push({value:"Corsican",label:"Corsican"}),e.push({value:"Cree",label:"Cree"}),e.push({value:"Creek",label:"Creek"}),e.push({value:"Creoles And Pidgins (Other)",label:"Creoles & Pidgins"}),e.push({value:"Creoles And Pidgins, English-Based (Other)",label:"Creoles & Pidgins, ENG-Based"}),e.push({value:"Creoles And Pidgins, French-Based (Other)",label:"Creoles & Pidgins, FRE-Based"}),e.push({value:"Creoles And Pidgins, Portuguese-Based (Other)",label:"Creoles & Pidgins, POR-Based"}),e.push({value:"Crimean Tatar",label:"Crimean Tatar"}),e.push({value:"Croatian",label:"Croatian"}),e.push({value:"Cushitic (Other)",label:"Cushitic"}),e.push({value:"Czech",label:"Czech"}),e.push({value:"Dakota",label:"Dakota"}),e.push({value:"Danish",label:"Danish"}),e.push({value:"Dargwa",label:"Dargwa"}),e.push({value:"Dayak",label:"Dayak"}),e.push({value:"Delaware",label:"Delaware"}),e.push({value:"Dhivehi",label:"Dhivehi"}),e.push({value:"Dinka",label:"Dinka"}),e.push({value:"Dogri",label:"Dogri"}),e.push({value:"Dogrib",label:"Dogrib"}),e.push({value:"Dravidian (Other)",label:"Dravidian"}),e.push({value:"Duala",label:"Duala"}),e.push({value:"Dutch",label:"Dutch"}),e.push({value:"Dyula",label:"Dyula"}),e.push({value:"Dzongkha",label:"Dzongkha"}),e.push({value:"Eastern Frisian",label:"Eastern Frisian"}),e.push({value:"Efik",label:"Efik"}),e.push({value:"Egyptian (Ancient)",label:"Egyptian (Ancient)"}),e.push({value:"Ekajuk",label:"Ekajuk"}),e.push({value:"Elamite",label:"Elamite"}),e.push({value:"Erzya",label:"Erzya"}),e.push({value:"Esperanto",label:"Esperanto"}),e.push({value:"Estonian",label:"Estonian"}),e.push({value:"Ewe",label:"Ewe"}),e.push({value:"Ewondo",label:"Ewondo"}),e.push({value:"Fang",label:"Fang"}),e.push({value:"Fanti",label:"Fanti"}),e.push({value:"Faroese",label:"Faroese"}),e.push({value:"Fijian",label:"Fijian"}),e.push({value:"Filipino; Pilipino",label:"Filipino; Pilipino"}),e.push({value:"Finnish",label:"Finnish"}),e.push({value:"Finno-Ugrian (Other)",label:"Finno-Ugrian"}),e.push({value:"Fon",label:"Fon"}),e.push({value:"Friulian",label:"Friulian"}),e.push({value:"Fulah",label:"Fulah"}),e.push({value:"Ga",label:"Ga"}),e.push({value:"Gaelic",label:"Gaelic"}),e.push({value:"Gallegan",label:"Gallegan"}),e.push({value:"Ganda",label:"Ganda"}),e.push({value:"Gayo",label:"Gayo"}),e.push({value:"Gbaya",label:"Gbaya"}),e.push({value:"Geez",label:"Geez"}),e.push({value:"Georgian",label:"Georgian"}),e.push({value:"German",label:"German"}),e.push({value:"Germanic (Other)",label:"Germanic"}),e.push({value:"Gikuyu",label:"Gikuyu"}),e.push({value:"Gilbertese",label:"Gilbertese"}),e.push({value:"Gondi",label:"Gondi"}),e.push({value:"Gorontalo",label:"Gorontalo"}),e.push({value:"Gothic",label:"Gothic"}),e.push({value:"Grebo",label:"Grebo"}),e.push({value:"Greek, Modern (1453-)",label:"Greek, Modern (1453-)"}),e.push({value:"Guarani",label:"Guarani"}),e.push({value:"Gujarati",label:"Gujarati"}),e.push({value:"Gwich'in",label:"Gwich'in"}),e.push({value:"Haida",label:"Haida"}),e.push({value:"Haitian Creole",label:"Haitian Creole"}),e.push({value:"Hausa",label:"Hausa"}),e.push({value:"Hawaiian",label:"Hawaiian"}),e.push({value:"Hebrew",label:"Hebrew"}),e.push({value:"Herero",label:"Herero"}),e.push({value:"Hiligaynon",label:"Hiligaynon"}),e.push({value:"Himachali",label:"Himachali"}),e.push({value:"Hindi",label:"Hindi"}),e.push({value:"Hiri Motu",label:"Hiri Motu"}),e.push({value:"Hittite",label:"Hittite"}),e.push({value:"Hmong",label:"Hmong"}),e.push({value:"Hungarian",label:"Hungarian"}),e.push({value:"Hupa",label:"Hupa"}),e.push({value:"Iban",label:"Iban"}),e.push({value:"Icelandic",label:"Icelandic"}),e.push({value:"Ido",label:"Ido"}),e.push({value:"Igbo",label:"Igbo"}),e.push({value:"Ijo",label:"Ijo"}),e.push({value:"Iloko",label:"Iloko"}),e.push({value:"Inari Sami",label:"Inari Sami"}),e.push({value:"Indic (Other)",label:"Indic"}),e.push({value:"Indo-European (Other)",label:"Indo-European"}),e.push({value:"Indonesian",label:"Indonesian"}),e.push({value:"Ingush",label:"Ingush"}),e.push({value:"Interlingua (International Auxiliary Lang. Assoc.)",label:"Interlingua (IALA)"}),e.push({value:"Interlingue",label:"Interlingue"}),e.push({value:"Inuktitut",label:"Inuktitut"}),e.push({value:"Inupiaq",label:"Inupiaq"}),e.push({value:"Iranian (Other)",label:"Iranian"}),e.push({value:"Irish",label:"Irish"}),e.push({value:"Iroquoian Languages",label:"Iroquoian Languages"}),e.push({value:"Italian",label:"Italian"}),e.push({value:"Japanese",label:"Japanese"}),e.push({value:"Javanese",label:"Javanese"}),e.push({value:"Judeo-Arabic",label:"Judeo-Arabic"}),e.push({value:"Judeo-Persian",label:"Judeo-Persian"}),e.push({value:"Kabardian",label:"Kabardian"}),e.push({value:"Kabyle",label:"Kabyle"}),e.push({value:"Kachin",label:"Kachin"}),e.push({value:"Kalaallisut",label:"Kalaallisut"}),e.push({value:"Kalmyk",label:"Kalmyk"}),e.push({value:"Kamba",label:"Kamba"}),e.push({value:"Kannada",label:"Kannada"}),e.push({value:"Kanuri",label:"Kanuri"}),e.push({value:"Kara-Kalpak",label:"Kara-Kalpak"}),e.push({value:"Karachay-Balkar",label:"Karachay-Balkar"}),e.push({value:"Karelian",label:"Karelian"}),e.push({value:"Karen",label:"Karen"}),e.push({value:"Kashmiri",label:"Kashmiri"}),e.push({value:"Kashubian",label:"Kashubian"}),e.push({value:"Kawi",label:"Kawi"}),e.push({value:"Kazakh",label:"Kazakh"}),e.push({value:"Khasi",label:"Khasi"}),e.push({value:"Khmer",label:"Khmer"}),e.push({value:"Khoisan (Other)",label:"Khoisan"}),e.push({value:"Khotanese",label:"Khotanese"}),e.push({value:"Kimbundu",label:"Kimbundu"}),e.push({value:"Kinyarwanda",label:"Kinyarwanda"}),e.push({value:"Kirghiz",label:"Kirghiz"}),e.push({value:"Klingon",label:"Klingon"}),e.push({value:"Komi",label:"Komi"}),e.push({value:"Kongo",label:"Kongo"}),e.push({value:"Konkani",label:"Konkani"}),e.push({value:"Korean",label:"Korean"}),e.push({value:"Kosraean",label:"Kosraean"}),e.push({value:"Kpelle",label:"Kpelle"}),e.push({value:"Kru",label:"Kru"}),e.push({value:"Kumyk",label:"Kumyk"}),e.push({value:"Kurdish",label:"Kurdish"}),e.push({value:"Kurukh",label:"Kurukh"}),e.push({value:"Kutenai",label:"Kutenai"}),e.push({value:"Kwanyama",label:"Kwanyama"}),e.push({value:"Ladino",label:"Ladino"}),e.push({value:"Lahnda",label:"Lahnda"}),e.push({value:"Lamba",label:"Lamba"}),e.push({value:"Lao",label:"Lao"}),e.push({value:"Latin",label:"Latin"}),e.push({value:"Latvian",label:"Latvian"}),e.push({value:"Lezghian",label:"Lezghian"}),e.push({value:"Limburgish",label:"Limburgish"}),e.push({value:"Lingala",label:"Lingala"}),e.push({value:"Lithuanian",label:"Lithuanian"}),e.push({value:"Lojban",label:"Lojban"}),e.push({value:"Low German",label:"Low German"}),e.push({value:"Lower Sorbian",label:"Lower Sorbian"}),e.push({value:"Lozi",label:"Lozi"}),e.push({value:"Luba-Katanga",label:"Luba-Katanga"}),e.push({value:"Luba-Lulua",label:"Luba-Lulua"}),e.push({value:"Luiseno",label:"Luiseno"}),e.push({value:"Lule Sami",label:"Lule Sami"}),e.push({value:"Lunda",label:"Lunda"}),e.push({value:"Luo (Kenya And Tanzania)",label:"Luo (Kenya & Tanzania)"}),e.push({value:"Lushai",label:"Lushai"}),e.push({value:"Luxembourgish",label:"Luxembourgish"}),e.push({value:"Macedonian",label:"Macedonian"}),e.push({value:"Madurese",label:"Madurese"}),e.push({value:"Magahi",label:"Magahi"}),e.push({value:"Maithili",label:"Maithili"}),e.push({value:"Makasar",label:"Makasar"}),e.push({value:"Malagasy",label:"Malagasy"}),e.push({value:"Malay",label:"Malay"}),e.push({value:"Malayalam",label:"Malayalam"}),e.push({value:"Maltese",label:"Maltese"}),e.push({value:"Manchu",label:"Manchu"}),e.push({value:"Mandar",label:"Mandar"}),e.push({value:"Mandarin",label:"Mandarin"}),e.push({value:"Mandingo",label:"Mandingo"}),e.push({value:"Manipuri",label:"Manipuri"}),e.push({value:"Manobo Languages",label:"Manobo Languages"}),e.push({value:"Manx",label:"Manx"}),e.push({value:"Maori",label:"Maori"}),e.push({value:"Marathi",label:"Marathi"}),e.push({value:"Mari",label:"Mari"}),e.push({value:"Marshall",label:"Marshall"}),e.push({value:"Marwari",label:"Marwari"}),e.push({value:"Masai",label:"Masai"}),e.push({value:"Mayan Languages",label:"Mayan Languages"}),e.push({value:"Mende",label:"Mende"}),e.push({value:"Micmac",label:"Micmac"}),e.push({value:"Minangkabau",label:"Minangkabau"}),e.push({value:"Mirandese",label:"Mirandese"}),e.push({value:"Miscellaneous Languages",label:"Miscellaneous Languages"}),e.push({value:"Mohawk",label:"Mohawk"}),e.push({value:"Moksha",label:"Moksha"}),e.push({value:"Moldavian",label:"Moldavian"}),e.push({value:"Mon-Khmer (Other)",label:"Mon-Khmer"}),e.push({value:"Mongo",label:"Mongo"}),e.push({value:"Mongolian",label:"Mongolian"}),e.push({value:"Mossi",label:"Mossi"}),e.push({value:"Multiple Languages",label:"Multiple Languages"}),e.push({value:"Munda Languages",label:"Munda Languages"}),e.push({value:"N'Ko",label:"N'Ko"}),e.push({value:"Nahuatl",label:"Nahuatl"}),e.push({value:"Nauru",label:"Nauru"}),e.push({value:"Navajo",label:"Navajo"}),e.push({value:"Ndonga",label:"Ndonga"}),e.push({value:"Neapolitan",label:"Neapolitan"}),e.push({value:"Nepal Bhasa",label:"Nepal Bhasa"}),e.push({value:"Nepali",label:"Nepali"}),e.push({value:"Nias",label:"Nias"}),e.push({value:"Niger-Kordofanian (Other)",label:"Niger-Kordofanian"}),e.push({value:"Nilo-Saharan (Other)",label:"Nilo-Saharan"}),e.push({value:"Niuean",label:"Niuean"}),e.push({value:"Nogai",label:"Nogai"}),e.push({value:"Norse, Old",label:"Norse, Old"}),e.push({value:"North American Indian (Other)",label:"North American Indian"}),e.push({value:"North Ndebele",label:"North Ndebele"}),e.push({value:"Northern Frisian",label:"Northern Frisian"}),e.push({value:"Northern Sami",label:"Northern Sami"}),e.push({value:"Northern Sotho",label:"Northern Sotho"}),e.push({value:"Norwegian",label:"Norwegian"}),e.push({value:"Norwegian Nynorsk",label:"Norwegian Nynorsk"}),e.push({value:"Nubian Languages",label:"Nubian Languages"}),e.push({value:"Nyamwezi",label:"Nyamwezi"}),e.push({value:"Nyankole",label:"Nyankole"}),e.push({value:"Nyoro",label:"Nyoro"}),e.push({value:"Nzima",label:"Nzima"}),e.push({value:"Occitan (Post 1500)",label:"Occitan (Post 1500)"}),e.push({value:"Ojibwa",label:"Ojibwa"}),e.push({value:"Old Church Slavonic",label:"Old Church Slavonic"}),e.push({value:"Oriya",label:"Oriya"}),e.push({value:"Oromo",label:"Oromo"}),e.push({value:"Osage",label:"Osage"}),e.push({value:"Ossetic",label:"Ossetic"}),e.push({value:"Otomian Languages",label:"Otomian Languages"}),e.push({value:"Pahlavi",label:"Pahlavi"}),e.push({value:"Palauan",label:"Palauan"}),e.push({value:"Pali",label:"Pali"}),e.push({value:"Pampanga",label:"Pampanga"}),e.push({value:"Pangasinan",label:"Pangasinan"}),e.push({value:"Papiamento",label:"Papiamento"}),e.push({value:"Papuan (Other)",label:"Papuan"}),e.push({value:"Persian",label:"Persian"}),e.push({value:"Philippine (Other)",label:"Philippine"}),e.push({value:"Phoenician",label:"Phoenician"}),e.push({value:"Pohnpeian",label:"Pohnpeian"}),e.push({value:"Polish",label:"Polish"}),e.push({value:"Portuguese",label:"Portuguese"}),e.push({value:"Prakrit Languages",label:"Prakrit Languages"}),e.push({value:"Punjabi",label:"Punjabi"}),e.push({value:"Pushto",label:"Pushto"}),e.push({value:"Quechua",label:"Quechua"}),e.push({value:"Raeto-Romance",label:"Raeto-Romance"}),e.push({value:"Rajasthani",label:"Rajasthani"}),e.push({value:"Rapanui",label:"Rapanui"}),e.push({value:"Rarotongan",label:"Rarotongan"}),e.push({value:"Romance (Other)",label:"Romance"}),e.push({value:"Romanian",label:"Romanian"}),e.push({value:"Romany",label:"Romany"}),e.push({value:"Rundi",label:"Rundi"}),e.push({value:"Russian",label:"Russian"}),e.push({value:"Salishan Languages",label:"Salishan Languages"}),e.push({value:"Samaritan Aramaic",label:"Samaritan Aramaic"}),e.push({value:"Sami Languages",label:"Sami Languages"}),e.push({value:"Samoan",label:"Samoan"}),e.push({value:"Sandawe",label:"Sandawe"}),e.push({value:"Sango",label:"Sango"}),e.push({value:"Sanskrit",label:"Sanskrit"}),e.push({value:"Santali",label:"Santali"}),e.push({value:"Sardinian",label:"Sardinian"}),e.push({value:"Sasak",label:"Sasak"}),e.push({value:"Scots",label:"Scots"}),e.push({value:"Selkup",label:"Selkup"}),e.push({value:"Semitic (Other)",label:"Semitic"}),e.push({value:"Serbian",label:"Serbian"}),e.push({value:"Serer",label:"Serer"}),e.push({value:"Shan",label:"Shan"}),e.push({value:"Shona",label:"Shona"}),e.push({value:"Sichuan Yi",label:"Sichuan Yi"}),e.push({value:"Sicilian",label:"Sicilian"}),e.push({value:"Sidamo",label:"Sidamo"}),e.push({value:"Sign Languages",label:"Sign Languages"}),e.push({value:"Siksika",label:"Siksika"}),e.push({value:"Sindhi",label:"Sindhi"}),e.push({value:"Sinhalese",label:"Sinhalese"}),e.push({value:"Sino-Tibetan (Other)",label:"Sino-Tibetan"}),e.push({value:"Siouan Languages",label:"Siouan Languages"}),e.push({value:"Skolt Sami",label:"Skolt Sami"}),e.push({value:"Slave (Athapascan)",label:"Slave (Athapascan)"}),e.push({value:"Slavic (Other)",label:"Slavic"}),e.push({value:"Slovak",label:"Slovak"}),e.push({value:"Slovenian",label:"Slovenian"}),e.push({value:"Sogdian",label:"Sogdian"}),e.push({value:"Somali",label:"Somali"}),e.push({value:"Songhai",label:"Songhai"}),e.push({value:"Soninke",label:"Soninke"}),e.push({value:"Sorbian Languages",label:"Sorbian Languages"}),e.push({value:"Sotho, Southern",label:"Sotho, Southern"}),e.push({value:"South American Indian (Other)",label:"South American Indian"}),e.push({value:"South Ndebele",label:"South Ndebele"}),e.push({value:"Southern Altai",label:"Southern Altai"}),e.push({value:"Southern Sami",label:"Southern Sami"}),e.push({value:"Spanish; Castilian",label:"Spanish; Castilian"}),e.push({value:"Sranan Togo",label:"Sranan Togo"}),e.push({value:"Sukuma",label:"Sukuma"}),e.push({value:"Sumerian",label:"Sumerian"}),e.push({value:"Sundanese",label:"Sundanese"}),e.push({value:"Susu",label:"Susu"}),e.push({value:"Swahili",label:"Swahili"}),e.push({value:"Swati",label:"Swati"}),e.push({value:"Swedish",label:"Swedish"}),e.push({value:"Swiss German",label:"Swiss German"}),e.push({value:"Syriac",label:"Syriac"}),e.push({value:"Tagalog",label:"Tagalog"}),e.push({value:"Tahitian",label:"Tahitian"}),e.push({value:"Tai (Other)",label:"Tai"}),e.push({value:"Tajik",label:"Tajik"}),e.push({value:"Tamashek",label:"Tamashek"}),e.push({value:"Tamil",label:"Tamil"}),e.push({value:"Tatar",label:"Tatar"}),e.push({value:"Telugu",label:"Telugu"}),e.push({value:"Tereno",label:"Tereno"}),e.push({value:"Tetum",label:"Tetum"}),e.push({value:"Thai",label:"Thai"}),e.push({value:"Tibetan",label:"Tibetan"}),e.push({value:"Tigre",label:"Tigre"}),e.push({value:"Tigrinya",label:"Tigrinya"}),e.push({value:"Timne",label:"Timne"}),e.push({value:"Tiv",label:"Tiv"}),e.push({value:"Tlingit",label:"Tlingit"}),e.push({value:"Tok Pisin",label:"Tok Pisin"}),e.push({value:"Tokelau",label:"Tokelau"}),e.push({value:"Tonga (Nyasa)",label:"Tonga (Nyasa)"}),e.push({value:"Tonga (Tonga Islands)",label:"Tonga (Tonga Islands)"}),e.push({value:"Tsimshian",label:"Tsimshian"}),e.push({value:"Tsonga",label:"Tsonga"}),e.push({value:"Tswana",label:"Tswana"}),e.push({value:"Tumbuka",label:"Tumbuka"}),e.push({value:"Tupi Languages",label:"Tupi Languages"}),e.push({value:"Turkish",label:"Turkish"}),e.push({value:"Turkmen",label:"Turkmen"}),e.push({value:"Tuvalu",label:"Tuvalu"}),e.push({value:"Tuvinian",label:"Tuvinian"}),e.push({value:"Twi",label:"Twi"}),e.push({value:"Udmurt",label:"Udmurt"}),e.push({value:"Ugaritic",label:"Ugaritic"}),e.push({value:"Ukrainian",label:"Ukrainian"}),e.push({value:"Umbundu",label:"Umbundu"}),e.push({value:"Undetermined",label:"Undetermined"}),e.push({value:"Upper Sorbian",label:"Upper Sorbian"}),e.push({value:"Urdu",label:"Urdu"}),e.push({value:"Uyghur",label:"Uyghur"}),e.push({value:"Uzbek",label:"Uzbek"}),e.push({value:"Vai",label:"Vai"}),e.push({value:"Venda",label:"Venda"}),e.push({value:"Vietnamese",label:"Vietnamese"}),e.push({value:"Volapuk",label:"Volapuk"}),e.push({value:"Votic",label:"Votic"}),e.push({value:"Wakashan Languages",label:"Wakashan Languages"}),e.push({value:"Walamo",label:"Walamo"}),e.push({value:"Walloon",label:"Walloon"}),e.push({value:"Waray",label:"Waray"}),e.push({value:"Washo",label:"Washo"}),e.push({value:"Welsh",label:"Welsh"}),e.push({value:"Western Frisian",label:"Western Frisian"}),e.push({value:"Wolof",label:"Wolof"}),e.push({value:"Xhosa",label:"Xhosa"}),e.push({value:"Yakut",label:"Yakut"}),e.push({value:"Yao",label:"Yao"}),e.push({value:"Yapese",label:"Yapese"}),e.push({value:"Yiddish",label:"Yiddish"}),e.push({value:"Yoruba",label:"Yoruba"}),e.push({value:"Yupik Languages",label:"Yupik Languages"}),e.push({value:"Zande",label:"Zande"}),e.push({value:"Zapotec",label:"Zapotec"}),e.push({value:"Zazaki",label:"Zazaki"}),e.push({value:"Zenaga",label:"Zenaga"}),e.push({value:"Zhuang",label:"Zhuang"}),e.push({value:"Zulu",label:"Zulu"}),e.push({value:"Zuni",label:"Zuni"}),e},getRosterTerminationReasons:function(){var e=[];return e.push({value:"39",label:"Assigned member status ended; roster transferred per physician request"}),e.push({value:"59",label:"Enrolment ended; patient out of geographic area"}),e.push({value:"57",label:"Enrolment terminated by patient"}),e.push({value:"12",label:"Health Number error"}),e.push({value:"38",label:"Long Term Care enrolment ended; patient has left Long Term Care"}),e.push({value:"82",label:"Ministry has not received enrolment/ Consent form"}),e.push({value:"60",label:"No current eligibility"}),e.push({value:"73",label:"No current eligibility"}),e.push({value:"74",label:"No current eligibility"}),e.push({value:"37",label:"Original enrolment ended; patient now enrolled as Long Term Care"}),e.push({value:"36",label:"Original enrolment ended; patient now re-enroled"}),e.push({value:"24",label:"Patient added to roster in error"}),e.push({value:"14",label:"Patient identified as deceased on ministry database"}),e.push({value:"51",label:"Patient no longer meets selection criteria for your roster"}),e.push({value:"41",label:"Patient no longer meets selection criteria for your roster - assigned to another physician"}),e.push({value:"61",label:"Patient out of geographic area; address over-ride applied"}),e.push({value:"62",label:"Patient out of geographic area; address over-ride removed"}),e.push({value:"35",label:"Patient transferred from roster per physician request"}),e.push({value:"42",label:"Physician ended enrolment; patient entered Long Term Care facility"}),e.push({value:"54",label:"Physician ended enrolment; patient left province"}),e.push({value:"53",label:"Physician ended enrolment; patient moved out of geographic area"}),e.push({value:"56",label:"Physician ended enrolment; per patient request"}),e.push({value:"44",label:"Physician ended patient enrolment"}),e.push({value:"40",label:"Physician reported member as deceased"}),e.push({value:"32",label:"Pre-member/ Assigned member ended; now enrolled or registered with photo health card"}),e.push({value:"30",label:"Pre-member/ Assigned member ended; now enrolled or registered with red and white health card"}),e.push({value:"33",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"84",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"90",label:"Termination reason cannot be released (due to patient confidentiality)"}),e.push({value:"91",label:"Termination reason cannot be released (due to patient confidentiality)"}),e},getSecurityQuestions:function(){var e=[];return e.push({value:"What was the name of your high school?",label:"What was the name of your high school?"}),e.push({value:"What is your spouse's maiden name?",label:"What is your spouse's maiden name?"}),e.push({value:"What is the name of the street you grew up on?",label:"What is the name of the street you grew up on?"}),e.push({value:"In what city were you born?",label:"In what city were you born?"}),e.push({value:"What is the middle name of your oldest child?",label:"What is the middle name of your oldest child?"}),e.push({value:"What is your oldest cousin's first name?",label:"What is your oldest cousin's first name?"}),e.push({value:"What is your mother's middle name?",label:"What is your mother's middle name?"}),e.push({value:"What is your grandmother's first name?",label:"What is your grandmother's first name?"}),e.push({value:"What year did you graduate from high school?",label:"What year did you graduate from high school?"}),e},getConsultUrgencies:function(){var e=[];return e.push({value:"2",name:"Non-Urgent"}),e.push({value:"1",name:"Urgent"}),e.push({value:"3",name:"Return"}),e},getConsultRequestStatuses:function(){var e=[];return e.push({value:"1",name:"Not Complete"}),e.push({value:"2",name:"Preliminary Pending Specialist"}),e.push({value:"3",name:"Pending Callback"}),e.push({value:"4",name:"Completed"}),e.push({value:"5",name:"Cancelled"}),e.push({value:"6",name:"Appointment Booked"}),e.push({value:"7",name:"Deleted"}),e},getConsultResponseStatuses:function(){var e=[];return e.push({value:1,name:"Not Complete"}),e.push({value:2,name:"Pending Referring Doctor Callback"}),e.push({value:3,name:"Pending Patient Callback"}),e.push({value:4,name:"Completed"}),e.push({value:5,name:"Cancelled"}),e},getHours:function(){return["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]},getMinutes:function(){return["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"]},getRxInteractionLevels:function(){var e=[];return e.push({value:0,name:"Not Specified"}),e.push({value:1,name:"Low"}),e.push({value:2,name:"Medium"}),e.push({value:3,name:"High"}),e.push({value:4,name:"None"}),e}};return e}])},function(e,t,n){"use strict";angular.module("Common.Services").service("summaryService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/recordUX",getSummaryHeaders:function(o,a){var r=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/summary/"+a).then(function(e){r.resolve(e.data)},function(e){console.log("summaryService::getSummaryHeaders error",e),r.reject("An error occurred while fetching summary headers")}),r.promise},getFullSummary:function(o,a){var r=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/fullSummary/"+a).then(function(e){r.resolve(e.data)},function(e){console.log("summaryService::getFullSummary error",e),r.reject("An error occurred while fetching full summary")}),r.promise},getFamilyHistory:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getFamilyHistory").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getFamilyHistory error",e),a.reject("An error occurred while fetching family history")}),a.promise},getMedicalHistory:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getMedicalHistory").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getMedicalHistory error",e),a.reject("An error occurred while fetching medical history")}),a.promise},getSocialHistory:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getSocialHistory").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getSocialHistory error",e),a.reject("An error occurred while fetching social history")}),a.promise},getOngoingConcerns:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getOngoingConcerns").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getOngoingConcerns error",e),a.reject("An error occurred while fetching ongoing concerns")}),a.promise},getOtherMeds:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getOtherMeds").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getOtherMeds error",e),a.reject("An error occurred while fetching other meds")}),a.promise},getReminders:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getReminders").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getReminders error",e),a.reject("An error occurred while fetching reminders")}),a.promise},getRiskFactors:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/getRiskFactors").then(function(e){a.resolve(e.data)},function(e){console.log("summaryService::getRiskFactors error",e),a.reject("An error occurred while fetching risk factors")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("systemPreferenceService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/systemPreference",getPreference:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={default:a},t.get(n.apiPath+"/"+o,i).then(function(e){r.resolve(e.data)},function(e){console.log("systemPreferenceService::getPreference error",e),r.reject("An error occurred while getting system preference data")}),r.promise},setPreference:function(o,a){var r=e.defer();return t.put(n.apiPath+"/"+o,a).then(function(e){r.resolve(e.data)},function(e){console.log("systemPreferenceService::setPreference error",e),r.reject("An error occurred while setting system preference data")}),r.promise},isPreferenceEnabled:function(o,a){var r=e.defer(),i=Juno.Common.ServiceHelper.configHeaders();return i.params={default:a},t.get(n.apiPath+"/"+o+"/enabled",i).then(function(e){r.resolve(e.data)},function(e){console.log("systemPreferenceService::isPreferenceEnabled error",e),r.reject("An error occurred while getting system preference enabled status")}),r.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("ticklerService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/tickler",setCompleted:function(o){var a=t.defer();return e({url:n.apiPath+"/complete",method:"POST",data:JSON.stringify({ticklers:o}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::setCompleted error",e),a.reject("An error occurred while setting ticklers to completed status")}),a.promise},setDeleted:function(o){var a=t.defer();return e({url:n.apiPath+"/delete",method:"POST",data:JSON.stringify({ticklers:o}),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::setDeleted error",e),a.reject("An error occurred while setting ticklers to deleted status")}),a.promise},search:function(o,a,r){var i=t.defer();return e({url:n.apiPath+"/search?startIndex="+encodeURIComponent(a)+"&limit="+encodeURIComponent(r),method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){i.resolve(e.data)},function(e){console.log("ticklerService::search error",e),i.reject("An error occurred while searching ticklers")}),i.promise},update:function(o){var a=t.defer();return e({url:n.apiPath+"/update",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::update error",e),a.reject("An error occurred while updating tickler")}),a.promise},getTextSuggestions:function(){var o=t.defer();return e({url:n.apiPath+"/textSuggestions",method:"GET"}).then(function(e){o.resolve(e.data)},function(e){console.log("ticklerService::getTextSuggestions error",e),o.reject("An error occurred while getting tickler text suggestions")}),o.promise},add:function(o){var a=t.defer();return e({url:n.apiPath+"/add",method:"POST",data:JSON.stringify(o),headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("ticklerService::add error",e),a.reject("An error occurred while saving tickler")}),a.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("reportByTemplateService",["$http","$q","junoHttp",function(e,t,n){var o={apiPath:"../ws/rs",isK2AInit:function(){var n=t.defer();return e({url:o.apiPath+"/reportByTemplate/K2AActive",method:"GET",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){n.resolve(e.data)},function(e){console.log("reportByTemplateService::isK2AInit error",e),n.reject("An error occurred while fetching k2a content")}),n.promise},getAllK2AReports:function(){var e=t.defer(),a=Juno.Common.ServiceHelper.configHeaders();return n.get(o.apiPath+"/reportByTemplate/allReports",a).then(function(t){e.resolve(t.data)},function(t){console.log("reportByTemplateService::getAllK2AReports error",t),e.reject("An error occurred while fetching k2a reports")}),e.promise},getK2AReportById:function(n){var a=t.defer();return e({url:o.apiPath+"/reportByTemplate/getReportById/"+encodeURIComponent(n),method:"POST",headers:Juno.Common.ServiceHelper.configHeaders()}).then(function(e){a.resolve(e.data)},function(e){console.log("reportByTemplateService::getK2AReportById error",e),a.reject("An error occurred while fetching k2a report")}),a.promise},getK2AUrl:function(){var e=t.defer(),a=Juno.Common.ServiceHelper.configHeaders();return n.get(o.apiPath+"/reportByTemplate/K2AUrl/",a).then(function(t){e.resolve(t.data)},function(t){console.log("reportByTemplateService::getK2AUrl error",t),e.reject("An error occurred while fetching k2a url")}),e.promise}};return o}])},function(e,t,n){"use strict";angular.module("Common.Services").service("uxService",["$http","$q",function(e,t){var n={apiPath:"../ws/rs/recordUX",menu:function(o){var a=t.defer();return e.get(n.apiPath+"/"+encodeURIComponent(o)+"/recordMenu").then(function(e){a.resolve(e.data)},function(e){console.log("uxService::menu error",e),a.reject("An error occurred while fetching menu")}),a.promise},searchTemplates:function(o,a,r){var i=t.defer();return e.post(n.apiPath+"/searchTemplates?startIndex="+encodeURIComponent(a)+"&itemsToReturn="+encodeURIComponent(r),o).then(function(e){i.resolve(e.data)},function(e){console.log("uxService::searchTemplates error",e),i.reject("An error occurred while searching templates")}),i.promise},getTemplate:function(o){var a=t.defer();return e.post(n.apiPath+"/template",o).then(function(e){a.resolve(e.data)},function(e){console.log("uxService::getTemplate error",e),a.reject("An error occurred while fetching template")}),a.promise},getDisplayProperties:function(){var o=t.defer();return e.get(n.apiPath+"/properties").then(function(e){o.resolve(e.data)},function(e){console.log("uxService:getDisplayProperties error",e),o.reject("An error occurred while fetching display properties.")}),o.promise},getAllDashboards:function(){var o=t.defer();return e.get(n.apiPath+"/dashboards").then(function(e){o.resolve(e.data.body)},function(e){console.log("uxService:getAllDashboards error",e),o.reject("An error occurred while fetching dashboard list.")}),o.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("specialistsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/specialists/",searchSpecialists:function(o,a,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchName:o,searchRefNo:a,page:r,perPage:i},console.log("params",s.params),t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("SpecialistsService::searchSpecialists error",e),l.reject("An error occurred while searching Specialists")}),l.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Services").service("referralDoctorsService",["$q","junoHttp",function(e,t){var n={apiPath:"../ws/rs/referralDoctors/",searchReferralDoctors:function(o,a,r,i){var l=e.defer(),s=Juno.Common.ServiceHelper.configHeaders();return s.params={searchName:o,searchRefNo:a,page:r,perPage:i},t.get(n.apiPath,s).then(function(e){l.resolve(e.data)},function(e){console.log("ReferralDoctorsService::searchReferralDoctors error",e),l.reject("An error occurred while searching ReferralDoctors")}),l.promise}};return n}])},function(e,t,n){"use strict";angular.module("Common.Filters",[])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("age",[function(){return function(e){return null!==e&&null!==e.years?e.years<1&&e.months<1?e.days+"d":e.years<2?e.months+"m":e.years+" y":""}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("cut",[function(){return function(e,t,n,o){if(!e)return"";if(!(n=parseInt(n,10)))return e;if(e.length<=n)return e;if(e=e.substr(0,n),t){var a=e.lastIndexOf(" ");-1!==a&&(e=e.substr(0,a))}return e+(o||" ")}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("offset",[function(){return function(e,t){return null===e?0:(t=parseInt(t,10),e.slice(t))}}])},function(e,t,n){"use strict";angular.module("Common.Filters").filter("startFrom",[function(){return function(e,t){return t=+t,e}}])},function(e,t,n){"use strict";angular.module("Common.Directives",["Common.Services"])},function(e,t){angular.module("Common").directive("junoConfirmClick",[function(){return{scope:{onConfirm:"&junoConfirmClick",onCancel:"&junoConfirmCancel"},restrict:"A",link:function(e,t,n,o){var a=n.junoConfirmMessage||"Are you sure?";t.bind("click",function(t){window.confirm(a)?e.onConfirm():e.onCancel()})}}}])},function(e,t,n){"use strict";angular.module("Common.Directives").service("typeaheadHelper",["$timeout",function(e){var t={defaultTypeaheadScope:function(){var e={model:"=junoModel",placeholder:"@junoPlaceholder",onSearchFn:"&junoOnSearchFn",onAddFn:"&junoOnAddFn",searchButtonTitle:"@junoSearchButtonTitle",addButtonTitle:"@junoAddButtonTitle",iconLeft:"=junoIconLeft",iconRight:"=junoIconRight"};return e},initTypeahead:function(t){t.findMatches=function(e){console.log("findMatches function must be defined by the typeahead implementation")},t.formatMatchSelection=function(e){console.log("formatMatch function must be defined by the typeahead implementation")},t.optionsTemplateUrl=null,t.forceSelection=!1,t.searchField=null,t.typeaheadModelOptions={debounce:{default:250,blur:250}},angular.isDefined(t.model)||(t.model=null),t.autocompleteMinLength=1,t.hasButtons=function(){return t.hasSearchButton()||t.hasAddButton()},t.hasSearchButton=function(){return angular.isFunction(t.onSearchFn())},t.hasAddButton=function(){return angular.isFunction(t.onAddFn())},t.hasIcon=function(){return t.hasLeftIcon()||t.hasRightIcon()},t.hasLeftIcon=function(){return!0===t.iconLeft},t.hasRightIcon=function(){return!0===t.iconRight},t.hasTemplateUrl=function(){return Juno.Common.Util.exists(t.optionsTemplateUrl)},t.hasForceSelectionEnabled=function(){return Juno.Common.Util.exists(t.forceSelection)&&t.forceSelection},t.formatMatch=function(e){return Juno.Common.Util.exists(e)?t.isDummySelection(e)?e.searchQuery:t.formatMatchSelection(e):null},t.onSelect=function(e,n,o,a){t.model=e},t.onBlur=function(){t.hasForceSelectionEnabled()&&angular.isString(t.searchField)&&(console.log("typeaheadHelper::onBlur - setting model to null (forceSelectionEnabled)"),t.model=null)},t.onChange=function(){t.hasForceSelectionEnabled()||t.onSelect(t.createDummySelection())},t.onSearch=function(){e(function(){angular.isFunction(t.onSearchFn())&&t.onSearchFn()(t.model)})},t.onAdd=function(){e(function(){angular.isFunction(t.onAddFn())&&t.onAddFn()(t.model)})},t.createDummySelection=function(){return{isTypeaheadSearchQuery:!0,searchQuery:t.searchField}},t.isDummySelection=function(e){return Juno.Common.Util.exists(e)&&e.isTypeaheadSearchQuery},t.$watch("model",function(){t.searchField=t.model})}};return t}])},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoPatientSearchTypeahead",["$q","typeaheadHelper","demographicsService",function(e,t,n){return{restrict:"E",scope:t.defaultTypeaheadScope(),templateUrl:"src/common/directives/typeahead.jsp",replace:!0,link:function(o,a,r,i){t.initTypeahead(o),o.optionsTemplateUrl="src/common/directives/patientSearchTypeaheadOption.jsp",o.findMatches=function(t){var o=e.defer();return n.quickSearch(t).then(function(e){var n=e.data,a=e.meta;a.total>10&&n.push({moreResults:!0,total:a.total,searchQuery:t}),o.resolve(n)},function(){o.reject()}),o.promise},o.formatMatchSelection=function(e){return e.moreResults?null:Juno.Common.Util.formatName(e.firstName,e.lastName)}}}}])},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoPatientTypeahead",["$q","typeaheadHelper","demographicsService",function(e,t,n){return{restrict:"E",scope:t.defaultTypeaheadScope(),templateUrl:"src/common/directives/typeahead.jsp",replace:!0,link:function(o,a,r,i){t.initTypeahead(o),o.forceSelection=!0,o.findMatches=function(t){var o=e.defer(),a={type:n.SEARCH_MODE.Name,term:t,status:n.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return n.search(a,0,25).then(function(e){o.resolve(e.data)},function(){o.reject()}),o.promise},o.formatMatchSelection=function(e){return e.lastName+", "+e.firstName},o.typeaheadLabel=function(e){return o.formatMatchSelection(e)}}}}])},function(e,t,n){"use strict";angular.module("Common.Directives").directive("junoDatepickerPopup",[function(){var e={model:"=junoModel",placeholder:"@",showIcon:"=",disableInput:"="};return{restrict:"E",scope:e,templateUrl:function(e,t){return"src/common/directives/datepickerPopup"+t.type+".jsp"},replace:!0,link:function(e,t,n,o){e.format="yyyy-MM-dd",e.dateOptions={showWeeks:!1},e.opened=!1,e.openDatepicker=function(){e.opened=!0}}}}])},function(e,t,n){(function(e){n(20),angular.module("Common.Directives").directive("resizable",[function(){return{restrict:"A",scope:{callback:"&onResize"},link:function(t,n,o){n.resizable({handles:"n, nw, ne",minHeight:250,minWidth:510,maxWidth:window.innerWidth,maxHeight:window.innerHeight/1.5}),n.on("resizestop",function(e,n){t.callback&&t.callback()}),n.on("resize",function(){e(".note-editor-textarea").css("height",n.height()-145-e(".note-editor-issues").height())}),t.$on("noteIssueAdded",function(){var t=e("#note-editor").height()+33;e("#note-editor").height(t)}),t.$on("noteIssueRemoved",function(){var t=e("#note-editor").height()-33;e("#note-editor").height(t)})}}}])}).call(this,n(4))},function(e,t){angular.module("Common.Directives").directive("draggable",[function(){return{restrict:"A",link:function(e,t,n){t.draggable({axis:"x",containment:"#main-body"})}}}])},function(e,t,n){(function(e,t){angular.module("ui.calendar",[]).constant("uiCalendarConfig",{calendars:{}}).controller("uiCalendarCtrl",["$scope","$locale",function(t,n){var o=t.eventSources,a=t.calendarWatchEvent?t.calendarWatchEvent:angular.noop,r=1;this.eventFingerprint=function(t){t._id||(t._id=r++);var n=a({event:t})||"",o=e.isMoment(t.start)?t.start.unix():t.start?e(t.start).unix():"",i=e.isMoment(t.end)?t.end.unix():t.end?e(t.end).unix():"";return""+t._id+(t.id||"")+(t.title||"")+(t.url||"")+o+i+(t.allDay||"")+(t.className||"")+n};var i=1,l=1;this.sourceFingerprint=function(e){var t=""+(e.__id||(e.__id=i++)),n=angular.isObject(e)&&e.events;return n&&(t=t+"-"+(n.__id||(n.__id=l++))),t},this.allEvents=function(){for(var e=[],t=0,n=o.length;t<n;t++){var a=o[t];if(angular.isArray(a))e.push(a);else if(angular.isObject(a)&&angular.isArray(a.events)){var r={};for(var i in a)"_id"!==i&&"events"!==i&&(r[i]=a[i]);for(var l=0;l<a.events.length;l++)angular.extend(a.events[l],r);e.push(a.events)}}return Array.prototype.concat.apply([],e)},this.changeWatcher=function(e,t){var n,o=function(){for(var n,o,a=angular.isFunction(e)?e():e,i=[],l=0,s=a.length;l<s;l++)o=a[l],n=t(o),r[n]=o,i.push(n);return i},a=function(e,t){var n,o,a=[],r={};for(n=0,o=t.length;n<o;n++)r[t[n]]=!0;for(n=0,o=e.length;n<o;n++)r[e[n]]||a.push(e[n]);return a},r={};return n={subscribe:function(e,i){e.$watch(o,function(e,o){!(i&&!1===i(e,o))&&function(e,o){var i,l,s,c,u={},d=a(o,e);for(i=0,l=d.length;i<l;i++){var p=d[i];s=r[p],delete r[p];var m=t(s);m===p?n.onRemoved(s):(u[m]=p,n.onChanged(s))}var h=a(e,o);for(i=0,l=h.length;i<l;i++)c=h[i],s=r[c],u[c]||n.onAdded(s)}(e,o)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(e,n){var o={};return angular.extend(o,n),angular.extend(o,e),angular.forEach(o,function(e,n){var a;"function"==typeof e&&(o[n]=(a=o[n],function(){if(t.$root.$$phase)return a.apply(this,arguments);var e=arguments,n=this;return t.$root.$apply(function(){return a.apply(n,e)})}))}),o},this.getLocaleConfig=function(e){if(!e.lang||e.useNgLocale){var t=function(e){var t,n;for(n in t=[],e)t[n]=e[n];return t},o=n.DATETIME_FORMATS;return{monthNames:t(o.MONTH),monthNamesShort:t(o.SHORTMONTH),dayNames:t(o.DAY),dayNamesShort:t(o.SHORTDAY)}}return{}}}]).directive("uiCalendar",["uiCalendarConfig",function(e){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&",enabled:"=ngEnabled"},controller:"uiCalendarCtrl",link:function(n,o,a,r){var i,l=n.eventSources,s=!1,c=r.changeWatcher(l,r.sourceFingerprint),u=r.changeWatcher(r.allEvents,r.eventFingerprint),d=null;n.destroyCalendar=function(){i&&i.fullCalendar&&i.fullCalendar("destroy"),i=a.calendar?e.calendars[a.calendar]=t(o).html(""):t(o).html("")},n.initCalendar=function(){n.enabled&&(i||(i=angular.element(o).html("")),i.fullCalendar(d),a.calendar&&(e.calendars[a.calendar]=i))},n.$on("$destroy",function(){n.destroyCalendar()}),c.onAdded=function(t){i&&i.fullCalendar&&(i.fullCalendar(d),a.calendar&&(e.calendars[a.calendar]=i),i.fullCalendar("addEventSource",t),s=!0)},c.onRemoved=function(e){i&&i.fullCalendar&&(i.fullCalendar("removeEventSource",e),s=!0)},c.onChanged=function(){i&&i.fullCalendar&&(i.fullCalendar("refetchEvents"),s=!0)},u.onAdded=function(e){i&&i.fullCalendar&&i.fullCalendar("renderEvent",e,!!e.stick)},u.onRemoved=function(e){i&&i.fullCalendar&&i.fullCalendar("removeEvents",e._id)},u.onChanged=function(e){if(i&&i.fullCalendar)for(var t=i.fullCalendar("clientEvents",e._id),n=0;n<t.length;n++){var o=t[n];o=angular.extend(o,e),i.fullCalendar("updateEvent",o)}},c.subscribe(n),u.subscribe(n,function(){if(!0===s)return s=!1,!1}),n.$watch(function(){var t,o=a.uiCalendar?n.$parent.$eval(a.uiCalendar):{};t=r.getFullCalendarConfig(o,e);var i=r.getLocaleConfig(t);angular.extend(i,t),d={eventSources:l},angular.extend(d,i),d.calendars=null;var s={};for(var c in d)"eventSources"!==c&&(s[c]=d[c]);return JSON.stringify(s)},function(e,t){e!==t?(n.destroyCalendar(),n.initCalendar()):e&&angular.isUndefined(i)&&n.initCalendar()})}}}])}).call(this,n(6),n(4))},function(e,t,n){"use strict";(function(e){angular.module("Common.Directives").directive("selectOptionTooltip",["$parse",function(t){console.log("CUSTOM SELECT TOOLTIP LOADED");return{priority:1e3,require:"ngModel",replace:!0,link:function(n,o,a,r){n.addCustomAttr=function(t,o,a,r){e("option",o).each(function(o,i){var l={};l[t]=a[o],e(i).attr("title",r(n,l))})};var i=a.selectOptionTooltip.match(/(.+)\s+for\s+(.+)\s+in\s+(.+)/),l=i[3],s=t(i[1]);n.$watchCollection(l,function(e){e&&n.addCustomAttr(i[2],o,e,s)})}}}])}).call(this,n(4))},function(e,t){angular.module("Common").directive("junoAppointmentStatusSelect",["$timeout","fieldHelperService","scheduleService",function(e,t,n){var o=angular.copy(t.default_scope);o.options="=caOptions",o.include_empty_option="@caEmptyOption",o.no_label="@caNoLabel";return{restrict:"EAC",scope:o,templateUrl:function(e,n){return t.resolve_template(n,"src/common/directives/appointment/juno_appointment_status_select")},replace:!0,link:function(o,a,r,i){o.select_change_fn=function(){o.setStatus(),e(function(){o.change_fn()})},o.button_change_fn=function(){o.model=n.getNextRotateStatus(o.model),o.setStatus(),e(function(){o.change_fn()})},o.setStatus=function(){var e=o.model,t=o.options[e],n=a.find(".icon");if(n.removeClass(function(e,t){return(t.match(/(^|\s)icon-\S+/g)||[]).join(" ")}),Juno.Common.Util.exists(t)){a.find(".directive-appt-status-select").css("background-color",t.color);var r=t.icon.substr(0,t.icon.indexOf("."));n.addClass("icon-"+r)}},o.setStatus(),t.default_link_function(o,a,r,i)},controller:t.default_controller}}])},function(e,t,n){(function(e){angular.module("Common").directive("caFieldAlphadate",["fieldHelperService",function(t){var n=angular.copy(t.default_scope);n.placeholder="@caPlaceholder";return{restrict:"EAC",scope:n,templateUrl:function(e,n){return t.resolve_template(n,"src/common/directives/clinicaid/ca_field_alphadate")},replace:!0,link:function(n,o,a,r){n.input_placeholder=n.placeholder,angular.isDefined(n.input_placeholder)||(n.input_placeholder="yyyy-mm-dd"),n.on_blur=function(){var t=e(n.model,["YYYY-MM-DD","YYYYMMDD"],!0);t.isValid()?n.model=t.format("YYYY-MM-DD"):n.model=null},t.default_link_function(n,o,a,r)},controller:t.default_controller}}])}).call(this,n(6))},function(e,t){angular.module("Common").directive("caFieldAlpha",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_alpha")},replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldAutocomplete",["$q","globalStateService","$timeout","fieldHelperService","autoCompleteService","resultsService","focusService",function(e,t,n,o,a,r,i){var l=["yes_no_boolean","gender","schedule","schedule_type","schedule_template","schedule_event_status","user_roles","user_type","province","country","custom_tax","alberta_location_code","alberta_default_time_role_modifier","service_modifier","ontario_office_code","ontario_service_location_indicator","bc_service_location_code","bc_referral_code","sask_clinic","sask_oop_province","sask_mode","sask_location_of_service","sask_location_of_service_short","sask_corporation_indicator","sask_submission_type","sask_submission_file","provider"],s=angular.copy(o.default_scope);s.placeholder="@caPlaceholder",s.input_group_class="@caInputGroupClass",s.autocomplete_type="@caAutocompleteType",s.params="=caParams",s.params_fn="&caParamsFn",s.on_select_fn="&caOnSelect",s.on_select_data="=caOnSelectData",s.on_clear_fn="&caClear",s.on_clear_data="=caClearData",s.on_create_fn="&caCreate",s.create_if="=caCreateIf",s.on_modify_fn="&caModify",s.modify_if="=caModifyIf",s.create_on_not_found="=?caCreateOnNotFound",s.editable="=?caEditable",s.ca_exclude_list="=caExcludeList";return{restrict:"E",scope:s,templateUrl:function(e,t){return o.resolve_template(t,"code/common/directives/ca_field_autocomplete")},replace:!0,link:function(t,n,r,s){t.autocomplete=a,t.search_field=null,angular.isDefined(t.model)||(t.model=null),Juno.Common.Util.exists(t.create_on_not_found)||(t.create_on_not_found=!1),Juno.Common.Util.exists(t.editable)||(t.editable=!1),-1!=Object.keys(t.autocomplete.dao_map).indexOf(t.autocomplete_type)||-1!=Object.keys(Clinicaid.Model.GenericRef.REF_DEFINITIONS).indexOf(t.autocomplete_type)?(t.autocomplete_min_length=-1!=l.indexOf(t.autocomplete_type)?0:1,t.input_placeholder=t.placeholder,angular.isDefined(t.input_placeholder)||(t.input_placeholder="Search..."),t.clear_autocomplete_search=function(){t.search_field=null},t.clear_autocomplete_model=function(e){t.model=null,angular.isFunction(t.on_clear_fn())&&t.on_clear_fn()(t.on_clear_data),e&&i.element(n.find("input"))},t.on_select=function(e,n,o,a){t.model=e,t.change_fn(),angular.isFunction(t.on_select_fn())&&t.on_select_fn()(e,n,o,a,t.on_select_data)},t.create_on_not_found_fn=function(e){Juno.Common.Util.exists(e)&&t.autocomplete.create_on_not_found(e,t.autocomplete_type,!0).then(function(e){t.on_select(e.data,e.data,null,null,t.on_select_data),angular.isFunction(t.change_fn)&&t.change_fn()},function(e){console.log("error:",e)})},t.on_change=function(){if(t.editable){var e=t.autocomplete.build_model_object(t.autocomplete_type,t.search_field);t.on_select(e,e,null,null,t.on_select_data),t.create_on_not_found&&t.create_on_not_found_fn(e)}else t.clear_autocomplete_model()},t.on_blur=function(){null==t.model&&(t.clear_autocomplete_model(),t.clear_autocomplete_search(),Juno.Common.Util.exists(t.model_on_focus)&&angular.isFunction(t.change_fn)&&t.change_fn()),angular.isFunction(t.blur_fn)&&t.blur_fn()},t.on_focus=function(){t.model_on_focus=angular.copy(t.model),angular.isFunction(t.focus_fn)&&t.focus_fn()},t.on_create=null,angular.isFunction(t.on_create_fn())&&(t.on_create=function(){t.on_create_fn()()}),t.on_modify=null,angular.isFunction(t.on_modify_fn())&&(t.on_modify=function(){t.on_modify_fn()()}),t.show_modify_if=void 0===t.modify_if||t.modify_if,t.autocomplete_items=function(n){var o=e.defer(),r=t.params?t.params:{};if(angular.isFunction(t.params_fn)){var i=t.params_fn();angular.isFunction(i)&&(i=i()),angular.extend(r,i)}return a.get_items(t.autocomplete_type,n,r).then(function(e){var n=e.data;Juno.Common.Util.exists(t.ca_exclude_list)&&(n=t.prune_items(n)),o.resolve(n)},function(e){o.reject(e)}),o.promise},t.prune_items=function(e){for(var n=[],o=0;o<e.length;o++){for(var a=!1,r=0;r<t.ca_exclude_list.length;r++){var i=t.ca_exclude_list[r];"string"==typeof i?e[o].data[e[o].value_field]==i&&(a=!0):e[o].data[e[o].value_field]==i.data[t.ca_exclude_list[r].value_field]&&(a=!0)}a||n.push(e[o])}return n},t.autocomplete_input_formatter=function(e){return null!=e?e.autocomplete_input_formatted:null},t.show_create=function(){return t.on_create&&!t.model&&(void 0===t.create_if||t.create_if)},t.show_modify=function(){return t.on_modify&&t.model&&!t.model.dummy_record&&(void 0===t.modify_if||t.modify_if)},t.show_buttons=function(){return!t.disabled&&(t.model||t.show_create())},t.$watch("model",function(e,n){t.search_field=t.model}),o.default_link_function(t,n,r,s)):console.log("invalid autocomplete type:",t.autocomplete_type,"valid values: (",Object.keys(t.autocomplete.dao_map),Object.keys(Clinicaid.Model.GenericRef.REF_DEFINITIONS))},controller:o.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldBoolean",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_boolean")},replace:!0,link:function(t,n,o,a){Juno.Common.Util.exists(t.model)||(t.model=!1),e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldButtonGroup",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);return t.field_settings="=caFieldSettings",t.field_default="=caFieldDefault",{restrict:"EAC",scope:t,templateUrl:"src/common/directives/clinicaid/ca_field_button_group.jsp",replace:!0,link:function(t,n,o,a){e.default_link_function(t,n,o,a),t.selected_values=[t.field_default],t.is_selected=function(e){return-1!=t.selected_values.indexOf(e)},t.toggle_selected=function(e){var n=t.selected_values.indexOf(e);-1==n?t.selected_values.push(e):t.selected_values.splice(n,1),t.model=t.selected_values.join(",")}},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldColor",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:"src/common/directives/clinicaid/ca_field_color.jsp",replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldCurrencyFilter",["$filter",function(e){return{require:"ngModel",restrict:"EAC",link:function(t,n,o,a){a.$parsers.push(function(e){null==e&&(e="0");var t=e.replace(/[$,]/g,"");""==t.trim()&&(t="0");var n=parseFloat(t).toFixed(4);return isNaN(n)&&(n=null),n}),a.$formatters.unshift(function(t){return null==t?null:e("myCurrencyFilter")(t)})}}}])},function(e,t){angular.module("Common").directive("caFieldCurrency",["fieldHelperService",function(e){return{restrict:"EAC",scope:e.default_scope,templateUrl:"src/common/directives/clinicaid/ca_field_currency.jsp",replace:!0,link:e.default_link_function,controller:e.default_controller}}])},function(e,t,n){(function(e){angular.module("Common").directive("caFieldDate3",["$timeout","fieldHelperService",function(t,n){var o=angular.copy(n.default_scope);delete o.focus_fn,o.on_focus_fn_year="&caFocusYear",o.on_focus_fn_month="&caFocusMonth",o.on_focus_fn_day="&caFocusDay";var a=function(e,t,n){if(n.field_year="",n.field_month="",n.field_day="",e){var o=e.split("-");angular.isDefined(o[0])&&(n.field_year=o[0]),angular.isDefined(o[1])&&(n.field_month=o[1]),angular.isDefined(o[2])&&(n.field_day=o[2])}},r=function(e,t,n){n.field_year||n.field_month||n.field_day?n.model=n.field_year+"-"+n.field_month+"-"+n.field_day:n.model=null};return{restrict:"E",scope:o,templateUrl:function(e,t){return n.resolve_template(t,"src/common/directives/clinicaid/ca_field_date3")},replace:!0,link:function(o,i,l,s){n.merge_title_messages(o),o.field_year="",o.field_month="",o.field_day="",o.focus_fn_year=function(){angular.isFunction(o.on_focus_fn_year)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn_year():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.focus_fn_month=function(){angular.isFunction(o.on_focus_fn_month)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn_month():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.focus_fn_day=function(){angular.isFunction(o.on_focus_fn_day)&&t(function(){e(i).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?o.on_focus_fn_day():console.log("ignoring on focus function - element is no longer in focus",o.name)})},o.$watch("focus_field",function(t,n,o){o.focus_field==o.name+"[year]"?e(i).find(".ca-field-date3 input").get(0).focus().select():o.focus_field==o.name+"[month]"?e(i).find(".ca-field-date3 input").get(1).focus().select():o.focus_field==o.name+"[day]"&&e(i).find(".ca-field-date3 input").get(2).focus().select()}),o.$on("focusCaFocusField",function(t,n){Juno.Common.Util.exists(o.name)&&o.name==n&&e(i).find(".ca-field-date3 input").get(0).focus().select()}),o.$watch("model",a),o.$watch("field_year",r),o.$watch("field_month",r),o.$watch("field_day",r)},controller:n.default_controller}}])}).call(this,n(4))},function(e,t,n){(function(e){angular.module("Common").directive("caFieldDate",["$compile","$timeout","fieldHelperService",function(t,n,o){var a=angular.copy(o.default_scope);a.date_picker_id="@caDatePickerId",a.orientation="@caOrientation",a.use_multi_date="@caUseMultiDate",a.container_id="@caContainerId",a.no_label="@caNoLabel";return{restrict:"EA",scope:a,replace:!0,templateUrl:function(e,t){return"bare"==t.caTemplate?"src/common/directives/clinicaid/ca_field_date_bare.jsp":"src/common/directives/clinicaid/ca_field_date.jsp"},link:function(a,r,i,l){a.initialization_complete=!1,a.delayed_change_fn=function(){!0===a.initialization_complete&&a.change_fn()},o.merge_title_messages(a),a.datepicker=null,a.is_multi_date=!1,a.CTRL_KEY=17,a.LEFT_SHIFT_KEY=16,a.ctrl_key_down=!1,a.shift_key_down=!1,a.is_visible=!1,a.container=e("body"),a.container_id||(a.container=e("#"+a.container_id));a.create_datepicker=function(){null==a.container_id?a.datepicker.datepicker({multidate:a.is_multi_date,autoclose:!a.is_multi_date,todayHighlight:!0,todayBtn:"linked",clearBtn:!0,toggleActive:a.is_multi_date,orientation:a.orientation,format:"yyyy-mm-dd",showOnFocus:!1,keyboardNavigation:!1}):a.datepicker.datepicker({multidate:a.is_multi_date,autoclose:!a.is_multi_date,todayHighlight:!0,todayBtn:"linked",clearBtn:!0,toggleActive:a.is_multi_date,orientation:a.orientation,format:"yyyy-mm-dd",container:"#"+a.container_id,showOnFocus:!1,keyboardNavigation:!1}),a.datepicker.datepicker().on("show",function(){a.is_visible=!0}),a.datepicker.datepicker().on("hide",function(){a.is_visible=!1})},a.toggle_multi=function(e,t){"true"==a.use_multi_date&&(a.is_multi_date=e||!a.is_multi_date,a.datepicker.datepicker("remove"),a.create_datepicker(),a.datepicker.datepicker("show"),t&&t.length>0&&r.find("input").val(t))},a.key_up=function(e){if("true"==a.use_multi_date){if(!a.is_multi_date){var t=r.find("input").val();-1!=t.search(",")&&a.toggle_multi(!0,t)}e.keyCode==a.CTRL_KEY?(a.close_date_picker(e),a.ctrl_key_down=!1):e.keyCode==a.LEFT_SHIFT_KEY&&(a.close_date_picker(e),a.shift_key_down=!1)}},a.key_down=function(e){if("true"==a.use_multi_date){if(a.ctrl_key_down)return;e.keyCode==a.CTRL_KEY?(a.ctrl_key_down=!0,a.toggle_multi(!0)):e.keyCode==a.LEFT_SHIFT_KEY&&(a.shift_key_down=!0,a.toggle_multi(!0))}},a.on_focus=function(e){a.is_visible||a.open_date_picker(e),a.focus_fn()},a.on_click=function(e){a.is_visible||a.open_date_picker(e)},a.open_date_picker=function(e){var t=r.find("input").val().split(","),n=!1;t&&t.length>1&&(n=!0),a.datepicker.datepicker("setDates",t),"true"==a.use_multi_date&&n!=a.is_multi_date?a.toggle_multi():a.datepicker.datepicker("show")},a.close_date_picker=function(e){a.datepicker.datepicker("hide")},a.focus_fn=function(){angular.isFunction(a.on_focus_fn)&&n(function(){e(r).find(" input:enabled, select:enabled, textarea:enabled ").is(":focus")?a.on_focus_fn():console.log("ignoring on focus function - element is no longer in focus",a.name)})},a.$watch("focus_field",function(){if(a.focus_field==a.name){var e=r.find("input");n(function(){e.is(":focus")||e.focus(),e.select()})}}),n(function(){var n=i.caDatePickerId;n||(n="ca-date-picker"),a.datepicker=e("#"+n).find("input"),a.create_datepicker(),a.datepicker.on("show",function(n){var o=e(".datepicker.datepicker-dropdown"),r=o.find("tfoot");"true"==a.use_multi_date?r.replaceWith("<tfoot><tr><th style='display: table-cell;' ng-class=\"{active: is_multi_date}\" ng-click='toggle_multi()' colspan='2' class='multi'>Multi</th><th style='display: table-cell;' ng-click='close_date_picker()' colspan='3' class='multi'>Close</th><th style='display: table-cell;' colspan='2' class='clear'>Clear</th></tr>"):r.replaceWith("<tfoot><tr><th style='display: table-cell;' colspan='4' class='today'>Today</th><th style='display: table-cell;' colspan='3' class='clear'>Clear</th></tr>"),r=o.find("tfoot"),t(r.contents())(a),o.find(".next").html("").addClass("icon-arrow-right"),o.find(".prev").html("").addClass("icon-arrow-left"),a.initialization_complete=!0})})},controller:o.default_controller}}])}).call(this,n(4))},function(e,t){angular.module("Common").directive("caFieldNumber",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.pad_length="@caPadLength";return{restrict:"EAC",scope:t,templateUrl:"src/common/directives/clinicaid/ca_field_number.jsp",replace:!0,link:function(t,n,o,a){t.pad_length||(t.pad_length=0),e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldPassword",["fieldHelperService",function(e){return e.textInputDirective(!0)}])},function(e,t){angular.module("Common").directive("caFieldRadio",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.value="@caValue";return{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_radio")},replace:!0,link:function(t,n,o,a){e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldSelect",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);t.options="=caOptions",t.include_empty_option="@caEmptyOption",t.no_label="@caNoLabel";return{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_select")},replace:!0,link:function(t,n,o,a){e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFieldText",["fieldHelperService",function(e){return e.textInputDirective(!1)}])},function(e,t,n){(function(e){angular.module("Common").directive("caFieldTime",["fieldHelperService","$timeout",function(t,n){var o=angular.copy(t.default_scope);o.minute_step="=caMinuteStep",o.no_label="@caNoLabel",o.disable_widget="=caDisableWidget";return{restrict:"EAC",scope:o,templateUrl:function(e,n){return t.resolve_template(n,"src/common/directives/clinicaid/ca_field_time")},replace:!0,link:function(o,a,r,i){o.picker_container=null,o.toggle_widget=function(){o.disable_widget||o.picker_container.timepicker("showWidget")},n(function(){o.picker_container=e("#input-"+o.name),o.picker_container.timepicker({defaultTime:!1,minuteStep:o.minute_step,template:!o.disable_widget&&"dropdown",icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down"}})}),t.default_link_function(o,a,r,i)},controller:t.default_controller}}])}).call(this,n(4))},function(e,t){angular.module("Common").directive("caFieldToggle",["fieldHelperService",function(e){var t=angular.copy(e.default_scope);return t.true_text="@caTrueText",t.false_text="@caFalseText",t.true_value="@caTrueValue",t.false_value="@caFalseValue",{restrict:"EAC",scope:t,templateUrl:function(t,n){return e.resolve_template(n,"src/common/directives/clinicaid/ca_field_toggle")},replace:!0,link:function(t,n,o,a){e.default_link_function(t,n,o,a)},controller:e.default_controller}}])},function(e,t){angular.module("Common").directive("caFocusField",[function(){return{restrict:"A",replace:!1,priority:100,require:["?^caFieldAlpha","?^caFieldAlphadate","?^caFieldAutocomplete","?^caFieldBoolean","?^caFieldColor","?^caFieldCurrency","?^caFieldDate","?^caFieldDate3","?^caFieldNumber","?^caFieldSelect","?^caFieldText","?^caFieldTime"],link:function(e,t,n,o){for(var a=n.caName,r=!1,i=0;i<o.length;i++)if(o[i]&&o[i].ignore_focus_field()){r=!0;break}if(angular.isDefined(e.form_nav)&&!r){var l=n.caFocusField;e.$watch(l,function(){Juno.Common.Util.exists(a)&&a==e.form_nav.focus_field&&t[0].focus().select()}),e.$on("focusCaFocusField",function(e,n){Juno.Common.Util.exists(a)&&a==n&&t[0].focus().select()})}}}}])},function(e,t){angular.module("Common").directive("caInfoMessages",[function(){return{restrict:"E",scope:{saving:"=?caSavingFlag",errors:"=caErrorsObject",field_value_map:"=?caFieldValueMap",success_message:"@caSuccessMessage",field_value_map_label_key:"@caFieldValueMapLabelKey",displayFieldErrors:"=?caDisplayFieldErrors",prepend_name_to_field_errors:"=?caPrependNameToFieldErrors",error_link_functions:"=?caErrorLinkFunctions"},templateUrl:"src/common/directives/clinicaid/ca_info_messages.jsp",link:function(e,t,n,o){Juno.Common.Util.exists(e.displayFieldErrors)&&!1===e.displayFieldErrors||(e.displayFieldErrors=!0),Juno.Common.Util.exists(e.prepend_name_to_field_errors)&&!1===e.prepend_name_to_field_errors||(e.prepend_name_to_field_errors=!0),e.get_label=function(t){var n=t;return Juno.Common.Util.exists(e.field_value_map)&&e.field_value_map.hasOwnProperty(t)&&(n=Juno.Common.Util.exists(e.field_value_map_label_key)?e.field_value_map[t][e.field_value_map_label_key]:e.field_value_map[t]),n},e.force_array=function(e){return angular.isArray(e)?e:[e]},e.has_sub_errors=function(e){return!angular.isString(e)&&angular.isObject(e)},e.error_link_has_function=function(t){var n=e.errors.error_links()[t];return e.error_link_functions&&n.js_fn&&angular.isFunction(e.error_link_functions[n.js_fn])},e.execute_error_link_fn=function(t){var n=e.errors.error_links()[t];e.error_link_has_function(t)?e.error_link_functions[n.js_fn](n.uuid):console.log("error link does not have a function!",n)},e.should_display_field_errors=function(){return Juno.Common.Util.exists(e.errors)&&e.errors.has_field_errors()&&e.displayFieldErrors&&e.errors.displayFieldErrors}}}}])},function(e,t,n){(function(e){angular.module("Common").directive("caKeyBindScope",["$rootScope",function(t){return{scope:{identifier:"@caIdentifier",key_combo:"@caKeyCombo",callback_fn:"=caCallbackFn",key_bind_settings:"=caKeyBindSettings"},restrict:"EA",link:function(n,o,a,r){if(null==n.identifier)return console.log("The following ca_key_bind_scope element is missing the required ca-identifier attribute"),void console.log(o);var i=function(t){var n=t.parents("ca-key-bind-scope"),o=[];return e.each(n,function(e,n){try{o.unshift(n.attributes["ca-identifier"].nodeValue)}catch(e){console.log("This ca-key-bind-scope element has an invalid parent: "),console.log(t)}}),o}(o);if(null!=n.key_bind_settings)for(var l in n.key_bind_settings)t.ca_key_binding.bind_key_element(n,o,n.identifier,angular.copy(i),l,n.key_bind_settings[l]);else console.log("No key bind settings set for ca-key-bind-scope directive ("+n.identifier+")")}}}])}).call(this,n(4))},function(e,t){angular.module("Common").directive("caPagination",["$timeout",function(e){return{restrict:"E",scope:{pagination:"=caModel",change_page_callback:"=caChangePage"},templateUrl:"src/common/directives/clinicaid/ca_pagination.jsp",replace:!0,link:function(t,n,o,a){t.mode="pages",t.change_page=function(e){Juno.Common.Util.exists(e)&&e!=t.pagination.current_page&&e>0&&e<=t.pagination.total_pages&&t.change_page_callback(e)},t.expand_ellipsis=function(){t.go_to_page_num=t.pagination.current_page,t.mode="goto",e(function(){n.find("input").focus().select()})},t.close_ellipsis=function(){t.mode="pages"},t.go_to_page=function(){if(Juno.Common.Util.isIntegerString(t.go_to_page_num)){var e=parseInt(t.go_to_page_num);e<=0?e=1:e>t.pagination.total_pages&&(e=t.pagination.total_pages),t.change_page(e),t.close_ellipsis()}}}}}])},function(e,t){angular.module("Common").directive("caQuill",["$timeout",function(e){return{restrict:"A",require:"ngModel",replace:!0,templateUrl:"src/common/directives/clinicaid/ca_quill.jsp",link:function(t,n,o,a){var r,i={modules:{toolbar:{container:".wysiwyg-toolbar"},"image-tooltip":!0,"link-tooltip":!0},theme:"snow"},l=o.quill?t.$eval(o.quill):{};angular.extend(i,l),e(function(){r=new Quill(n.children()[1],i),a.$render(),r.on("text-change",function(e,n){var o;o=this.getHTML(),t.$apply(function(){a.$setViewValue(o)})})}),a.$render=function(){angular.isDefined(r)&&e(function(){r.setHTML(a.$viewValue||"")})}}}}])},function(e,t,n){(function(e){angular.module("Common").directive("caStickySearchResultsFooter",["$document","$timeout",function(t,n){return{restrict:"A",scope:{eventName:"@caEventName"},link:function(o,a,r,i){var l=angular.element(a[0].querySelector(".search-results-records")),s=angular.element(a[0].querySelector(".search-results-scrollbar")),c=angular.element(s[0].querySelector(".scrollbar")),u=angular.element(a[0].querySelector(".stickied-table-wrapper")),d=angular.element(u[0].querySelector("table")),p=angular.element(a[0].querySelector(".search-results-footer")),m=angular.element(a[0].querySelector(".search-results-records")),h=angular.element(t.find("#center-panel-wrapper")),g=angular.element(t.find("#layout-sidebar"));s.scroll(function(){u.scrollLeft(s.scrollLeft())}),u.scroll(function(){s.scrollLeft(u.scrollLeft())}),o.$on(o.eventName,function(){n(o.update_search_results_footer)}),o.update_search_results_footer=function(){h.height()>=g.height()&&m.offset().top+m.height()>e(window).height()?(p.addClass("fixed").removeClass("static"),p.css("width",l.width()),s.width(u.width()),c.width(d.width()),s.width()<c.width()?u.css("padding-bottom",p.height()-15):u.css("padding-bottom",p.height())):(p.addClass("static").removeClass("fixed"),p.css("width","initial"),u.css("padding-bottom",0))}}}}])}).call(this,n(4))},function(e,t){angular.module("Common").directive("zeroPad",["$filter",function(e){return{restrict:"A",link:function(t,n,o,a){a.$formatters.unshift(function(t){return e("numberFixedLength")(t,4)}),a.$parsers.unshift(function(t){return e("numberFixedLength")(t,4)})}}}])},function(e,t){angular.module("Common").directive("compileHtml",["$compile",function(e){return function(t,n,o){t.$watch(function(e){return e.$eval(o.compileHtml)},function(o){n.jsp(o),e(n.contents())(t)})}}])},function(e,t){angular.module("Common").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,n,o){var a=e(o.fileModel).assign;n.bind("change",function(){t.$apply(function(){a(t,n[0].files[0])})})}}}])},function(e,t){angular.module("Common").directive("resizeHandler",["$parse",function(e){return{restrict:"A",link:function(t,n,o){t.$on("resize::resize",function(){e(o.resizeHandler)(t)})}}}])},function(e,t){angular.module("Common").directive("resize",["$window",function(e){return{link:function(t){angular.element(e).on("resize",function(e){t.$broadcast("resize::resize")})}}}])},function(e,t){angular.module("Common").directive("scrollHandler",["$parse",function(e){return{restrict:"A",link:function(t,n,o){t.$on("scroll::scroll",function(){e(o.scrollHandler)(t)})}}}])},function(e,t){angular.module("Common").directive("scroll",["$window",function(e){return{link:function(t){angular.element(e).on("scroll",function(e){t.$broadcast("scroll::scroll")})}}}])},function(e,t){angular.module("Common").directive("caZeroPad",["$filter",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,a){a.$formatters.unshift(function(t){var n=o.caZeroPad;return n||(n=0),e("numberFixedLength")(t,n)}),a.$parsers.unshift(function(t){var n=o.caZeroPad;return n||(n=0),e("numberFixedLength")(t,n)})}}}])},function(e,t,n){"use strict";angular.module("Common.Components",["Common.Services"])},function(e,t){angular.module("Common.Components").component("junoModal",{bindings:{hideFooter:"<",showLoading:"<"},templateUrl:"src/common/components/modalTemplate.jsp",transclude:{title:"?modalTitle",ctlButtons:"?modalCtlButtons",body:"?modalBody",footer:"?modalFooter"},controller:function(){let e=this;e.$onInit=function(){e.hideFooter=e.hideFooter||!1,e.showLoading=e.showLoading||!1},e.$onChanges=function(t){Juno.Common.Util.exists(t.showLoading)&&(e.showLoading=t.showLoading.currentValue)}}})},function(e,t){angular.module("Common.Components").component("junoLoadingIndicator",{bindings:{message:"@",messageAlignment:"@",indicatorType:"@"},templateUrl:"src/common/components/loadingIndicatorTemplate.jsp",controller:function(){let e=this;e.$onInit=function(){e.message=e.message||null,e.messageAlignment=e.messageAlignment||"vertical",e.indicatorType=e.indicatorType||"spinner"},e.isAlignmentVertical=function(){return"V"===e.messageAlignment||"vertical"===e.messageAlignment},e.isAlignmentHorizontal=function(){return"H"===e.messageAlignment||"horizontal"===e.messageAlignment}}})},function(e,t){angular.module("Common.Components").component("junoZeroStateDisplay",{bindings:{message:"@"},transclude:{content:"?content"},templateUrl:"src/common/components/zeroStateDisplayTemplate.jsp",controller:function(){let e=this;e.$onInit=function(){e.message=e.message||null}}})},function(e,t){angular.module("Common.Components").component("accordionList",{templateUrl:"src/common/components/accordionList/accordionList.jsp",bindings:{itemList:"<"},controller:["$state","$scope",function(e,t){let n=this;n.$onInit=function(){},n.bindCollapseListener=function(e){let o=n.itemList[e];if(!o.eventsBound){let e=angular.element(document.querySelector("#accordion-collapse-target-"+n.getGroupCollapseId(o)));e.on("hidden.bs.collapse",function(){o.expanded=!1,e.attr("style",""),t.$apply()}),e.on("shown.bs.collapse",function(){o.expanded=!0,e.attr("style",""),t.$apply()})}o.eventsBound=!0},n.getGroupCollapseId=function(e){return e.name.replace(" ","").replace("/","")},n.onGroupClick=function(e){for(let t=0;t<n.itemList.length;t++)e.name!==n.itemList[t].name&&angular.element(document.querySelector("#accordion-collapse-target-"+n.getGroupCollapseId(n.itemList[t]))).collapse("hide")},n.onItemClicked=function(e){void 0!==e.callback&&null!==e.callback&&e.callback()}}]})},function(e,t){angular.module("Common.Components").component("iconCard",{templateUrl:"src/common/components/iconCard/iconCard.jsp",bindings:{cardSize:"<?",icon:"<?",text:"<?",onClick:"&?"},controller:[function(){let e=this;e.$onInit=function(){e.cardSize=e.cardSize||"card-md",e.icon=e.icon||"icon-question",e.text=e.text||"??? no message ???",e.onClick=e.onClick||null},e.onCardClick=function(){e.onClick&&e.onClick({})}}]})},function(e,t){angular.module("Common.Components").component("panel",{templateUrl:"src/common/components/panel/panel.jsp",bindings:{},transclude:{header:"?panelHeader",body:"?panelBody"},controller:["$scope",function(e){}]})},function(e,t,n){"use strict";angular.module("Layout",["Common","Common.Services"])},function(e,t){angular.module("Layout").controller("Layout.BodyController",["$rootScope","$scope","providerService","securityService",function(e,t,n,o){var a=this;a.init=function(){n.getMe().then(function(e){o.setUser(e),a.userLoaded=!0},function(e){console.log(e)})},a.showPatientList=!1,a.userLoaded=!1,t.$on("configureShowPatientList",function(e,t){a.showPatientList=t}),a.toggleShowPatientList=function(){a.showPatientList=!a.showPatientList},a.isLeftAsideOpen=function(){return!0===a.showPatientList}}])},function(e,t,n){(function(e,t){angular.module("Layout").component("primaryNavigation",{bindings:{},templateUrl:"src/layout/primaryNav.jsp",controller:["$rootScope","$scope","$q","$timeout","$location","$state","$uibModal","$interval","securityService","personaService","billingService","consultService","inboxService","messageService","providerService","ticklerService",function(n,o,a,r,i,l,s,c,u,d,p,m,h,g,f,v){var b=this;b.me=null,b.updateInterval=void 0,b.messageInterval=void 0,b.intervalLengthOneMinute=6e4,b.intervalLengthFiveMinutes=3e5,b.init=function(){b.activeConsultationTotal=0,b.ticklerTotal=0,b.unAckLabDocTotal=0,b.unclaimedCount=0,b.unreadMessageTotal=0,b.demographicSearch=null,b.consultationTeamWarning="",b.consultationLookbackPeriod=1,p.getBillingRegion().then(function(e){b.billRegion=e.message},function(e){console.log(e)}),u.hasRights({items:[{objectName:"_search",privilege:"r"},{objectName:"_demographic",privilege:"w"},{objectName:"_msg",privilege:"r"}]}).then(function(e){null!==e.content&&(b.searchRights=e.content[0],b.newDemographicRights=e.content[1],b.messageRights=e.content[2])},function(e){console.log(e)}),d.getDashboardMenu().then(function(e){e.menus&&(b.dashboardMenu=e.menus.menu)},function(e){console.log(e)}),f.getSettings().then(function(e){e.consultationTimePeriodWarning>0&&(b.consultationLookbackPeriod=e.consultationTimePeriodWarning),"-1"!==e.consultationTeamWarning&&(b.consultationTeamWarning=e.consultationTeamWarning)},function(e){console.log("Error: ",e)}),d.getNavBar().then(function(e){b.currentProgram=e.currentProgram.program,e.programDomain.program instanceof Array?b.programDomain=e.programDomain.program:b.programDomain=[e.programDomain.program],b.unreadMessagesCount=e.unreadMessagesCount,b.unreadPatientMessagesCount=e.unreadPatientMessagesCount,b.updateCounts(),b.getUnreadMessageCount(),b.demographicSearchDropDownItems=e.menus.patientSearchMenu.items,b.menuItems=e.menus.menu.items,b.userMenuItems=e.menus.userMenu.items,b.messengerMenu=e.menus.messengerMenu.items,angular.isDefined(b.updateInterval)||(b.updateInterval=c(function(){b.updateCounts()},b.intervalLengthFiveMinutes)),angular.isDefined(b.messageInterval)||(b.messageInterval=c(function(){b.getUnreadMessageCount()},b.intervalLengthOneMinute))},function(e){console.log(e)})},o.$watch(function(){return u.getUser()},function(e){b.me=e},!0),o.$watch(function(){return b.demographicSearch},function(e){null==e||e.isTypeaheadSearchQuery||(e.moreResults?b.goToPatientSearch(e.searchQuery):b.goToPatientRecord(e.demographicNo),b.demographicSearch=null)},!0),o.$on("$destroy",function(){o.cancelIntervals()}),b.cancelIntervals=function(){angular.isDefined(b.updateInterval)&&(c.cancel(b.updateInterval),b.updateInterval=void 0),angular.isDefined(b.messageInterval)&&(c.cancel(b.messageInterval),b.messageInterval=void 0)},b.updateCounts=function(){b.getUnAckLabDocCount(),b.getOverdueTicklerCount(),b.getActiveConsultationCount(),b.getUnclaimedInboxCount()},b.getCountForLabel=function(e){return e.labelCount=0,"Inbox"===e.label?e.labelCount=b.unAckLabDocTotal:"Ticklers"===e.label?e.labelCount=b.ticklerTotal:"Consultations"===e.label&&(e.labelCount=b.activeConsultationTotal),e.labelCount},b.getUnAckLabDocCount=function(){h.getUnAckLabDocCount().then(function(e){b.unAckLabDocTotal=e},function(e){console.log(e)})},b.getUnclaimedInboxCount=function(){h.getInboxCountByStatus(0,"N").then(function(e){b.unclaimedCount=e},function(e){console.log(e)})},b.getUnreadMessageCount=function(){g.getUnreadCount().then(function(e){b.unreadMessageTotal=e},function(e){console.log(e)})},b.getOverdueTicklerCount=function(){v.search({status:"A",creator:b.me.providerNo,overdueOnly:"property"},0,6).then(function(e){b.ticklerTotal=e.total},function(e){console.log(e)})},b.getActiveConsultationCount=function(){var t=e().subtract(b.consultationLookbackPeriod,"months").toISOString();m.getTotalRequests({invertStatus:!0,referralEndDate:t,status:"4",team:b.consultationTeamWarning}).then(function(e){b.activeConsultationTotal=e.data},function(e){console.log(e)})},b.getNavBar=function(){d.getNavBar().then(function(e){b.currentProgram=e.currentProgram.program,e.programDomain.program instanceof Array?b.programDomain=e.programDomain.program:b.programDomain=[e.programDomain.program],b.unreadMessagesCount=e.unreadMessagesCount,b.unreadPatientMessagesCount=e.unreadPatientMessagesCount,b.demographicSearchDropDownItems=e.menus.patientSearchMenu.items,b.menuItems=e.menus.menu.items,b.userMenuItems=e.menus.userMenu.items,b.messengerMenu=e.menus.messengerMenu.items},function(e){console.log(e)})},b.onPatientSearch=function(e){null===e?b.goToPatientSearch():e.isTypeaheadSearchQuery&&b.goToPatientSearch(e.searchQuery),b.demographicSearch=null},b.goToPatientSearch=function(e){l.go("search",{term:e},{reload:"search"})},b.goToPatientRecord=function(e){l.go("record.details",{demographicNo:e,hideNote:!0},{reload:"record.details"})},b.transition=function(e,t){var n;if(angular.isDefined(e)&&angular.isDefined(e.state)&&null!==e.state){var o="",a="";"Inbox"===e.label?(o="../dms/inboxManage.do?method=prepareForIndexPage",a="inbox"):"Billing"===e.label?(o="../billing.do?billRegion=CLINICAID&action=invoice_reports",a="billing"):"eDocs"===e.label?(o="../dms/documentReport.jsp?function=provider&functionid="+encodeURIComponent(b.me.providerNo),a="edocView"):r(function(){l.go(e.state[0])}),angular.isDefined(t)&&(o+=t),""!==o&&""!==a&&(n=window.open(o,a,"scrollbars=1,height=700,width=1000"),window.focus&&n.focus())}else if(angular.isDefined(e)&&angular.isDefined(e.url)&&null!==e.url){if("Schedule"===e.label){var s="",c=i.path(),u=(c=c.substring(1)).split("/");return 1===u.length?s="?module="+encodeURIComponent(u[0]):3===u.length&&(s="?record="+encodeURIComponent(u[1])+"&module="+encodeURIComponent(u[2])),window.location=e.url+s,!1}angular.isDefined(e)&&angular.isDefined(e.openNewWindow)&&e.openNewWindow?(n=window.open(e.url),window.focus&&n.focus()):window.location=e.url}},b.loadClassicUi=function(){window.location="../provider/providercontrol.jsp"},b.openMessenger=function(e){if(null!=b.me)if(angular.isDefined(e)&&angular.isDefined(e.url)&&"phr"===e.url)window.open("../phr/PhrMessage.do?method=viewMessages","INDIVOMESSENGER"+encodeURIComponent(b.me.providerNo),"height=700,width=1024,scrollbars=1");else if(angular.isDefined(e)&&angular.isDefined(e.url)&&"k2a"===e.url){"-"===e.extra?window.open("../apps/oauth1.jsp?id=K2A","appAuth","width=700,height=450,scrollbars=1").focus():window.open("../apps/notifications.jsp","appAuth","width=450,height=700,scrollbars=1").focus()}else window.open("../oscarMessenger/DisplayMessages.do?providerNo="+encodeURIComponent(b.me.providerNo),"msgs","height=700,width=1024,scrollbars=1")},b.openScratchpad=function(){window.open("../scratch/index.jsp","scratch","height=700,width=1024,scrollbars=1").focus()},b.newDemographic=function(e){s.open({component:"addDemographicModal",backdrop:"static",windowClass:"juno-modal"}).result.then(function(e){i.path("/record/"+encodeURIComponent(e.demographicNo)+"/details")},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)})},b.isActive=function(e){return null!=e.state&&e.state.includes(l.current.name)},b.changeProgram=function(e){d.setCurrentProgram(e).then(function(e){b.getNavBar()},function(e){console.log(e)})},b.navItemFilter=function(e,n){return function(o){var a=-1!==t.inArray(o.label,e);return!0===n?!a:a}},b.mediumNavItemFilter=function(e){return b.navItemFilter(["Dashboard","Schedule","Inbox","Consultations","Ticklers"],e)},b.smallNavItemFilter=function(e){return b.navItemFilter(["Dashboard"],e)},b.mobileNavItemFilter=function(e){return b.navItemFilter([],e)}}]})}).call(this,n(6),n(4))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(7),o=n(8),a=n(12);angular.module("Layout").component("leftAside",{bindings:{expandOn:"="},templateUrl:"src/layout/leftAside.jsp",controller:["$rootScope","$scope","$q","$http","$httpParamSerializer","$state","angularUtil","scheduleService","providerService","securityService",function(n,r,i,l,s,c,u,d,p,m){var h=this;h.initialized=!1,h.scheduleApi=new t.ScheduleApi(l,s,"../ws/rs"),h.appointmentApi=new o.AppointmentApi(l,s,"../ws/rs"),h.systemPreferenceApi=new a.SystemPreferenceApi(l,s,"../ws/rs"),h.tabEnum=Object.freeze({appointments:0,recent:1}),h.activeTab=h.tabEnum.appointments,h.activePatientList=[],h.activeAppointmentList=[],h.query="",h.datepickerSelectedDate=null,h.refreshSettings={timerVariable:null,defaultAutoRefreshMinutes:3,preferredAutoRefreshMinutes:null},h.eventStatusOptions=[],h.init=function(){d.loadEventStatuses().then(function(){h.eventStatusOptions=d.eventStatuses,h.datepickerSelectedDate=Juno.Common.Util.formatMomentDate(e()),h.changeTab(h.activeTab),h.loadWatches(),h.initListAutoRefresh(),h.initialized=!0}),h.provider=m.getUser(),h.telehealthEnabled=h.loadTelehealthEnabled(),h.loadProviderSettings()},h.loadProviderSettings=function(){p.getSettings().then(function(e){h.loadedSettings=e},function(e){console.error("Failed to fetch provider setting in left aside with error: "+e)})},h.changeTab=function(e){h.activeTab=e,h.refresh()},h.goToRecord=function(t){if(0!==t.demographicNo)if(h.loadedSettings.hideOldEchartLinkInAppointment){var n={demographicNo:t.demographicNo};angular.isDefined(t.appointmentNo)&&(n.appointmentNo=t.appointmentNo,n.encType="face to face encounter with client",u.inMobileView()&&h.showPatientList(!1)),c.go("record.summary",n)}else{let n=Juno.Common.Util.getDatetimeNoTimezoneMoment(new Date(t.date)),o={providerNo:h.provider.providerNo,curProviderNo:h.provider.providerNo,providerview:h.provider.providerNo,userName:h.displayName,demographicNo:t.demographicNo,curDate:Juno.Common.Util.formatMomentDate(e()),reason:t.reason,appointmentNo:t.appointmentNo,appointmentDate:Juno.Common.Util.formatMomentDate(n),startTime:Juno.Common.Util.formatMomentTime(n),encType:"face to face encounter with client"};window.open(d.getEncounterLink(o),"popupWindow","height=800,width=1000,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no")}},h.loadTelehealthEnabled=function(){h.systemPreferenceApi.getPropertyEnabled("myhealthaccess_telehealth_enabled").then(function(e){h.telehealthEnabled=e.data.body},function(){r.displayMessages.add_standard_error("Failed to load telehealth enabled, defaulting to false"),h.telehealthEnabled=!1})},h.openTelehealthLink=function(e){e.isVirtual&&window.open("../integrations/myhealthaccess.do?method=connect&demographicNo="+encodeURIComponent(e.demographicNo)+"&siteName="+encodeURIComponent(e.location)+"&appt="+encodeURIComponent(e.appointmentNo),"_blank")},h.toggleShowPatientList=function(){h.showPatientList(!h.expandOn)},h.showPatientList=function(e){h.expandOn=e},h.isRecentPatientView=function(){return h.activeTab===h.tabEnum.recent},h.isAppointmentPatientView=function(){return h.activeTab===h.tabEnum.appointments},h.refreshRecentPatientList=function(){var e=i.defer();return p.getRecentPatientList().then(function(t){h.activePatientList=t,e.resolve(h.activePatientList)},function(t){console.log(t),e.reject()}),e.promise},h.refreshAppointmentPatientList=function(){var e=i.defer();return h.scheduleApi.getAppointmentsForDay(h.datepickerSelectedDate).then(function(t){h.activeAppointmentList=t.data.body,e.resolve(h.activeAppointmentList)},function(t){console.log(t),e.reject()}),e.promise},h.updateAppointmentStatus=function(e){var t=i.defer();return h.appointmentApi.setStatus(e.appointmentNo,e.status).then(function(e){n.$broadcast("schedule:refreshEvents"),t.resolve(e)}),t.promise},h.refresh=function(e){var t=i.defer();return h.isRecentPatientView()?h.refreshRecentPatientList().then(function(){t.resolve()}):h.isAppointmentPatientView()&&h.refreshAppointmentPatientList().then(function(){t.resolve()}),t.promise},r.$on("juno:patientListRefresh",function(){h.refresh()}),h.stepForward=function(){h.datepickerSelectedDate=Juno.Common.Util.formatMomentDate(Juno.Common.Util.getDateMoment(h.datepickerSelectedDate).add(1,"days"))},h.stepBack=function(){h.datepickerSelectedDate=Juno.Common.Util.formatMomentDate(Juno.Common.Util.getDateMoment(h.datepickerSelectedDate).add(-1,"days"))},h.isInitialized=function(){return h.initialized},h.initListAutoRefresh=function(){var e=i.defer(),t=h.refreshSettings.timerVariable;null!==t&&clearInterval(t);var n=h.refreshSettings.preferredAutoRefreshMinutes;return(n=Juno.Common.Util.exists(n)&&Juno.Common.Util.isIntegerString(n)?parseInt(n):h.refreshSettings.defaultAutoRefreshMinutes)>0&&(h.refreshSettings.timerVariable=setInterval(h.refresh,60*n*1e3)),e.resolve(),e.promise},h.loadWatches=function(){r.$watch("$ctrl.datepickerSelectedDate",function(e,t){t!==e&&h.refresh()})},h.$onInit=h.init()}]})}.call(this,n(6))},function(e,t,n){"use strict";angular.module("Patient",["Common","Common.Services"])},function(e,t,n){"use strict";n.r(t);var o=n(12);angular.module("Patient").component("addDemographicModal",{templateUrl:"src/patient/addDemographicModal/addDemographicModal.jsp",bindings:{modalInstance:"<",resolve:"<"},controller:["$scope","$http","$httpParamSerializer","staticDataService","demographicService","programService","providerService",function(e,t,n,a,r,i,l){let s=this;s.genders=a.getGenders(),s.provinces=a.getProvinces(),s.provincesCA=a.getCanadaProvinces(),s.newDemographicData={},s.systemPreferenceApi=new o.SystemPreferenceApi(t,n,"../ws/rs"),s.newDemographicData.lastName="",s.newDemographicData.firstName="",s.newDemographicData.sex="",s.newDemographicData.dateOfBirth="",s.newDemographicData.hin="",s.newDemographicData.ver="",s.newDemographicData.hcType="BC",s.newDemographicData.address={address:"",city:"",province:"BC",postal:""},s.newDemographicData.email="",s.newDemographicData.phone="",s.invalidLastName=!1,s.invalidFirstName=!1,s.invalidSex=!1,s.invalidDob=!1,i.getPrograms().then(function(e){s.programs=e,1===s.programs.length&&(s.newDemographicData.admissionProgramId=s.programs[0].id)},function(e){console.log(e)}),s.systemPreferenceApi.getPropertyValue("phoneprefix","").then(function(e){s.newDemographicData.phone=e.data.body},function(e){console.log("errors::"+e)}),l.getSettings().then(function(e){s.newDemographicData.sex=e.defaultSex,""===e.defaultHcType?s.systemPreferenceApi.getPropertyValue("hctype","BC").then(function(e){s.newDemographicData.address.province=e.data.body},function(e){console.log("Failed to fetch system properties with error:"+e)}):(s.newDemographicData.hcType=e.defaultHcType,s.newDemographicData.address.province=e.defaultHcType)},function(e){console.error("Failed to fetch Provider settings with error: "+e)}),s.validateDemographic=function(){let e=Juno.Common.Util.getDateMoment(s.newDemographicData.dateOfBirth).isValid();return s.invalidLastName=!s.newDemographicData.lastName,s.invalidFirstName=!s.newDemographicData.firstName,s.invalidSex=!s.newDemographicData.sex,s.invalidDob=!e,!(s.invalidLastName||s.invalidFirstName||s.invalidSex||s.invalidDob)},s.onCancel=function(){s.modalInstance.dismiss("cancel")},s.onAdd=function(){s.validateDemographic()&&r.saveDemographic(s.newDemographicData).then(function(e){s.modalInstance.close(e)},function(e){alert(e),console.error(e)})}}]})},function(e,t,n){(function(e){angular.module("Patient").component("demographicCard",{bindings:{demographicModel:"<?",disabled:"<?"},templateUrl:"src/patient/demographicCard.jsp",controller:[function(){var t=this;t.model={demographicNo:null,data:{},displayData:{birthDate:null,fullName:null,addressLine:null,hasPhoto:!1,patientPhotoUrl:"/imageRenderingServlet?source=local_client&clientId=0"}},t.$onInit=function(){t.fillDisplayData(t.demographicModel),t.disabled=t.disabled||!1},t.$onChanges=function(e){Juno.Common.Util.exists(e.demographicModel)&&t.fillDisplayData(e.demographicModel.currentValue),Juno.Common.Util.exists(e.disabled)&&(t.disabled=e.disabled.currentValue)},t.fillDisplayData=function(n){if(Juno.Common.Util.exists(n)){t.model.data=n,t.model.demographicNo=n.demographicNo,t.model.displayData.fullName=Juno.Common.Util.formatName(n.firstName,n.lastName),t.model.displayData.patientPhotoUrl="/imageRenderingServlet?source=local_client&clientId="+(n.demographicNo?n.demographicNo:0);var o=null;o=Juno.Common.Util.exists(n.dob)?e(n.dob,"YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ",!1):Juno.Common.Util.getDateMomentFromComponents(n.dobYear,n.dobMonth,n.dobDay),t.model.displayData.birthDate=Juno.Common.Util.formatMomentDate(o),Juno.Common.Util.exists(n.address)&&(t.model.displayData.addressLine=Juno.Common.Util.noNull(n.address.address)+" "+Juno.Common.Util.noNull(n.address.city)+" "+Juno.Common.Util.noNull(n.address.province)+" "+Juno.Common.Util.noNull(n.address.postal))}else t.model={demographicNo:null,data:{},displayData:{birthDate:null,fullName:null,addressLine:null,hasPhoto:!1,patientPhotoUrl:"/imageRenderingServlet?source=local_client&clientId=0"}}}}]})}).call(this,n(6))},function(e,t,n){"use strict";angular.module("Dashboard",["Common","Common.Services"])},function(e,t){angular.module("Dashboard").controller("Dashboard.DashboardController",["$scope","$uibModal","$interval","NgTableParams","providerService","ticklerService","messageService","inboxService","k2aService","noteService","securityService","personaService",function(e,t,n,o,a,r,i,l,s,c,u,d){var p=this;p.dashboardInterval=void 0,p.dashboardMessageInterval=void 0,p.intervalLengthOneMinute=6e4,p.intervalLengthFiveMinutes=3e5,p.displayDate=function(){return new Date},p.me=null,p.k2aActive=!1,p.k2aFeedActive=!1,p.busyLoadingData=!1,d.getDashboardPreferences().then(function(e){p.prefs=e.dashboardPreferences},function(e){console.log(e)}),u.hasRights({items:[{objectName:"_tickler",privilege:"w"},{objectName:"_tickler",privilege:"r"}]}).then(function(e){null!=e.content&&2==e.content.length&&(p.ticklerWriteAccess=e.content[0],p.ticklerReadAccess=e.content[1])},function(e){console.log(e)}),p.inboxTableParams=new o({page:1,count:10},{getData:function(e){return l.getDashboardItems(e.count()).then(function(t){return console.log("INBOX DATA: ",t),e.total(t.total),t.content},function(e){console.log(e)})}}),p.openInbox=function(){newwindow=window.open("../dms/inboxManage.do?method=prepareForIndexPage","inbox","height=700,width=1000"),window.focus&&newwindow.focus()},p.updateK2aActive=function(){s.isK2AInit().then(function(e){p.k2aActive=e})},p.loadMoreK2aFeed=function(){p.updateFeed(p.k2afeed.length,10)},p.authenticateK2A=function(e){window.open("../apps/oauth1.jsp?id="+e,"appAuth","width=700,height=450")},p.agreeWithK2aPost=function(e){e.agree?s.removeK2AComment(e.agreeId).then(function(t){e.agree=!1,e.agreeCount--,e.agreeId=""},function(e){alert(e)}):e.agree||e.disagree||(void 0===e.newComment&&(e.newComment={}),e.newComment.agree=!0,e.newComment.body="",p.commentOnK2aPost(e))},p.disagreeWithK2aPost=function(e){e.disagree&&s.removeK2AComment(e.agreeId).then(function(t){e.disagree=!1,e.disagreeCount--,e.agreeId=""},function(e){alert(e)}),e.agree||e.disagree||(void 0===e.newComment&&(e.newComment={}),e.newComment.agree=!1,e.newComment.body="",p.commentOnK2aPost(e))},p.commentOnK2aPost=function(e){e.newComment.postId=e.id,s.postK2AComment(e.newComment).then(function(t){e.newComment.body="",e.newComment.agree="",e.agreeId=t.agreeId,void 0!==t.post[0].agree?t.post[0].agree?(e.agree=!0,e.agreeId=t.post[0].agreeId,e.agreeCount++):(e.disagree=!0,e.agreeId=t.post[0].agreeId,e.disagreeCount++):(e.commentCount++,e.comments.unshift(t.post[0]))},function(e){alert(e)})},p.updateTicklers=function(){r.search({status:"A",creator:p.me.providerNo,overdueOnly:"property"},0,6).then(function(e){if(p.totalTicklers=e.total,null!=e.content)if(e.content instanceof Array)p.ticklers=e.content;else{var t=new Array;t[0]=e.content,p.ticklers=t}},function(e){console.log(e)})},p.updateMessages=function(){i.getUnread(6).then(function(e){if(p.totalMessages=e.total,null!=e.content)if(e.content instanceof Array)p.messages=e.content;else{var t=new Array;t[0]=e.content,p.messages=t}},function(e){console.log(e)})},p.updateReports=function(){l.getDashboardItems(5).then(function(e){if(null!=e.content){if(e.content instanceof Array)p.inbox=e.content;else{var t=new Array;t[0]=e.content,p.inbox=t}p.totalInbox=e.total}},function(e){console.log(e)})},p.updateFeed=function(e,t){p.busyLoadingData||(p.busyLoadingData=!0,s.getK2aFeed(e,t).then(function(e){if(e.content instanceof Array){for(var t=e.content,n=0;n<t.length;n++){if(!Array.isArray(t[n].comments))(o=new Array)[0]=t[n].comments,t[n].comments=o}void 0===p.k2afeed?p.k2afeed=t:p.k2afeed=p.k2afeed.concat(t),p.k2aFeedActive=!0,p.busyLoadingData=!1}else{var o;if(e.content.authenticatek2a)p.authenticatek2a=e.content.description;else(o=new Array)[0]=e.content,p.k2afeed=o,p.k2aFeedActive=!0}},function(e){alert(e),p.busyLoadingData=!1}))},p.updateDashboard=function(){p.updateTicklers(),p.updateReports(),p.updateFeed(0,10),p.updateK2aActive()},e.$watch(function(){return u.getUser()},function(e){p.me=e,null!=e&&(p.updateDashboard(),p.updateMessages()),angular.isDefined(p.dashboardInterval)||(p.dashboardInterval=n(function(){p.updateDashboard()},p.intervalLengthFiveMinutes)),angular.isDefined(p.dashboardMessageInterval)||(p.dashboardMessageInterval=n(function(){p.updateMessages()},p.intervalLengthOneMinute))},!0),p.isTicklerExpiredOrHighPriority=function(e){var t=!1;return Date.parse(e.serviceDate)<new Date&&(t=!0),"High"==e.priority&&(t=!0),t},p.isTicklerHighPriority=function(e){Date.parse(e.serviceDate),new Date;var t=!1;return"High"==e.priority&&(t=!0),t},p.openClassicMessenger=function(){null!=p.me&&window.open("../oscarMessenger/DisplayMessages.do?providerNo="+p.me.providerNo,"msgs","height=700,width=1024,scrollbars=1")},p.viewMessage=function(e){window.open("../oscarMessenger/ViewMessage.do?messageID="+e.id+"&boxType=0","msg"+e.id,"height=700,width=1024,scrollbars=1")},p.viewTickler=function(e){t.open({templateUrl:"src/tickler/ticklerView.jsp",controller:"Tickler.TicklerViewController as  ticklerViewCtrl",backdrop:"static",size:"lg",resolve:{tickler:function(){return e},ticklerNote:function(){return c.getTicklerNote(e.id)},ticklerWriteAccess:function(){return p.ticklerWriteAccess},me:function(){return p.me}}}).result.then(function(e){null!=e&&1==e&&p.updateTicklers()},function(e){console.log(e)})},p.configureTicklers=function(){t.open({templateUrl:"src/tickler/configureDashboard.jsp",controller:"Dashboard.TicklerConfigureController as ticklerConfigureCtrl",backdrop:"static",size:"md",resolve:{prefs:function(){return d.getDashboardPreferences()}}}).result.then(function(e){1==e&&(p.updateTicklers(),d.getDashboardPreferences().then(function(e){p.prefs=e.dashboardPreferences}))},function(e){console.log(e)})},e.$on("$destroy",function(){angular.isDefined(p.dashboardInterval)&&(n.cancel(p.dashboardInterval),p.dashboardInterval=void 0),angular.isDefined(p.dashboardMessageInterval)&&(n.cancel(p.dashboardMessageInterval),p.dashboardMessageInterval=void 0)})}])},function(e,t){angular.module("Dashboard").controller("Dashboard.TicklerConfigureController",["$scope","$uibModalInstance","personaService","prefs",function(e,t,n,o){var a=this;a.prefs=o.dashboardPreferences,a.close=function(){t.close(!1)},a.save=function(){n.updateDashboardPreferences(a.prefs).then(function(e){t.close(!0)},function(e){t.close(!1),console.log(e)})}}])},function(e,t,n){"use strict";angular.module("Record",["Common","Common.Services"])},function(e,t,n){"use strict";n.r(t),function(e,t){var o=n(8);function a(e){return e<10&&(e="0"+e),e}angular.module("Record").controller("Record.RecordController",["$rootScope","$scope","$window","$http","$httpParamSerializer","$localStorage","$location","$state","$stateParams","$timeout","$interval","$uibModal","demographicService","demo","user","properties","noteService","uxService","securityService","billingService",function(n,r,i,l,s,c,u,d,p,m,h,g,f,v,b,S,C,N,y,_){var A=this;A.appointmentApi=new o.AppointmentApi(l,s,"../ws/rs"),A.demographicNo=p.demographicNo,A.demographic=v,A.properties=S,A.page={},A.page.assignedCMIssues=[],A.page.itvSet=null,A.page.itvCheck=null,A.page.editingNoteId=null,A.page.isNoteSaved=!1,A.$storage=c,A.recordtabs2=[],A.working=!1,A.init=function(){A.fillMenu()},y.hasRight("_eChart","w",A.demographicNo).then(function(e){A.page.cannotChange=!e},function(e){console.log(e)}),A.checkAction=function(e){A.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},A.isNaN=function(e){return isNaN(e)},A.fillMenu=function(){N.menu(p.demographicNo).then(function(e){A.recordtabs2=e},function(e){console.log(e)})},A.changeTab=function(e){if(A.currenttab2=A.recordtabs2[e.id],Juno.Common.Util.isDefinedAndNotNull(e.state))Juno.Common.Util.isDefinedAndNotNull(e.demoId)?d.go(e.state[0],{demographicNo:e.demoId}):d.go(e.state[0]);else if(angular.isDefined(e.url)){var t;if("Rx"==e.label)t=e.label+A.demographicNo;else t="win"+Math.round(1e3*Math.random());window.open(e.url,t,"scrollbars=yes, location=no, width=1000, height=600","")}},A.isActive=function(e){return!(!Juno.Common.Util.isDefinedAndNotNull(d.current.name)||!Juno.Common.Util.isDefinedAndNotNull(e.state))&&e.state.includes(d.current.name)},i.onbeforeunload=function(e){if(Juno.Common.Util.isDefinedAndNotNull(A.page.encounterNote)&&0!==A.page.encounterNote.note.trim().length&&!1===A.page.isNoteSaved)return"You have made changes to a note, but you did not save them yet.\nLeaving the page will revert all changes."},r.$on("$destroy",function(){delete i.onbeforeunload}),r.$on("$stateChangeStart",function(e,t){Juno.Common.Util.isDefinedAndNotNull(A.page.encounterNote)&&!1===A.page.isNoteSaved&&-1===t.name.indexOf("record.")&&(0!==A.page.encounterNote.note.trim().length&&(confirm("You have unsaved note data. Are you sure you want to leave?")||e.preventDefault()))});var D=null,w=function(){A.page.encounterNote.note!=A.page.initNote&&(console.log("save",A.page.encounterNote),C.tmpSave(p.demographicNo,A.page.encounterNote))},R=!1;r.$watch("controller.page.encounterNote.note",function(e,t){R||(e!=t?(!0,D&&m.cancel(D),D=m(w,2e3)):!1),R=!1});var I=new Date,P=0,T=setInterval(E,1e3);function E(){++P,document.getElementById("aTimer").innerHTML=k(parseInt(P/60))+":"+k(P%60),1200==P&&e("#aTimer").css("background-color","#DFF0D8"),3e3==P&&e("#aTimer").css("background-color","#FDFEC7")}function k(e){var t=e+"";return t.length<2?"0"+t:t}A.getCurrentTimerToggle=function(){return angular.isDefined(T)?"fa-pause":"fa-play"},A.toggleTimer=function(){e("#aToggle").hasClass("fa-pause")?(e("#aToggle").removeClass("fa-pause"),e("#aToggle").addClass("fa-play"),clearInterval(T)):(e("#aToggle").removeClass("fa-play"),e("#aToggle").addClass("fa-pause"),T=setInterval(E,1e3))},A.pasteTimer=function(){var e=new Date;A.page.encounterNote.note+="\n"+document.getElementById("startTag").value+": "+I.getHours()+":"+k(I.getMinutes())+"\n"+document.getElementById("endTag").value+": "+e.getHours()+":"+k(e.getMinutes())+"\n"+k(parseInt(P/3600))+":"+k(parseInt(P/60%60))+":"+k(P%60)},r.$on("$destroy",function(){clearInterval(T)}),A.isWorking=function(){return A.working},A.toggleNote=function(){A.$storage.hideNote?A.$storage.hideNote=!1:A.$storage.hideNote=!0},A.cancelNoteEdit=function(){console.log("CANCELLING EDIT"),A.page.encounterNote=null,r.$broadcast("stopEditingNote"),R=!0,A.getCurrentNote(!1),A.removeEditingNoteFlag(),A.$storage.hideNote=!0},A.updateCurrentNote=function(e){A.page.encounterNote.note=e},A.saveNote=function(){if(!A.isWorking())if(0!==A.page.encounterNote.note.length){A.working=!0,A.page.encounterNote.assignedIssues=A.page.assignedCMIssues,A.page.encounterNote.issueDescriptions=[],Juno.Common.Util.isInArray(b.displayName,A.page.encounterNote.editorNames)||A.page.encounterNote.editorNames.push(b.displayName);for(var e=0;e<A.page.assignedCMIssues.length;e++)A.page.encounterNote.issueDescriptions.push(A.page.assignedCMIssues[e].issue.description);C.saveNote(p.demographicNo,A.page.encounterNote).then(function(e){A.page.isNoteSaved=!0,r.$broadcast("noteSaved",e),R=!0,A.page.encounterNote=e,A.$storage.hideNote=!0,A.getCurrentNote(!1),A.page.assignedCMIssues=[],A.working=!1},function(e){console.log(e),A.working=!1}),A.removeEditingNoteFlag()}else alert("Can't save a blank note!")},A.saveSignNote=function(){A.isWorking()||(A.page.encounterNote.isSigned=!0,A.saveNote())},A.saveSignVerifyNote=function(){A.isWorking()||(A.page.encounterNote.isVerified=!0,A.page.encounterNote.isSigned=!0,A.saveNote())},_.getBillingRegion().then(function(e){A.page.billregion=e.message},function(e){console.log(e)}),_.getDefaultView().then(function(e){A.page.defaultView=e.message},function(e){console.log(e)}),null!=u.search().appointmentNo&&A.appointmentApi.getAppointment(u.search().appointmentNo).then(function(e){A.page.appointment=e.data.body},function(e){console.log(e)}),A.saveSignBillNote=function(){if(!A.isWorking()){A.page.encounterNote.isSigned=!0,A.saveNote();for(var e="",n=0;n<A.page.assignedCMIssues.length;n++)e+="&dxCode="+A.page.assignedCMIssues[n].issue.code.substring(0,3);var o="",r="",i="",l="";if(null!=A.page.appointment){o=A.page.appointment.id,r=A.page.appointment.providerNo;var s=t(A.page.appointment.appointmentDate).toDate();i=s.getFullYear()+"-"+a(s.getMonth()+1)+"-"+a(s.getDate()),l=a((s=new Date(A.page.appointment.startTime)).getHours())+":"+a(s.getMinutes())+":"+a(s.getSeconds())}var c="../billing.do?billRegion="+encodeURIComponent(A.page.billregion);c+="&billForm="+encodeURIComponent(A.page.defaultView),c+="&demographic_name="+encodeURIComponent(v.lastName+","+v.firstName),c+="&demographic_no="+v.demographicNo,c+="&providerview="+b.providerNo+"&user_no="+b.providerNo,c+="&appointment_no="+o+"&apptProvider_no="+r,c+="&appointment_date="+i+"&start_time="+l,c+="&hotclick=&status=t&bNewForm=1"+e,window.open(c,"billingWin","scrollbars=yes, location=no, width="+screen.width+", height="+screen.height,"")}},A.page.currentNoteConfig={},A.getIssueNote=function(){null!=A.page.encounterNote.noteId&&C.getIssueNote(A.page.encounterNote.noteId).then(function(e){var t;null!=e&&(A.page.assignedCMIssues=(t=e.assignedCMIssues)instanceof Array?t:null==t?[]:[t])},function(e){console.log(e)})},A.getCurrentNote=function(e){C.getCurrentNote(p.demographicNo,u.search()).then(function(e){A.page.encounterNote=e,A.page.initNote=e.note,A.getIssueNote(),r.$broadcast("currentlyEditingNote",A.page.encounterNote),A.initAppendNoteEditor(),A.initObservationDate()},function(e){console.log(e)})},A.getCurrentNote(!0),A.editNote=function(e){r.$broadcast("",e)},n.$on("loadNoteForEdit",function(e,t){if(null!==A.page.editingNoteId)return console.log("Note is already being edited! Do you want to save changes?"),void A.displayWarning(t);A.page.encounterNote=angular.copy(t),A.getIssueNote(),A.$storage.hideNote=!1,r.$broadcast("currentlyEditingNote",A.page.encounterNote),A.removeEditingNoteFlag()}),A.initAppendNoteEditor=function(){null!=u.search().noteEditorText&&(A.page.encounterNote.note=A.page.encounterNote.note+u.search().noteEditorText)},A.initObservationDate=function(){null===A.page.encounterNote.observationDate&&(A.page.encounterNote.observationDate=new Date)},n.$on("$stateChangeStart",function(){A.removeEditingNoteFlag()}),A.doSetEditingNoteFlag=function(){C.setEditingNoteFlag(A.page.editingNoteId,b.providerNo).then(function(e){e.success||("Parameter error"==e.message?alert("Parameter Error: noteUUID["+A.page.editingNoteId+"] userId["+b.providerNo+"]"):alert("Warning! Another user is editing this note now."))},function(e){console.log(e)})},A.setEditingNoteFlag=function(){null!=A.page.encounterNote.uuid&&(A.page.isNoteSaved=!1,A.page.editingNoteId=A.page.encounterNote.uuid,null==A.page.itvSet&&(A.page.itvSet=h(A.doSetEditingNoteFlag(),3e4)),null==A.page.itvCheck&&(A.page.itvCheck=h(function(){C.checkEditNoteNew(A.page.editingNoteId,b.providerNo).then(function(e){e.success||(alert("Warning! Another user tries to edit this note. Your update may be replaced by later revision(s)."),h.cancel(A.page.itvCheck),A.page.itvCheck=null)},function(e){console.log(e)})},1e4)))},A.removeEditingNoteFlag=function(){null!=A.page.editingNoteId&&(C.removeEditingNoteFlag(A.page.editingNoteId,b.providerNo),h.cancel(A.page.itvSet),h.cancel(A.page.itvCheck),A.page.itvSet=null,A.page.itvCheck=null,A.page.editingNoteId=null)},A.searchTemplates=function(e){var t={name:e};return N.searchTemplates(t,0,25).then(function(e){for(var t=[],n=0;n<e.templates.length;n++)t.push({encounterTemplateName:e.templates[n].encounterTemplateName});return t},function(e){console.log(e)})},A.insertTemplate=function(e,t,n){N.getTemplate({name:t}).then(function(e){if(null!==e.templates){var t=e.templates[0];A.page.encounterNote.note=A.page.encounterNote.note+t.encounterTemplateValue,A.options={magicVal:""}}},function(e){console.log(e)})},A.displayWarning=function(e){g.open({templateUrl:"src/record/summary/saveWarning.jsp",controller:"Record.Summary.SaveWarningController as saveWarningCtrl",backdrop:"static",size:"md",resolve:{saveSignNote:function(){return A.saveSignNote},cancelNoteEdit:function(){return A.cancelNoteEdit}}}).result.then(function(e){console.log(e)},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)})},A.searchIssues=function(e){console.log("SEARCHING FOR ISSUE: ",e);var t={term:e};return C.searchIssues(t,0,100).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({issueId:e.content[n].id,code:e.content[n].description+"("+e.content[n].code+")"});return e.total,e.content.length,t},function(e){console.log(e)})},A.assignIssue=function(e,t,n){for(var o=0;o<A.page.assignedCMIssues.length;o++)if(A.page.assignedCMIssues[o].issue.id==t)return;C.getIssue(t).then(function(t){var n={acute:!1,certain:!1,issue:t,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};A.page.assignedCMIssues.push(n),r.$broadcast("noteIssueAdded")},function(e){console.log(e)})},A.removeIssue=function(e){console.log("removed issue in record ctrl"),e.unchecked=!0;for(var t=[],n=0;n<A.page.assignedCMIssues.length;n++)A.page.assignedCMIssues[n].issue_id!=e.issue_id&&t.push(A.page.assignedCMIssues[n]);A.page.assignedCMIssues=t,r.$broadcast("noteIssueRemoved")},A.mediumNavItemFilter=function(t){return function(n){var o=-1!=e.inArray(n.label,["Details","Summary","Forms","Tickler","Health Tracker","Rx","Consultations"]);return!0===t?!o:o}},A.demographic.age=Juno.Common.Util.calcAge(A.demographic.dobYear,A.demographic.dobMonth,A.demographic.dobDay),A.init()}])}.call(this,n(4),n(6))},function(e,t,n){"use strict";angular.module("Record.Summary",["Common","Common.Services"])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.SummaryController",["$rootScope","$scope","$http","$location","$stateParams","$state","$filter","$uibModal","$interval","user","noteService","summaryService","securityService","formService",function(e,t,n,o,a,r,i,l,s,c,u,d,p,m){var h=this;function g(){d.getSummaryHeaders(a.demographicNo,"left").then(function(e){h.page.columnOne.modules=e,b(h.page.columnOne.modules)},function(e){console.log(e),h.error=e})}function f(){d.getSummaryHeaders(a.demographicNo,"right").then(function(e){h.page.columnThree.modules=e,b(h.page.columnThree.modules)},function(e){console.log(e),h.error=e})}h.page={},h.page.columnOne={},h.page.columnOne.modules={},h.page.columnThree={},h.page.columnThree.modules={},h.page.selectedNoteHash={},h.index=0,h.busy=!1,h.demographicNo=a.demographicNo,h.user=c,h.noteListComponentRefreshFunction=null,p.hasRight("_eChart","r",a.demographicNo).then(function(e){h.page.canRead=e},function(e){console.log(e)}),p.hasRight("_eChart","u",a.demographicNo).then(function(e){h.page.cannotChange=!e},function(e){console.log(e)}),p.hasRight("_eChart","w",a.demographicNo).then(function(e){h.page.cannotAdd=!e},function(e){console.log(e)}),h.checkAction=function(e){h.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},h.openRx=function(e){win="Rx"+e;var t="../oscarRx/choosePatient.do?demographicNo="+e;window.open(t,win,"scrollbars=yes, location=no, width=900, height=600","")},h.openAllergies=function(e){win="Allergy"+e;var t="../oscarRx/showAllergy.do?demographicNo="+e;return window.open(t,win,"scrollbars=yes, location=no, width=900, height=600",""),!1},h.openPreventions=function(e){win="prevention"+e;var t="../oscarPrevention/index.jsp?demographic_no="+e;return window.open(t,win,"scrollbars=yes, location=no, width=900, height=600",""),!1},h.openAddForms=function(){r.go("record.forms.add")},h.openCompletedForms=function(){r.go("record.forms.completed")},h.findGroupNote=function(e){for(var t=h.page.columnOne.modules,n=0;n<t.length;n++)for(var o=t[n].summaryItem,a=0;a<o.length;a++)if(o[a].noteId===e.noteId)return{note:o[a],module:t[n]};return null},h.bubbleUpEditNoteCallback=function(e,n,o){t.$emit("loadNoteForEdit",e)},h.trackerUrl="",h.getTrackerUrl=function(e){h.trackerUrl="../oscarEncounter/oscarMeasurements/HealthTrackerPage.jspf?template=tracker&demographic_no="+e+"&numEle=4&tracker=slim"},g(),f();var v={};function b(e){for(var t=0;t<e.length;t++)v[e[t].summaryCode]=e[t],d.getFullSummary(a.demographicNo,e[t].summaryCode).then(function(e){angular.isDefined(e.summaryItem)&&(e.summaryItem instanceof Array?v[e.summaryCode].summaryItem=e.summaryItem:v[e.summaryCode].summaryItem=[e.summaryItem])},function(e){console.log(e)})}h.onEditCpp=function(e,t,n){var o=h.findGroupNote(e);null!==o&&l.open({templateUrl:"src/record/summary/groupNotes.jsp",controller:"Record.Summary.GroupNotesController as groupNotesCtrl",backdrop:"static",windowClass:"notesModal",size:"lg",resolve:{mod:function(){return o.module},action:function(){return 0},user:function(){return h.user},note:function(){return e}}}).result.then(t,n)},h.editGroupedNotes=function(e,t,n,o,a){l.open({templateUrl:"src/record/summary/groupNotes.jsp",controller:"Record.Summary.GroupNotesController as groupNotesCtrl",backdrop:"static",windowClass:"notesModal",size:e,resolve:{mod:function(){return t},action:function(){return n},user:function(){return h.user}}}).result.then(function(e){angular.isFunction(o)&&o(e),h.refreshModel()},function(e){angular.isFunction(a)&&a(e)})},h.refreshModel=function(){angular.isFunction(h.noteListComponentRefreshFunction)&&h.noteListComponentRefreshFunction(),g(),f()},t.$on("summary_page_refresh",function(e){e&&h.refreshModel()}),h.gotoState=function(e,t,n,o){if("add"==e)h.editGroupedNotes("md",t,null,n,o);else if("add"==e.action&&"dx_reg"==e.type)h.editGroupedNotes("lg",t,e.id,n,o);else{if("lab"==e.type||"document"==e.type||"rx"==e.type||"allergy"==e.type||"prevention"==e.type||"dsguideline"==e.type)return"rx"==e.type?win="Rx"+a.demographicNo:"allergy"==e.type?win="Allergy"+a.demographicNo:"prevention"==e.type?win="prevention"+a.demographicNo:win="win_item.type_",window.open(e.action,win,"scrollbars=yes, location=no, width=900, height=600",""),!1;"eform"===e.type?m.openEFormInstancePopup(a.demographicNo,e.id).then(function(e){h.refreshModel()}):"form"===e.type?m.openFormInstancePopup(e.displayName,a.demographicNo,null,e.id).then(function(e){h.refreshModel()}):"action"==e.action?h.editGroupedNotes("lg",t,e.id,n,o):r.transitionTo(e.action,{demographicNo:a.demographicNo,type:e.type,id:e.id},{location:"replace",notify:!0})}},h.viewEform=function(e){r.transitionTo("record.forms.view",{demographicNo:a.demographicNo,type:"eform",id:e},{location:"replace",notify:!0})},h.viewDocument=function(e){let t=v.incoming.summaryItem,n=null;for(let o=0;o<t.length;o++)if(t[o].id===e){n=t[o];break}null!=n?h.gotoState(n):console.error("item not linked to valid document id:"+e)},h.showPrintModal=function(){console.info(h.page.selectedNoteHash);var e=[];Object.keys(h.page.selectedNoteHash).forEach(function(t){var n=h.page.selectedNoteHash[t];e.push(n)}),console.info(e),l.open({templateUrl:"src/record/print.jsp",controller:"Record.Summary.RecordPrintController as recordPrintCtrl",backdrop:"static",size:"lg",resolve:{selectedNoteList:function(){return e}}}).result.then(function(e){console.log(e)},function(e){console.log(e)})},h.onSummaryModAdd=function(e,t,n){"othermeds"===e.summaryCode||"ongoingconcerns"===e.summaryCode||"medhx"===e.summaryCode||"sochx"===e.summaryCode||"famhx"===e.summaryCode||"reminders"===e.summaryCode||"riskfactors"===e.summaryCode?h.editGroupedNotes("md",e,null,t,n):"meds"===e.summaryCode?h.openRx(h.demographicNo):"allergies"===e.summaryCode?h.openAllergies(h.demographicNo):"forms"===e.summaryCode?h.openAddForms():"preventions"===e.summaryCode&&h.openPreventions(h.demographicNo)},h.onSummaryModClickTitle=function(e){"forms"===e.summaryCode&&h.openCompletedForms()},h.isModTitleClickable=function(e){return"forms"===e.summaryCode},h.hideSummaryModuleDate=function(e){switch(e.summaryCode){case"meds":case"othermeds":case"ongoingconcerns":case"medhx":case"sochx":case"famhx":case"reminders":case"riskfactors":case"allergies":return!0;default:return!1}},h.registerEncNoteListFunctions=function(e){h.noteListComponentRefreshFunction=e}}])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.RecordPrintController",["$uibModal","$uibModalInstance","$stateParams","selectedNoteList",function(e,t,n,o){var a=this;a.printTypeEnum=Object.freeze({all:"all",dates:"dates",selected:"selected"}),a.page={selectedWarning:!1},a.pageOptions={printType:a.printTypeEnum.all,dates:{},selectedList:o},a.pageOptions.selectedList.length>0&&(a.pageOptions.printType=a.printTypeEnum.selected),a.printToday=function(){a.pageOptions.printType=a.printTypeEnum.dates;var e=new Date;a.pageOptions.dates.start=e,a.pageOptions.dates.end=e},a.cancelPrint=function(){t.dismiss("cancel")},a.sendToPhr=function(){var e="demographic_no="+n.demographicNo;e+="&module=echart",a.pageOptions.printType===a.printTypeEnum.all?e+="&notes2print=ALL_NOTES":a.pageOptions.printType===a.printTypeEnum.selected?e=e+"&notes2print="+a.pageOptions.selectedList.join():a.pageOptions.printType===a.printTypeEnum.dates&&(e=(e=(e+="&notes2print=ALL_NOTES")+"&startDate="+a.pageOptions.dates.start.getTime())+"&endDate="+a.pageOptions.dates.end.getTime()),a.pageOptions.cpp&&(e+="&printCPP=true"),a.pageOptions.cpp&&(e+="&printRx=true"),a.pageOptions.cpp&&(e+="&printLabs=true"),console.log("QS"+e),a.pageOptions.printType!==a.printTypeEnum.selected||0!==a.pageOptions.selectedList.length?(a.page.selectedWarning=!1,window.open("../SendToPhr.do?"+e,"_blank")):a.page.selectedWarning=!0},a.print=function(){if(a.pageOptions.printType!==a.printTypeEnum.selected||0!==a.pageOptions.selectedList.length){a.page.selectedWarning=!1;var e=encodeURIComponent(JSON.stringify(a.pageOptions));window.open("../ws/rs/recordUX/"+n.demographicNo+"/print?printOps="+e,"_blank")}else a.page.selectedWarning=!0}}])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.GroupNotesController",["$scope","$uibModal","$uibModalInstance","$stateParams","$state","$interval","mod","action","user","noteService","securityService","diseaseRegistryService",function(e,t,n,o,a,r,i,l,s,c,u,d){var p=this;p.page={},p.page.title=i.displayName,p.page.items=i.summaryItem,p.page.quickLists=[],p.page.code=i.summaryCode,p.groupNotesForm={assignedCMIssues:[]},p.groupNotesForm.encounterNote={position:1},p.working=!1;var m=new Date;p.groupNotesForm.annotation_attrib="anno"+m.getTime(),u.hasRight("_eChart","u",o.demographicNo).then(function(e){p.page.cannotChange=!e},function(e){console.log(e)}),d.getIssueQuickLists().then(function(e){p.page.quickLists=e},function(e){console.log(e)}),p.addDxItem=function(e){for(var t=0;t<p.groupNotesForm.assignedCMIssues.length;t++)if(p.groupNotesForm.assignedCMIssues[t].issue.code===e.code&&p.groupNotesForm.assignedCMIssues[t].issue.type===e.codingSystem)return;d.findDxIssue(e.code,e.codingSystem).then(function(e){var t={acute:!1,certain:!1,issue:e,issue_id:e.id,major:!1,resolved:!1,unsaved:!0};p.groupNotesForm.assignedCMIssues.push(t)},function(e){console.log(e)})},p.checkAction=function(e){p.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},p.isWorking=function(){return p.working},displayIssueId=function(e){c.getIssueId(e).then(function(e){p.page.issueId=e.id},function(e){console.log(e)})},displayIssueId(p.page.code),displayGroupNote=function(e,t){if(null!=p.page.items[t].noteId)c.getIssueNote(p.page.items[t].noteId).then(function(e){p.groupNotesForm.encounterNote=e.encounterNote,p.groupNotesForm.encounterNote.editorNames=i.editorNames,p.groupNotesForm.groupNoteExt=e.groupNoteExt,p.groupNotesForm.assignedCMIssues=e.assignedCMIssues,p.groupNotesForm.assignedCMIssues=[],e.assignedCMIssues instanceof Array?p.groupNotesForm.assignedCMIssues=e.assignedCMIssues:null!=e.assignedCMIssues&&p.groupNotesForm.assignedCMIssues.push(e.assignedCMIssues),l=t,p.setAvailablePositions(),p.groupNotesForm.encounterNote.position<1&&(p.groupNotesForm.encounterNote.position=1)},function(e){console.log(e)});else if("dx_reg"===p.page.items[t].type){p.groupNotesForm.assignedCMIssues=[];var n=p.page.items[t].extra;d.findDxIssue(n.code,n.codingSystem).then(function(e){var n={acute:!1,certain:!1,issue:e,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};console.log("find like issue ",n,e),p.groupNotesForm.assignedCMIssues.push(n),p.groupNotesForm.encounterNote={},p.groupNotesForm.groupNoteExt={},p.groupNotesForm.encounterNote={position:1},l=t},function(e){console.log(e)})}},null!=l&&displayGroupNote(p.page.items,l),p.setAvailablePositions=function(){if(p.availablePositions=[],null==p.page.items||0==p.page.items.length)p.availablePositions.push(1);else{var e=0;for(e=0;e<p.page.items.length;e++)p.availablePositions.push(e+1);null==l&&p.availablePositions.push(e+1)}},p.setAvailablePositions(),p.changeNote=function(e,t){return displayGroupNote(e,t)},p.saveGroupNotes=function(){p.isWorking()||(p.working=!0,null==p.groupNotesForm.encounterNote.noteId&&(p.groupNotesForm.encounterNote.noteId=0),p.groupNotesForm.encounterNote.cpp=!0,p.groupNotesForm.encounterNote.editable=!0,p.groupNotesForm.encounterNote.isSigned=!0,p.groupNotesForm.encounterNote.observationDate=new Date,p.groupNotesForm.encounterNote.appointmentNo=o.appointmentNo,p.groupNotesForm.encounterNote.encounterType="",p.groupNotesForm.encounterNote.encounterTime="",p.groupNotesForm.encounterNote.assignedIssues=p.groupNotesForm.assignedCMIssues,p.groupNotesForm.encounterNote.summaryCode=p.page.code,c.saveIssueNote(o.demographicNo,p.groupNotesForm).then(function(e){n.close(e.body),a.transitionTo(a.current,o,{reload:!1,inherit:!1,notify:!0}),p.working=!1},function(e){console.log(e),p.working=!1}))},p.removeGroupNoteIssue=function(e){console.log("removing issue"),e.unchecked=!0;for(var t=[],n=0;n<p.groupNotesForm.assignedCMIssues.length;n++)p.groupNotesForm.assignedCMIssues[n].issue_id!=e.issue_id&&t.push(p.groupNotesForm.assignedCMIssues[n]);p.groupNotesForm.assignedCMIssues=t,console.log("NEW LIST: ",t)},p.removeIssue=function(e){e.unchecked=!0},p.restoreIssue=function(e){e.unchecked=!1},p.archiveGroupNotes=function(){p.isWorking()||(p.groupNotesForm.encounterNote.archived=!0,p.saveGroupNotes())},p.cancel=function(){n.dismiss("cancel")},p.openRevisionHistory=function(e){console.log(p.groupNotesForm);var t=Math.round(1e3*Math.random());win="win"+t;var n="../CaseManagementEntry.do?method=notehistory&noteId="+e.noteId;window.open(n,win,"scrollbars=yes, location=no, width=647, height=600","")},p.searchIssues=function(e){var t={term:e};return c.searchIssues(t,0,100).then(function(e){for(var t=[],n=0;n<e.content.length;n++)t.push({issueId:e.content[n].id,code:e.content[n].description+"("+e.content[n].code+")"});return e.total,e.content.length,t},function(e){console.log(e)})},p.assignIssue=function(e,t,n){for(var o=0;o<p.groupNotesForm.assignedCMIssues.length;o++)if(p.groupNotesForm.assignedCMIssues[o].issue.id==t)return;c.getIssue(t).then(function(t){var n={acute:!1,certain:!1,issue:t,issue_id:e.issueId,major:!1,resolved:!1,unsaved:!0};p.groupNotesForm.assignedCMIssues.push(n)},function(e){console.log(e)})},p.isSelected=function(e){if(e.id==l)return"group-note-selected"},p.addToDxRegistry=function(e){d.addToDxRegistry(o.demographicNo,e).then(function(e){console.log(e)},function(e){console.log(e)})}}])},function(e,t){angular.module("Record.Summary").controller("Record.Summary.SaveWarningController",["$rootScope","$scope","$uibModal","$uibModalInstance","saveSignNote","cancelNoteEdit",function(e,t,n,o,a,r){this.cancel=function(){o.dismiss("cancel")},this.save=function(){angular.isFunction(a)&&a(),o.close(!0)},this.clearChanges=function(){angular.isFunction(r)&&r(),o.close(!0)}}])},function(e,t){angular.module("Record.Summary").component("summaryModule",{templateUrl:"src/record/summary/summaryModuleTemplate.jsp",bindings:{module:"<",itemDisplayCount:"<",maxItemNameLength:"<",hideDate:"<?",onclickItem:"&",onclickAdd:"&",onclickTitle:"&?",clickableTitle:"<",enableFilter:"<",enableAddButton:"<"},controller:[function(){var e=this;e.displayDateFormat=Juno.Common.Util.DisplaySettings.dateFormat,e.$onInit=function(){e.itemFilter=null,e.showAllItems=!1,e.itemDisplayCount=e.itemDisplayCount||5,e.enableFilter=e.enableFilter||!1,e.enableAddButton=e.enableAddButton||!1,e.clickableTitle=e.clickableTitle||!1,e.maxItemNameLength=e.maxItemNameLength||34,e.onclickItem=e.onclickItem||null,e.onclickAdd=e.onclickAdd||null,e.onclickTitle=e.onclickTitle||null,e.hideDate=e.hideDate||!1},e.$onChanges=function(t){Juno.Common.Util.exists(t.itemDisplayCount)&&(e.itemDisplayCount=t.itemDisplayCount.currentValue),Juno.Common.Util.exists(t.module)&&(e.module=t.module.currentValue),Juno.Common.Util.exists(t.enableAddButton)&&(e.enableAddButton=t.enableAddButton.currentValue),Juno.Common.Util.exists(t.enableFilter)&&(e.enableFilter=t.enableFilter.currentValue)},e.itemCallback=function(t){e.onclickItem({module:e.module,item:t,successCallback:function(e){},dismissCallback:function(e){}})},e.addBtnCallback=function(){e.onclickAdd({module:e.module,successCallback:function(e){},dismissCallback:function(e){}})},e.clickTitleCallback=function(){null!==e.onclickTitle&&e.onclickTitle({module:e.module})},e.toggleShowAllItems=function(){e.showAllItems=!e.showAllItems}}]})},function(e,t){angular.module("Record.Summary").component("encounterNote",{templateUrl:"src/record/summary/encounterNoteTemplate.jsp",bindings:{note:"<?",onEditCpp:"&?",onEditNote:"&?",onToggleSelect:"&?",minimized:"<?",selectedForPrint:"<?"},controller:["$scope","$state","$stateParams","formService",function(e,t,n,o){var a=this;a.displayDateFormat=Object.freeze(Juno.Common.Util.DisplaySettings.dateFormat),a.$onInit=function(){a.inOpenEdit=!1,a.note=a.note||{},a.onEditCpp=a.onEditCpp||null,a.onEditNote=a.onEditNote||null,a.onToggleSelect=a.onToggleSelect||null,a.minimized=a.minimized||!1,a.selectedForPrint=a.selectedForPrint||!1},a.$onChanges=function(e){Juno.Common.Util.exists(e.note)&&(a.note=e.note.currentValue),Juno.Common.Util.exists(e.minimized)&&(a.minimized=e.minimized.currentValue)},a.showNoteViewButton=function(){return a.note.eformData||a.note.document||a.note.encounterForm},a.viewButtonClick=function(){a.note.eformData&&a.note.eformDataId?o.openEFormInstancePopup(n.demographicNo,a.note.eformDataId).then(function(){e.$emit("summary_page_refresh",!0)}):a.note.document&&a.note.documentId&&a.viewDocument(a.note.documentId),a.note.encounterForm&&o.openFormInstancePopup(a.note.note,n.demographicNo,null,a.note.encounterFormId).then(function(){e.$emit("summary_page_refresh",!0)})},a.showNoteEditButton=function(){return a.note.editable&&(a.isRegularNote()||a.note.cpp&&!a.note.archived&&!a.note.ticklerNote)},a.editButtonClick=function(){a.isRegularNote()?angular.isFunction(a.onEditNote)&&(a.inOpenEdit=!0,a.onEditNote({note:angular.copy(a.note),successCallback:function(e){a.inOpenEdit=!1,console.info("callback success",e),angular.copy(e,a.note),a.note.revision=Number(a.note.revision)+1},dismissCallback:function(e){a.inOpenEdit=!1}})):a.note.cpp&&angular.isFunction(a.onEditCpp)&&(a.inOpenEdit=!0,a.onEditCpp({note:angular.copy(a.note),successCallback:function(e){a.inOpenEdit=!1,console.info("callback success",e),angular.copy(e,a.note),a.note.revision=Number(a.note.revision)+1},dismissCallback:function(e){a.inOpenEdit=!1}}))},a.toggleMinimizeNote=function(){a.minimized=!a.minimized},a.isNoteMinimized=function(){return a.minimized},a.isNoteExpanded=function(){return!a.isNoteMinimized()},a.toggleIsSelectedForPrint=function(){a.selectedForPrint=!a.selectedForPrint,angular.isFunction(a.onToggleSelect)&&a.onToggleSelect({note:a.note,selected:a.selectedForPrint})},a.isSelectedForPrint=function(){return a.selectedForPrint},a.getNoteHeader=function(){return a.note.note.trim().split("\n")[0]},a.allowNoteExpansion=function(){return!(!0===a.note.cpp||!0===a.note.document||!0===a.note.eformData||a.note.encounterForm)},a.isUnsignedEncounterNote=function(){return!(a.note.isSigned||a.note.cpp||a.note.document||a.note.ticklerNote||a.note.eformData||a.note.encounterForm)},a.isRegularNote=function(){return!(a.note.document||a.note.rxAnnotation||a.note.eformData||a.note.encounterForm||a.note.invoice||a.note.ticklerNote||a.note.cpp)},a.openRevisionHistory=function(){var e="../CaseManagementEntry.do?method=notehistory&noteId="+a.note.noteId;window.open(e,"revision","scrollbars=yes, location=no, width=647, height=600","")},a.viewDocument=function(e){var t="../dms/showDocument.jsp?inWindow=true&segmentID="+e+"&status=A";window.open(t,"revision","scrollbars=yes, location=no, width=647, height=600","")}}]})},function(e,t,n){(function(e){angular.module("Record.Summary").component("encounterNoteList",{templateUrl:"src/record/summary/encounterNoteListTemplate.jsp",bindings:{userId:"<",selectedNoteHash:"=",onEditCpp:"&",onEditNote:"&",registerFunctions:"&"},controller:["$scope","$stateParams","noteService","providerService",function(t,n,o,a){var r=this;r.$onInit=function(){r.filter={onlyNotes:!1,onlyMine:!1,textFilter:null},r.enableFilterHeader=!1,r.showFilters=!0,r.noteList=[],r.openNote={},r.index=0,r.busy=!1,r.moreNotes=!0,r.userId=r.userId||null,r.selectedNoteHash=r.selectedNoteHash||{},r.onEditCpp=r.onEditCpp||null,r.onEditNote=r.onEditNote||null,r.registerFunctions=r.registerFunctions||null,a.getSettings().then(function(e){r.providerSettings=e}),angular.isFunction(r.registerFunctions)&&r.registerFunctions({refresh:r.refresh})},r.bubbleUpEditCppCallback=function(e,t,n){r.onEditCpp({note:e,successCallback:t,dismissCallback:n})},r.bubbleUpEditNoteCallback=function(e,t,n){r.openNote={noteId:e.noteId,successCallback:t,dismissCallback:n},r.onEditNote({note:e,successCallback:t,dismissCallback:n})},t.$on("noteSaved",function(e,t){Juno.Common.Util.exists(r.openNote.noteId)&&Number(r.openNote.noteId)>0?angular.isFunction(r.openNote.successCallback)&&(r.openNote.successCallback(t),r.openNote={}):(t.revision=1,r.noteList.unshift(t))}),t.$on("stopEditingNote",function(){angular.isFunction(r.openNote.dismissCallback)&&(r.openNote.dismissCallback(),r.openNote={})}),r.onSelectionStateChange=function(e,t){t?r.selectedNoteHash[e.noteId]=e:delete r.selectedNoteHash[e.noteId]},r.toggleShowFilters=function(){r.showFilters=!r.showFilters},r.clearFilters=function(){r.filter.onlyMine=!1,r.filter.onlyNotes=!1,r.filter.textFilter=null},r.showNote=function(e){return(!r.filter.onlyNotes||!(e.document||e.rxAnnotation||e.eformData||e.encounterForm||e.invoice||e.ticklerNote||e.cpp))&&((!r.filter.onlyMine||r.userId===e.providerNo)&&(!(!Juno.Common.Util.isBlank(r.filter.textFilter)&&!e.note.toLowerCase().includes(r.filter.textFilter.toLowerCase()))&&!e.deleted))},r.setNoteMinimized=function(t){var n=r.providerSettings.cmeNoteDate,o=!1;if(Juno.Common.Util.exists(n)&&Juno.Common.Util.isIntegerString(n)){var a=e().add(n,"months"),i=e(t.observationDate);o=a.isAfter(i,"days")}return o},r.addMoreItems=function(){r.busy||(r.busy=!0,o.getNotesFrom(n.demographicNo,r.index,20,{}).then(function(e){if(angular.isDefined(e.notelist)){if(e.notelist instanceof Array)for(var t=0;t<e.notelist.length;t++)r.noteList.push(e.notelist[t]);else r.noteList.push(e.notelist);r.index=r.noteList.length}angular.isDefined(e.moreNotes)&&(r.moreNotes=e.moreNotes),r.busy=!1},function(e){console.error(e),r.error=e,r.busy=!1}))},r.refresh=function(){r.index=0,r.noteList=[],r.moreNotes=!0,r.addMoreItems()}}]})}).call(this,n(6))},function(e,t,n){"use strict";angular.module("Record.Forms",["Common","Common.Services"])},function(e,t,n){"use strict";n.r(t);var o=n(5);angular.module("Record.Forms").controller("Record.Forms.FormController",["$scope","$http","$location","$stateParams","$state","demographicService","demo","formService","user","securityService","NgTableParams","$uibModal",function(e,t,n,a,r,i,l,s,c,u,d,p){var m=this;switch(e.FORM_CONTROLLER_STATES=o.FORM_CONTROLLER_STATES,m.demographicNo=a.demographicNo,m.providerNo=c.providerNo,m.appointmentNo=a.appointmentNo,m.viewState=a.viewState,m.formSearchStr="",m.groupSelection=o.FORM_CONTROLLER_SPECIAL_GROUPS.SELECT_ALL,m.groupSelectedForms=null,e.displayFormList=[],u.hasRights({items:[{objectName:"_admin",privilege:"w"},{objectName:"_admin.eform",privilege:"w"}]}).then(function(e){m.adminAccess=e.content[0],m.adminEformAccess=e.content[1],null!=e.content&&2===e.content.length?(m.adminAccess||m.adminEformAccess)&&(m.hasAdminAccess=!0):alert("failed to load rights")},function(e){console.error(e)}),m.getCompletedForms=function(){s.getCompletedEncounterForms(a.demographicNo).then(function(t){e.displayFormList=Juno.Common.Util.toArray(t.list),m.ensureSubjectNotNull(e.displayFormList)},function(e){console.error(e)})},m.getFormsToAdd=function(){s.getAddForms(a.demographicNo).then(function(t){e.displayFormList=Juno.Common.Util.toArray(t.list),m.ensureSubjectNotNull(e.displayFormList)},function(e){console.error(e)})},m.getFormRevisions=function(){s.getRevisionForms(a.demographicNo).then(function(t){e.displayFormList=Juno.Common.Util.toArray(t.list),m.ensureSubjectNotNull(e.displayFormList)},function(e){console.error(e)})},m.getDeletedForms=function(){s.getDeletedForms(a.demographicNo).then(function(t){e.displayFormList=Juno.Common.Util.toArray(t.list),m.ensureSubjectNotNull(e.displayFormList)},function(e){console.error(e)})},m.ensureSubjectNotNull=function(e){e.forEach(function(e){null===e.subject&&(e.subject="")})},m.onModeChange=function(e){switch(m.viewState=e,e){case o.FORM_CONTROLLER_STATES.ADD:n.url("/record/"+m.demographicNo+"/forms/add"),m.getFormsToAdd();break;case o.FORM_CONTROLLER_STATES.COMPLETED:n.url("/record/"+m.demographicNo+"/forms/completed"),m.getCompletedForms();break;case o.FORM_CONTROLLER_STATES.REVISION:n.url("/record/"+m.demographicNo+"/forms/revisions"),m.getFormRevisions();break;case o.FORM_CONTROLLER_STATES.DELETED:n.url("/record/"+m.demographicNo+"/forms/deleted"),m.getDeletedForms()}},m.onGroupChange=function(e,t){m.groupSelection=e,m.groupSelectedForms=t},e.onFilterForms=function(e,t,n){let a=!0;switch(m.groupSelection){case o.FORM_CONTROLLER_SPECIAL_GROUPS.SELECT_ALL:a=!0;break;case o.FORM_CONTROLLER_SPECIAL_GROUPS.SELECT_FORM:a=e.type===o.FORM_CONTROLLER_FORM_TYPES.FORM;break;case o.FORM_CONTROLLER_SPECIAL_GROUPS.SELECT_EFORM:a=e.type===o.FORM_CONTROLLER_FORM_TYPES.EFORM;break;default:let t=m.groupSelectedForms.find(function(t){return t.id===e.formId});a=void 0!==t&&null!==t}let r=!0;return m.formSearchStr.length>0&&(r=-1!==e.name.toUpperCase().search(".*"+m.formSearchStr.toUpperCase()+".*")),a&&r},m.openManageForms=function(){window.open("../administration/?show=Forms","popUpWindow","height=700,width=1200,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no")},m.showEditPopup=function(){window.open("../administration/?show=Forms&load=Groups","popUpWindow","height=700,width=1200,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no")},m.viewState){case o.FORM_CONTROLLER_STATES.ADD:m.getFormsToAdd();break;case o.FORM_CONTROLLER_STATES.COMPLETED:m.getCompletedForms();break;case o.FORM_CONTROLLER_STATES.REVISION:m.getFormRevisions();break;case o.FORM_CONTROLLER_STATES.DELETED:m.getDeletedForms()}}])},function(e,t,n){"use strict";n.r(t);var o=n(5);angular.module("Record.Forms").component("formViewComponent",{templateUrl:"src/record/forms/components/formView/formView.jsp",bindings:{formList:"=",providerNo:"<",viewState:"<",instancedForms:"<",filterForms:"&",reloadForms:"&"},controller:["formService","$scope","$stateParams","NgTableParams",function(e,t,n,a){let r=this;t.FORM_CONTROLLER_FORM_TYPES=o.FORM_CONTROLLER_FORM_TYPES,r.sortMode=o.FORM_CONTROLLER_SORT_MODES.FORM_NAME,r.openEForm=function(t){r.instancedForms?e.openEFormInstancePopup(n.demographicNo,t.id).then(function(e){r.reloadForms({})}):e.openEFormPopup(n.demographicNo,t.formId).then(function(e){r.reloadForms({})})},r.openForm=function(t){r.instancedForms?e.openFormInstancePopup(t.name,n.demographicNo,n.appointmentNo,t.id).then(function(e){r.reloadForms({})}):e.openFormPopup(r.providerNo,n.demographicNo,n.appointmentNo,t.subject).then(function(e){r.reloadForms({})})},r.doFilterForms=function(e,t,n){return r.filterForms({form:e,index:t,array:n})},r.deleteForm=function(t,n){confirm("Are you sure you want to delete this eform?")&&e.deleteForm(t,n).then(function(e){r.formList.splice(r.formList.findIndex(function(e){return e.id===t&&e.type===n}),1)},function(e){console.error("Failed to delete Form, id: "+t)})},r.restoreForm=function(t,n){confirm("Are you sure you want to restore this eform?")&&e.restoreForm(t,n).then(function(e){r.formList.splice(r.formList.findIndex(function(e){return e.id===t&&e.type===n}),1)},function(e){console.error("Failed to restore form: "+t)})},r.$onInit=function(){switch(r.tableParams=new a({page:1,count:-1,sorting:{name:"asc"}},{getData:function(e){r.sortMode=e.orderBy()}}),r.cols=[{title:"Form Name",field:"name",visible:!0,sortable:"name",displayClass:"col-md-3"},{title:"Additional Information",field:"subject",visible:!0,sortable:"subject",displayClass:"col-md-5"},{title:"Modified Date",field:"date",visible:!0,sortable:"date",displayClass:"col-md-2"}],r.viewState){case o.FORM_CONTROLLER_STATES.COMPLETED:r.cols.push({title:"Action",field:"delete",visible:!0,displayClass:"col-md-1"});break;case o.FORM_CONTROLLER_STATES.REVISION:r.cols.push({title:"Creation Date",field:"createDate",sortable:"createDate",visible:!0,displayClass:"col-md-2"});break;case o.FORM_CONTROLLER_STATES.DELETED:r.cols.push({title:"Action",field:"restore",visible:!0,displayClass:"col-md-1"})}}}]})},function(e,t,n){"use strict";n.r(t);var o=n(5);angular.module("Record.Forms").component("modeSelectorComponent",{templateUrl:"src/record/forms/components/modeSelector/modeSelector.jsp",bindings:{modeChange:"&",viewState:"<"},controller:function(){let e=this;e.FORM_CONTROLLER_STATES=o.FORM_CONTROLLER_STATES,e.onModeChange=function(t){e.modeChange({mode:t})}}})},function(e,t,n){"use strict";n.r(t);var o=n(5);angular.module("Record.Forms").component("groupSelectorComponent",{templateUrl:"src/record/forms/components/groupSelector/groupSelector.jsp",bindings:{groupChange:"&",groupSelection:"<"},controller:["formService",function(e){let t=this;t.FORM_CONTROLLER_SPECIAL_GROUPS=o.FORM_CONTROLLER_SPECIAL_GROUPS,t.onGroupChange=function(e,n){t.groupChange({groupId:e,selectedForms:n})},t.groups=[],e.getFormGroups().then(function(e){t.groups=e},function(e){console.error("Failed to fetch groups")})}]})},function(e,t,n){"use strict";angular.module("Record.Details",["Common","Common.Services","ui.bootstrap.popover"])},function(e,t,n){"use strict";n.r(t),function(e){var t=n(14),o=n(13);function a(e,t,n,o,a){if(null==t)return a;var r=n[e];return null!=r&&null!=o[r]?o[r].value!=t&&a.push({id:o[r].id,key:e,value:t,hidden:o[r].hidden}):a.push({key:e,value:t}),a}angular.module("Record.Details").controller("Record.Details.DetailsController",["$scope","$http","$location","$stateParams","$state","$window","$uibModal","$httpParamSerializer","$sce","demographicService","demographicsService","errorsService","providersService","patientDetailStatusService","securityService","staticDataService","referralDoctorsService","user",function(n,h,g,f,v,b,S,C,N,y,_,A,D,w,R,I,P,T){var E=this;E.page={};var k,U,M,O,L,F,x,H,j,J,$,B,V,G,W,Y,K={},q={},z="Check to set preferred contact number",Q="Preferred contact number";let Z=new o.SystemPreferenceApi(h,C,"../ws/rs");E.eligibilityMsg=N.trustAsHtml("..."),E.showEligibility=!1,E.properties=n.$parent.recordCtrl.properties,E.displayMessages=A.factory(),E.init=function(){y.getDemographic(f.demographicNo).then(function(e){if(E.page.demo=e,E.initDemographicVars(),E.checkAccess(),D.getBySecurityRole("doctor").then(function(e){E.page.doctors=e}),D.getBySecurityRole("nurse").then(function(e){E.page.nurses=e}),D.getBySecurityRole("midwife").then(function(e){E.page.midwives=e}),y.getDemographicContacts(E.page.demo.demographicNo,"personal").then(function(e){E.page.demoContacts=p(e)}),y.getDemographicContacts(E.page.demo.demographicNo,"professional").then(function(e){E.page.demoContactPros=p(e)}),null!=E.page.demo.notes&&(E.page.demo.scrNotes=E.page.demo.notes,/^<unotes>[\s\S]*/.test(E.page.demo.scrNotes)&&(E.page.demo.scrNotes=E.page.demo.scrNotes.substring("<unotes>".length)),/[\s\S]*<\/unotes>$/.test(E.page.demo.scrNotes)&&(E.page.demo.scrNotes=E.page.demo.scrNotes.substring(0,E.page.demo.scrNotes.lastIndexOf("</unotes>")))),null!=E.page.demo.familyDoctor){var t=E.formatDocOutput(E.page.demo.familyDoctor);E.page.demo.scrReferralDocNo=t.number,E.page.demo.scrReferralDoc=t.name}if(null!=E.page.demo.familyDoctor2){var n=E.formatDocOutput(E.page.demo.familyDoctor2);E.page.demo.scrFamilyDocNo=n.number,E.page.demo.scrFamilyDoc=n.name}if(null!=E.page.demo.extras){E.page.demo.extras=m(E.page.demo.extras);for(var o=0;o<E.page.demo.extras.length;o++)"demo_cell"==E.page.demo.extras[o].key?E.page.demo.scrDemoCell=E.page.demo.extras[o].value:"aboriginal"==E.page.demo.extras[o].key?E.page.demo.scrAboriginal=E.page.demo.extras[o].value:"hPhoneExt"==E.page.demo.extras[o].key?E.page.demo.scrHPhoneExt=E.page.demo.extras[o].value:"wPhoneExt"==E.page.demo.extras[o].key?E.page.demo.scrWPhoneExt=E.page.demo.extras[o].value:"cytolNum"==E.page.demo.extras[o].key?E.page.demo.scrCytolNum=E.page.demo.extras[o].value:"phoneComment"==E.page.demo.extras[o].key?E.page.demo.scrPhoneComment=E.page.demo.extras[o].value:"paper_chart_archived"==E.page.demo.extras[o].key?E.page.demo.scrPaperChartArchived=E.page.demo.extras[o].value:"paper_chart_archived_date"==E.page.demo.extras[o].key?E.page.demo.scrPaperChartArchivedDate=E.page.demo.extras[o].value:"usSigned"==E.page.demo.extras[o].key?E.page.demo.scrUsSigned=E.page.demo.extras[o].value:"privacyConsent"==E.page.demo.extras[o].key?E.page.demo.scrPrivacyConsent=E.page.demo.extras[o].value:"informedConsent"==E.page.demo.extras[o].key?E.page.demo.scrInformedConsent=E.page.demo.extras[o].value:"securityQuestion1"==E.page.demo.extras[o].key?E.page.demo.scrSecurityQuestion1=E.page.demo.extras[o].value:"securityAnswer1"==E.page.demo.extras[o].key?E.page.demo.scrSecurityAnswer1=E.page.demo.extras[o].value:"rxInteractionWarningLevel"==E.page.demo.extras[o].key&&(E.page.demo.scrRxInteractionLevel=E.page.demo.extras[o].value),K[E.page.demo.extras[o].key]=o}if(E.page.demo.scrCellPhone=d(E.page.demo.scrDemoCell),E.page.demo.scrHomePhone=d(E.page.demo.phone),E.page.demo.scrWorkPhone=d(E.page.demo.alternativePhone),null!=E.page.demo.waitingListNames&&null!=E.page.demo.waitingListNames.id){var a={};a.id=E.page.demo.waitingListNames.id,a.name=E.page.demo.waitingListNames.name,a.groupNo=E.page.demo.waitingListNames.groupNo,a.providerNo=E.page.demo.waitingListNames.providerNo,a.createDate=E.page.demo.waitingListNames.createDate,a.isHistory=E.page.demo.waitingListNames.isHistory,E.page.demo.waitingListNames=[a]}E.page.cellPhonePreferredMsg=z,E.page.homePhonePreferredMsg=z,E.page.workPhonePreferredMsg=z,u(E.page.demo.scrDemoCell)?(E.page.demo.scrPreferredPhone="C",E.page.preferredPhoneNumber=E.page.demo.scrCellPhone,E.page.cellPhonePreferredMsg=Q,E.page.cellPhonePreferredColor="#ffff99"):u(E.page.demo.phone)?(E.page.demo.scrPreferredPhone="H",E.page.preferredPhoneNumber=E.page.demo.scrHomePhone,E.page.homePhonePreferredMsg=Q,E.page.homePhonePreferredColor="#ffff99"):u(E.page.demo.alternativePhone)?(E.page.demo.scrPreferredPhone="W",E.page.preferredPhoneNumber=E.page.demo.scrWorkPhone,E.page.workPhonePreferredMsg=Q,E.page.workPhonePreferredColor="#ffff99"):E.page.preferredPhoneNumber=E.page.demo.scrHomePhone,E.page.dataChanged=!1,E.page.genders=I.getGenders(),E.page.titles=I.getTitles(),E.page.provinces=I.getProvinces(),E.page.countries=I.getCountries(),E.page.engFre=I.getEngFre(),E.page.spokenlangs=I.getSpokenLanguages(),E.page.rosterTermReasons=I.getRosterTerminationReasons(),E.page.securityQuestions=I.getSecurityQuestions(),E.page.rxInteractionLevels=I.getRxInteractionLevels(),w.getStatus(f.demographicNo).then(function(e){E.page.macPHRLoggedIn=e.macPHRLoggedIn,E.page.macPHRIdsSet=e.macPHRIdsSet,E.page.macPHRVerificationLevel=e.macPHRVerificationLevel,E.page.integratorEnabled=e.integratorEnabled,E.page.integratorOffline=e.integratorOffline,E.page.integratorAllSynced=e.integratorAllSynced,E.page.conformanceFeaturesEnabled=e.conformanceFeaturesEnabled,E.page.workflowEnhance=e.workflowEnhance,E.page.billregion=e.billregion,E.page.defaultView=e.defaultView,E.page.hospitalView=e.hospitalView,E.page.integratorEnabled&&(E.page.integratorOffline?(E.page.integratorStatusColor="#ff5500",E.page.integratorStatusMsg="NOTE: Integrator is not available at this time"):E.page.integratorAllSynced||(E.page.integratorStatusColor="#ff5500",E.page.integratorStatusMsg="NOTE: Integrated Community is not synced")),E.page.billingHistoryLabel="Invoice List","ON"==E.page.billregion&&(E.page.billingHistoryLabel="Billing History")},function(e){console.log(e)}),_.getStatusList("roster").then(function(e){E.page.rosterStatusList=m(e),E.page.rosterStatusList.unshift({value:"FS",label:"FS - fee for service"}),E.page.rosterStatusList.unshift({value:"TE",label:"TE - terminated"}),E.page.rosterStatusList.unshift({value:"NR",label:"NR - not rostered"}),E.page.rosterStatusList.unshift({value:"RO",label:"RO - rostered"})}),_.getStatusList("patient").then(function(e){E.page.patientStatusList=m(e),E.page.patientStatusList.unshift({value:"FI",label:"FI - Fired"}),E.page.patientStatusList.unshift({value:"MO",label:"MO - Moved"}),E.page.patientStatusList.unshift({value:"DE",label:"DE - Deceased"}),E.page.patientStatusList.unshift({value:"IN",label:"IN - Inactive"}),E.page.patientStatusList.unshift({value:"AC",label:"AC - Active"})}),E.formatDate("DobM"),E.formatDate("DobD"),E.page.demo.age=Juno.Common.Util.calcAge(E.page.demo.dobYear,E.page.demo.dobMonth,E.page.demo.dobDay),E.formatLastName(),E.formatFirstName(),E.validateHCSave()},function(e){alert("Error loading demographic: ",e)}),Z.getPropertyValue(t.SYSTEM_PROPERTIES.INSTANCE_TYPE,t.INSTANCE_TYPE.BC).then(function(e){e.data.body===t.INSTANCE_TYPE.BC?E.showEligibility=!0:e.data.body===t.INSTANCE_TYPE.ON&&Z.getPropertyValue(t.SYSTEM_PROPERTIES.BILLING_TYPE,t.BILLING_TYPE.CLINICAID).then(function(e){e.data.body===t.BILLING_TYPE.CLINICAID&&(E.showEligibility=!0)},function(e){console.error("Failed to fetch instance billing type with error: "+e)})},function(e){console.error("Failed to fetch instance type with error: "+e)})},E.initDemographicVars=function(){var t=e(E.page.demo.effDate);t.isValid()?E.page.demo.effDate=Juno.Common.Util.formatMomentDate(t):E.page.demo.effDate=null;var n=e(E.page.demo.hcRenewDate);n.isValid()?E.page.demo.hcRenewDate=Juno.Common.Util.formatMomentDate(n):E.page.demo.hcRenewDate=null,q.C=E.page.demo.scrCellPhone,q.H=E.page.demo.scrHomePhone,q.W=E.page.demo.scrWorkPhone,q.HX=E.page.demo.scrHPhoneExt,q.WX=E.page.demo.scrWPhoneExt,k=E.page.demo.hin,U=E.page.demo.ver,M=E.page.demo.chartNo,O=E.page.demo.scrCytolNum,L=E.page.demo.scrReferralDocNo,x=E.page.demo.sin,H=E.page.demo.effDate,j=E.page.demo.hcRenewDate,J=E.page.demo.rosterDate,$=E.page.demo.rosterTerminationDate,B=E.page.demo.patientStatusDate,V=E.page.demo.dateJoined,G=E.page.demo.endDate,W=E.page.demo.onWaitingListSinceDate,Y=E.page.demo.scrPaperChartArchivedDate},E.checkAccess=function(){R.hasRight("_demographic","r",E.page.demo.demographicNo).then(function(e){E.page.canRead=e},function(e){console.log(e)}),R.hasRight("_demographic","u",E.page.demo.demographicNo).then(function(e){E.page.cannotChange=!e},function(e){console.log(e)})},E.isNaN=function(e){return isNaN(e)},E.checkAction=function(e){E.page.cannotChange&&(e.preventDefault(),e.stopPropagation())},n.$watch(function(){return E.page.demo},function(e,t){e!==t&&angular.isDefined(t)&&angular.isDefined(e)&&(E.page.dataChanged=!0)},!0),b.onbeforeunload=function(){if(!0===E.page.dataChanged&&"record.details"===v.current.name)return"You have unsaved patient data. Are you sure you want to leave?"},n.$on("$destroy",function(){delete b.onbeforeunload}),n.$on("$stateChangeStart",function(e){!0===E.page.dataChanged&&(confirm("You have unsaved patient data. Are you sure you want to leave?")?y.getDemographic(f.demographicNo).then(function(e){},function(e){alert("Error loading demographic: ",e)}):e.preventDefault())}),E.formatLastName=function(){E.page.demo.lastName=E.page.demo.lastName.toUpperCase()},E.formatFirstName=function(){E.page.demo.firstName=E.page.demo.firstName.toUpperCase()},E.openSwipecardModal=function(){S.open({templateUrl:"src/record/details/swipecard.jsp",controller:"Record.Details.SwipecardController as swipecardController",backdrop:"static",windowClass:"juno-modal"}).result.then(function(e){E.fillDataFromSwipecard(e.data)},function(e){})},E.checkEligibility=function(){w.getEligibilityInfo(E.page.demo.demographicNo).then(function(e){E.eligibilityMsg=N.trustAsHtml(e)},function(e){console.error("Failed to check eligibility with error: "+e)})},E.fillDataFromSwipecard=function(t){if(E.displayMessages.clear(),Juno.Common.Util.isBlank(t.province)||(E.page.demo.address.province=t.province,E.page.demo.hcType=t.province,E.displayMessages.add_field_warning("province","Province Changed"),E.displayMessages.add_field_warning("hcType","Health Card Type Changed")),Juno.Common.Util.isBlank(t.lastName)||(E.page.demo.lastName=t.lastName,E.displayMessages.add_field_warning("lastName","Last Name Changed"),E.formatLastName()),Juno.Common.Util.isBlank(t.firstName)||(E.page.demo.firstName=t.firstName,E.displayMessages.add_field_warning("firstName","First Name Changed"),E.formatFirstName()),Juno.Common.Util.isBlank(t.hin)||(E.page.demo.hin=t.hin,E.displayMessages.add_field_warning("hin","HIN Changed")),Juno.Common.Util.isBlank(t.versionCode)||(E.page.demo.ver=t.versionCode,E.displayMessages.add_field_warning("ver","Version Code Changed")),Juno.Common.Util.isBlank(t.sex)||(E.page.demo.sex=t.sex,E.displayMessages.add_field_warning("sex","Sex Changed")),Oscar.HealthCardParser.validateDate(t.dobYear,t.dobMonth,t.dobDay)&&(E.page.demo.dobYear=t.dobYear,E.page.demo.dobMonth=t.dobMonth,E.page.demo.dobDay=t.dobDay,E.displayMessages.add_field_warning("dob","Date of Birth Changed")),Oscar.HealthCardParser.validateDate(t.effYear,t.effMonth,t.effDay)&&(E.page.demo.effDate=Juno.Common.Util.formatMomentDate(Juno.Common.Util.getDateMomentFromComponents(t.effYear,t.effMonth,t.effDay)),E.displayMessages.add_field_warning("effDate","Effective Date Changed")),Oscar.HealthCardParser.validateDate(t.endYear,t.endMonth,t.endDay)){var n=Juno.Common.Util.getDateMomentFromComponents(t.endYear,t.endMonth,t.endDay);E.page.demo.hcRenewDate=Juno.Common.Util.formatMomentDate(n),E.displayMessages.add_field_warning("endDate","Hin End Date Changed"),e().isAfter(n)&&E.displayMessages.add_field_warning("endDate","Health Card Expired")}Juno.Common.Util.isBlank(t.address)||(E.page.demo.address.address=t.address,E.displayMessages.add_field_warning("address","Address Changed")),Juno.Common.Util.isBlank(t.city)||(E.page.demo.address.city=t.city,E.displayMessages.add_field_warning("city","City Changed")),Juno.Common.Util.isBlank(t.postal)||(E.page.demo.address.postal=t.postal,E.displayMessages.add_field_warning("postal","Postal Code Changed"))},E.validateHC=function(){E.displayMessages.remove_field_error("hin"),"ON"==E.page.demo.hcType&&null!=E.page.demo.hin&&""!=E.page.demo.hin&&(null==E.page.demo.ver&&(E.page.demo.ver=""),w.validateHC(E.page.demo.hin,E.page.demo.ver).then(function(e){null==e.valid?(E.page.HCValidation="n/a",E.page.swipecardMsg="Done Health Card Action"):(E.page.HCValidation=e.valid?"valid":"invalid",E.page.swipecardMsg=e.responseDescription+" ("+e.responseCode+")"),e.valid||E.displayMessages.add_field_error("hin",E.page.swipecardMsg)},function(e){console.log(e)}))},E.checkHin=function(){"ON"==E.page.demo.hcType&&null!=E.page.demo.hin&&""!=E.page.demo.hin&&(E.page.demo.hin.length>10&&(E.page.demo.hin=k),s(E.page.demo.hin)||(E.page.demo.hin=k)),k=E.page.demo.hin,E.page.HCValidation=null},E.checkHinVer=function(){"ON"==E.page.demo.hcType&&(E.page.demo.ver.length>2&&(E.page.demo.ver=U),/^[a-zA-Z()]*$/.test(E.page.demo.ver)||(E.page.demo.ver=U),E.page.demo.ver=E.page.demo.ver.toUpperCase()),U=E.page.demo.ver},E.checkDate=function(e){"DobY"==e?E.page.demo.dobYear=function(e){for(var t=0;t<e.length;t++)s(e.charAt(t))||(e=e.substring(0,t)+e.substring(t+1));""!=e&&((e=parseInt(e).toString()).length>4&&(e=e.substring(0,4)),0==e&&(e=""));return e}(E.page.demo.dobYear):"DobM"==e?E.page.demo.dobMonth=function(e){for(var t=0;t<e.length;t++)s(e.charAt(t))||(e=e.substring(0,t)+e.substring(t+1));""!=e&&(e.length>2&&(e=e.substring(0,2)),e>12&&(e=e.substring(0,1)));return e}(E.page.demo.dobMonth):"DobD"==e&&(E.page.demo.dobDay=function(e,t,n){for(var o=0;o<e.length;o++)s(e.charAt(o))||(e=e.substring(0,o)+e.substring(o+1));""!=e&&(e.length>2&&(e=e.substring(0,2)),null==t?e>31&&(e=e.substring(0,1)):null==n?e>r[t-1]&&e.substring(0,1):i(n,t,e)||(e=e.substring(0,1)));return e}(E.page.demo.dobDay,E.page.demo.dobMonth,E.page.demo.dobYear)),console.log("MONTH: ",E.page.demo.dobMonth),E.page.demo.age=Juno.Common.Util.calcAge(E.page.demo.dobYear,E.page.demo.dobMonth,E.page.demo.dobDay)},E.formatDate=function(e){"DobM"==e&&null!=E.page.demo.dobMonth&&1==String(E.page.demo.dobMonth).length?E.page.demo.dobMonth="0"+E.page.demo.dobMonth:"DobD"==e&&null!=E.page.demo.dobDay&&1==String(E.page.demo.dobDay).length&&(E.page.demo.dobDay="0"+E.page.demo.dobDay)},E.checkPatientStatus=function(){var e=new Date;if("AC"==E.page.demo.patientStatus&&null!=E.page.demo.endDate&&""!=E.page.demo.endDate&&function(e){if(null==e||""==e)return!0;var t=e.toString().split("-");if(3!=t.length)return!1;var n=new Date(t[0],t[1]-1,t[2]);return!isNaN(n.getTime())&&n.getFullYear()==t[0]&&n.getMonth()==t[1]-1&&n.getDate()==t[2]}(E.page.demo.endDate)){var t=E.page.demo.endDate.split("-");if(e>new Date(t[0],t[1]-1,t[2]))return alert("Patient Status cannot be Active after End Date."),!1}return!0},E.isPostalComplete=function(){var e=E.page.demo.address.province;return null===E.page.demo.address.postal||null===e||"OT"===e||0===e.indexOf("US")||(!!E.isPostalValid()||(E.resetEditState(),!1))},E.isPostalValid=function(){var e=E.page.demo.address.postal.replace(/\s/g,"");return 0===e.length?(E.page.demo.address.postal=null,!0):new RegExp(/^[A-Za-z]\d[A-Za-z]\d[A-Za-z]\d$/).test(e)?(E.page.demo.address.postal=e.substring(0,3)+" "+e.substring(3),!0):(alert("Invalid/Incomplete Postal Code"),!1)},E.checkEmail=function(){if(null==E.page.demo.email||""==E.page.demo.email)return!0;var e=/^[^@]+@[^@]+$/;if(e.test(E.page.demo.email)){var t=E.page.demo.email.split("@");if((e=/^[!#%&'=`~\{}\-\$\*\+\/\?\^\|\w]+(\.[!#%&'=`~\{}\-\$\*\+\/\?\^\|\w]+)*$/).test(t[0])&&(e=/^[^\W_]+(([^\W_]|-)+[^\W_]+)*(\.[^\W_]+(([^\W_]|-)+[^\W_]+)*)*\.[^\W_]{2,3}$/).test(t[1]))return!0}return alert("Invalid email address"),!1},E.checkChartNo=function(){null!=E.page.demo.chartNo&&""!=E.page.demo.chartNo&&E.page.demo.chartNo.length>10?E.page.demo.chartNo=M:M=E.page.demo.chartNo},E.checkCytoNum=function(){null!=E.page.demo.scrCytolNum&&""!=E.page.demo.scrCytolNum?s(E.page.demo.scrCytolNum)?O=E.page.demo.scrCytolNum:E.page.demo.scrCytolNum=O:O=E.page.demo.scrCytolNum},E.checkReferralDocNo=function(){E.validateDocNo(E.page.demo.scrReferralDocNo,!0)?L=E.page.demo.scrReferralDocNo:E.page.demo.scrReferralDocNo=L},E.checkFamilyDocNo=function(){E.validateDocNo(E.page.demo.scrFamilyDocNo,!0)?F=E.page.demo.scrFamilyDocNo:E.page.demo.scrFamilyDocNo=F},E.validateDocNo=function(e,t){return!!(null==e||""===e||s(e)&&e.length<10)||(t||alert("Invalid Doctor Number"),!1)},E.checkSin=function(){if(null!=E.page.demo.sin&&""!=E.page.demo.sin){var e=E.page.demo.sin.replace(/\s/g,"");!s(e)||e.length>9?E.page.demo.sin=x:(e.length>6?E.page.demo.sin=e.substring(0,3)+" "+e.substring(3,6)+" "+e.substring(6):e.length>3&&(E.page.demo.sin=e.substring(0,3)+" "+e.substring(3)),x=E.page.demo.sin)}else x=E.page.demo.sin},E.validateSin=function(){if(null==E.page.demo.sin||""==E.page.demo.sin)return!0;var e=E.page.demo.sin.replace(/\s/g,"");if(s(e)&&9==e.length){for(var t=0,n=0;n<e.length;n++){var o=Number(e.charAt(n))*(n%2+1);t+=o%10+Math.floor(o/10)}if(t%10==0)return!0}return alert("Invalid SIN #"),!1},E.preventManualEffDate=function(){null==E.page.demo.effDate?E.page.demo.effDate=H:H=E.page.demo.effDate},E.preventManualHcRenewDate=function(){null==E.page.demo.hcRenewDate?E.page.demo.hcRenewDate=j:j=E.page.demo.hcRenewDate},E.preventManualRosterDate=function(){null==E.page.demo.rosterDate?E.page.demo.rosterDate=J:J=E.page.demo.rosterDate},E.preventManualRosterTerminationDate=function(){null==E.page.demo.rosterTerminationDate?E.page.demo.rosterTerminationDate=$:$=E.page.demo.rosterTerminationDate},E.preventManualPatientStatusDate=function(){null==E.page.demo.patientStatusDate?E.page.demo.patientStatusDate=B:B=E.page.demo.patientStatusDate},E.preventManualDateJoined=function(){null==E.page.demo.dateJoined?E.page.demo.dateJoined=V:V=E.page.demo.dateJoined},E.preventManualEndDate=function(){null==E.page.demo.endDate?E.page.demo.endDate=G:G=E.page.demo.endDate},E.preventManualOnWaitingListSinceDate=function(){null==E.page.demo.onWaitingListSinceDate?E.page.demo.onWaitingListSinceDate=W:W=E.page.demo.onWaitingListSinceDate},E.preventManualPaperChartArchivedDate=function(){null==E.page.demo.scrPaperChartArchivedDate?E.page.demo.scrPaperChartArchivedDate=Y:Y=E.page.demo.scrPaperChartArchivedDate},E.isRosterTerminated=function(){return null!==E.page.demo&&void 0!==E.page.demo?"TE"===E.page.demo.rosterStatus:null},E.showReferralDocList=function(){E.page.showReferralDocList=!E.page.showReferralDocList},E.searchReferralDocsName=function(e){return E.searchReferralDocs(e,null)},E.searchReferralDocsRefNo=function(e){return E.searchReferralDocs(null,e)},E.searchReferralDocs=function(e,t){return P.searchReferralDoctors(e,t,1,10).then(function(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var o=e[n].lastName+", "+e[n].firstName;t[n]={label:o,name:o,referralNo:e[n].referralNo},null!=e[n].specialtyType&&""!=e[n].specialtyType&&(t[n].label+=" ["+e[n].specialtyType+"]")}return t},function(e){return[]})},E.chooseReferralDoc=function(e,t,n){E.page.demo.scrReferralDocNo=e.referralNo,E.page.demo.scrReferralDoc=e.name,E.checkReferralDocNo()},E.chooseFamilyDoc=function(e,t,n){E.page.demo.scrFamilyDocNo=e.referralNo,E.page.demo.scrFamilyDoc=e.name,E.checkFamilyDocNo()},E.showAddNewRosterStatus=function(){E.page.showAddNewRosterStatus=!E.page.showAddNewRosterStatus,E.page.newRosterStatus=null},E.showAddNewPatientStatus=function(){E.page.showAddNewPatientStatus=!E.page.showAddNewPatientStatus,E.page.newPatientStatus=null},E.addNewRosterStatus=function(){null!=E.page.newRosterStatus&&""!=E.page.newRosterStatus&&(E.page.rosterStatusList.push({value:E.page.newRosterStatus,label:E.page.newRosterStatus}),E.page.demo.rosterStatus=E.page.newRosterStatus),E.showAddNewRosterStatus()},E.addNewPatientStatus=function(){null!=E.page.newPatientStatus&&""!=E.page.newPatientStatus&&(E.page.patientStatusList.push({value:E.page.newPatientStatus,label:E.page.newPatientStatus}),E.page.demo.patientStatus=E.page.newPatientStatus),E.showAddNewPatientStatus()},E.checkPhone=function(e){"C"==e?c(E.page.demo.scrCellPhone)?E.page.demo.scrCellPhone=q.C:q.C=E.page.demo.scrCellPhone:"H"==e?c(E.page.demo.scrHomePhone)?E.page.demo.scrHomePhone=q.H:q.H=E.page.demo.scrHomePhone:"W"==e?c(E.page.demo.scrWorkPhone)?E.page.demo.scrWorkPhone=q.W:q.W=E.page.demo.scrWorkPhone:"HX"==e&&null!=E.page.demo.scrHPhoneExt&&""!=E.page.demo.scrHPhoneExt?s(E.page.demo.scrHPhoneExt)?q.HX=E.page.demo.scrHPhoneExt:E.page.demo.scrHPhoneExt=q.HX:"WX"==e&&null!=E.page.demo.scrWPhoneExt&&""!=E.page.demo.scrWPhoneExt&&(s(E.page.demo.scrWPhoneExt)?q.WX=E.page.demo.scrWPhoneExt:E.page.demo.scrWPhoneExt=q.WX)},E.setPreferredPhone=function(){E.page.cellPhonePreferredMsg=z,E.page.cellPhonePreferredColor="",E.page.homePhonePreferredMsg=z,E.page.homePhonePreferredColor="",E.page.workPhonePreferredMsg=z,E.page.workPhonePreferredColor="","C"==E.page.demo.scrPreferredPhone?(E.page.preferredPhoneNumber=E.page.demo.scrCellPhone,E.page.cellPhonePreferredMsg=Q,E.page.cellPhonePreferredColor="#ffff99"):"H"==E.page.demo.scrPreferredPhone?(E.page.preferredPhoneNumber=E.page.demo.scrHomePhone,E.page.homePhonePreferredMsg=Q,E.page.homePhonePreferredColor="#ffff99"):"W"==E.page.demo.scrPreferredPhone&&(E.page.preferredPhoneNumber=E.page.demo.scrWorkPhone,E.page.workPhonePreferredMsg=Q,E.page.workPhonePreferredColor="#ffff99")},E.isPhoneVoid=function(e){return null==e||""==e},E.showEnrollmentHistory=function(){var e="../demographic/EnrollmentHistory.jsp?demographicNo="+E.page.demo.demographicNo;window.open(e,"enrollmentHistory","width=650, height=1000")},E.launchPhoto=function(){var e="../casemgmt/uploadimage.jsp?demographicNo="+E.page.demo.demographicNo;window.open(e,"uploadWin","width=500, height=300")},E.manageContacts=function(){var e=!0;if(E.page.dataChanged>0&&(e=confirm("You may have unsaved data. Are you sure to leave?")),e){var t="../demographic/Contact.do?method=manage&demographic_no="+E.page.demo.demographicNo;window.open(t,"ManageContacts","width=960, height=700")}},E.printLabel=function(e){var t=null;"PDFLabel"===e?t="../demographic/printDemoLabelAction.do?appointment_no=null&demographic_no="+E.page.demo.demographicNo:"PDFAddress"===e?t="../demographic/printDemoAddressLabelAction.do?demographic_no="+E.page.demo.demographicNo:"PDFChart"===e?t="../demographic/printDemoChartLabelAction.do?demographic_no="+E.page.demo.demographicNo:"PrintLabel"===e?t="../demographic/demographiclabelprintsetting.jsp?demographic_no="+E.page.demo.demographicNo:"ClientLab"===e&&(t="../demographic/printClientLabLabelAction.do?demographic_no="+E.page.demo.demographicNo),window.open(t,"Print","width=960, height=700")},E.integratorDo=function(e){var t=null;"ViewCommunity"==e?t="../admin/viewIntegratedCommunity.jsp":"Linking"==e?t="../integrator/manage_linked_clients.jsp?demographicId="+E.page.demo.demographicNo:"Compare"==e?t="../demographic/DiffRemoteDemographics.jsp?demographicId="+E.page.demo.demographicNo:"Update"==e?t="../demographic/copyLinkedDemographicInfoAction.jsp?displaymode=edit&dboperation=search_detail&demographicId="+E.page.demo.demographicNo+"&demographic_no="+E.page.demo.demographicNo:"SendNote"==e&&(t="../demographic/followUpSelection.jsp?demographicId="+E.page.demo.demographicNo),window.open(t,"Integrator","width=960, height=700")},E.macPHRDo=function(e){var t=null;if("Register"==e){if(!E.page.macPHRLoggedIn)return void alert("Please login to PHR first");t="../phr/indivo/RegisterIndivo.jsp?demographicNo="+E.page.demo.demographicNo}else"SendMessage"==e?t="../phr/PhrMessage.do?method=createMessage&providerNo="+T.providerNo+"&demographicNo="+E.page.demo.demographicNo:"ViewRecord"==e?t="../demographic/viewPhrRecord.do?demographic_no="+E.page.demo.demographicNo:"Verification"==e&&(t="../phr/PHRVerification.jsp?demographic_no="+E.page.demo.demographicNo);window.open(t,"MacPHR","width=960, height=700")},E.appointmentDo=function(e){var t=null;"ApptHistory"==e?t="../demographic/demographiccontrol.jsp?displaymode=appt_history&dboperation=appt_history&limit1=0&limit2=25&orderby=appttime&demographic_no="+E.page.demo.demographicNo+"&last_name="+encodeURI(E.page.demo.lastName)+"&first_name="+encodeURI(E.page.demo.firstName):"WaitingList"==e&&(t="../oscarWaitingList/SetupDisplayPatientWaitingList.do?demographic_no="+E.page.demo.demographicNo),window.open(t,"Appointment","width=960, height=700")},E.isClinicaidBilling=function(){return"CLINICAID"==E.page.billregion},E.billingDo=function(e){var t=new Date,n=null;"BillingHistory"===e?n="CLINICAID"===E.page.billregion?"../billing.do?billRegion=CLINICAID&action=invoice_reports&patient_remote_id="+E.page.demo.demographicNo:"ON"===E.page.billregion?"../billing/CA/ON/billinghistory.jsp?demographic_no="+E.page.demo.demographicNo+"&last_name="+encodeURI(E.page.demo.lastName)+"&first_name="+encodeURI(E.page.demo.firstName)+"&orderby=appointment_date&displaymode=appt_history&dboperation=appt_history&limit1=0&limit2=10":"../billing/CA/BC/billcontroller.page.jsp?lastName="+encodeURI(E.page.demo.lastName)+"&firstName="+encodeURI(E.page.demo.firstName)+"&filterPatient=true&demographicNo="+E.page.demo.demographicNo:"CreateInvoice"===e?n="../billing.do?billRegion="+E.page.billregion+"&billForm="+E.page.defaultView+"&hotclick=&appointment_no=0&demographic_name="+encodeURI(E.page.demo.lastName)+encodeURI(",")+encodeURI(E.page.demo.firstName)+"&demographic_no="+E.page.demo.demographicNo+"&providerview="+E.page.demo.providerNo+"&user_no="+T.providerNo+"&apptProvider_no=none&appointment_date="+t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"&start_time=00:00:00&bNewForm=1&status=t":"FluBilling"===e?n="../billing/CA/ON/specialtyBilling/fluBilling/addFluBilling.jsp?function=demographic&functionid="+E.page.demo.demographicNo+"&creator="+T.providerNo+"&demographic_name="+encodeURI(E.page.demo.lastName)+encodeURI(",")+encodeURI(E.page.demo.firstName)+"&hin="+E.page.demo.hin+E.page.demo.ver+"&demo_sex="+E.page.demo.sex+"&demo_hctype="+E.page.demo.hcType+"&rd="+encodeURI(E.page.demo.scrReferralDoc)+"&rdohip="+E.page.demo.scrReferralDocNo+"&dob="+E.page.demo.dobYear+E.page.demo.dobMonth+E.page.demo.dobDay+"&mrp="+E.page.demo.providerNo:"HospitalBilling"===e?n="../billing/CA/ON/billingShortcutPg1.jsp?billRegion="+E.page.billregion+"&billForm="+encodeURI(E.page.hospitalView)+"&hotclick=&appointment_no=0&demographic_name="+encodeURI(E.page.demo.lastName)+encodeURI(",")+encodeURI(E.page.demo.firstName)+"&demographic_no="+E.page.demo.demographicNo+"&providerview="+E.page.demo.providerNo+"&user_no="+T.providerNo+"&apptProvider_no=none&appointment_date="+t.getFullYear+"-"+(t.getMonth()+1)+"-"+t.getDate()+"&start_time=00:00:00&bNewForm=1&status=t":"AddBatchBilling"===e?n="../billing/CA/ON/addBatchBilling.jsp?demographic_no="+E.page.demo.demographicNo+"&creator="+T.providerNo+"&demographic_name="+encodeURI(E.page.demo.lastName)+encodeURI(",")+encodeURI(E.page.demo.firstName)+"&hin="+E.page.demo.hin+E.page.demo.ver+"&dob="+E.page.demo.dobYear+E.page.demo.dobMonth+E.page.demo.dobDay:"AddINR"===e?n="../billing/CA/ON/inr/addINRbilling.jsp?function=demographic&functionid="+E.page.demo.demographicNo+"&creator="+T.providerNo+"&demographic_name="+encodeURI(E.page.demo.lastName)+encodeURI(",")+encodeURI(E.page.demo.firstName)+"&hin="+E.page.demo.hin+E.page.demo.ver+"&dob="+E.page.demo.dobYear+E.page.demo.dobMonth+E.page.demo.dobDay:"BillINR"===e&&(n="../billing/CA/ON/inr/reportINR.jsp?provider_no="+T.providerNo),window.open(n,"Billing","width=960, height=700")},E.exportDemographic=function(){var e="../demographic/demographicExport.jsp?demographicNo="+E.page.demo.demographicNo;window.open(e,"DemographicExport","width=960, height=700")},E.formatDocOutput=function(e){var t,n,o=e.indexOf("<rdohip>")+"<rdohip>".length,a=e.indexOf("</rdohip>");return a>o&&a>=0&&o>=0&&(t=e.substring(o,a)),o=e.indexOf("<rd>")+"<rd>".length,(a=e.indexOf("</rd>"))>o&&a>=0&&o>=0&&(n=e.substring(o,a)),{number:t,name:n}},E.formatDocInput=function(e,t){var n="<rdohip></rdohip>",o="<rd></rd>";return null!=t&&""!==t&&(n="<rdohip>"+t+"</rdohip>"),null!=e&&""!==e&&(o="<rd>"+e+"</rd>"),n+o},E.validateHCSave=function(e){null==E.page.demo.hin||""==E.page.demo.hin?e&&E.save():w.isUniqueHC(E.page.demo.hin,E.page.demo.demographicNo).then(function(t){t.success?"ON"!=E.page.demo.hcType?e&&E.save():(null==E.page.demo.ver&&(E.page.demo.ver=""),w.validateHC(E.page.demo.hin,E.page.demo.ver).then(function(t){null==t.valid?E.page.HCValidation="n/a":t.valid||(alert("Health Card Validation failed: "+t.responseDescription+" ("+t.responseCode+")"),e=!1),e&&E.save()},function(e){console.log(e)})):alert("HIN is already in use!")},function(e){console.log(e)})},E.save=function(){var e,t,n;if(E.page.saving=!0,E.displayMessages.clear(),null!=E.page.demo.lastName&&""!=E.page.demo.lastName)if(null!=E.page.demo.firstName&&""!=E.page.demo.firstName)if(null!=E.page.demo.sex&&""!=E.page.demo.sex)if(l(E.page.demo.dobYear,E.page.demo.dobMonth,E.page.demo.dobDay))alert("Date of Birth is required");else if(E.page.demo.dateOfBirth=(e=E.page.demo.dobYear,t=E.page.demo.dobMonth,n=E.page.demo.dobDay,l(e,t,n)?"":i(e,t,n)?e+"-"+t+"-"+n:null),null!=E.page.demo.dateOfBirth){if(E.checkPatientStatus()&&E.isPostalComplete()&&E.validateSin()&&E.validateDocNo(E.page.demo.scrReferralDocNo)&&E.validateDocNo(E.page.demo.scrFamilyDocNo)){null!=E.page.demo.scrNotes&&(E.page.demo.notes="<unotes>"+E.page.demo.scrNotes+"</unotes>"),E.page.demo.familyDoctor=E.formatDocInput(E.page.demo.scrReferralDoc,E.page.demo.scrReferralDocNo),E.page.demo.familyDoctor2=E.formatDocInput(E.page.demo.scrFamilyDoc,E.page.demo.scrFamilyDocNo),E.page.demo.scrDemoCell=E.page.demo.scrCellPhone,E.page.demo.phone=E.page.demo.scrHomePhone,E.page.demo.alternativePhone=E.page.demo.scrWorkPhone,"C"==E.page.demo.scrPreferredPhone?E.page.demo.scrDemoCell+="*":"H"==E.page.demo.scrPreferredPhone?E.page.demo.phone+="*":"W"==E.page.demo.scrPreferredPhone&&(E.page.demo.alternativePhone+="*");var o=[];o=a("demo_cell",E.page.demo.scrDemoCell,K,E.page.demo.extras,o),o=a("aboriginal",E.page.demo.scrAboriginal,K,E.page.demo.extras,o),o=a("hPhoneExt",E.page.demo.scrHPhoneExt,K,E.page.demo.extras,o),o=a("wPhoneExt",E.page.demo.scrWPhoneExt,K,E.page.demo.extras,o),o=a("cytolNum",E.page.demo.scrCytolNum,K,E.page.demo.extras,o),o=a("phoneComment",E.page.demo.scrPhoneComment,K,E.page.demo.extras,o),o=a("paper_chart_archived",E.page.demo.scrPaperChartArchived,K,E.page.demo.extras,o),o=a("paper_chart_archived_date",E.page.demo.scrPaperChartArchivedDate,K,E.page.demo.extras,o),o=a("usSigned",E.page.demo.scrUsSigned,K,E.page.demo.extras,o),o=a("privacyConsent",E.page.demo.scrPrivacyConsent,K,E.page.demo.extras,o),o=a("informedConsent",E.page.demo.scrInformedConsent,K,E.page.demo.extras,o),o=a("securityQuestion1",E.page.demo.scrSecurityQuestion1,K,E.page.demo.extras,o),o=a("securityAnswer1",E.page.demo.scrSecurityAnswer1,K,E.page.demo.extras,o),o=a("rxInteractionWarningLevel",E.page.demo.scrRxInteractionLevel,K,E.page.demo.extras,o),E.page.demo.extras=o,y.updateDemographic(E.page.demo).then(function(){E.resetEditState()},function(){E.page.saving=!1,alert("Failed to save demographic")})}}else alert("Invalid Date of Birth");else alert("Sex is required");else alert("First Name is required");else alert("Last Name is required")},E.resetEditState=function(){E.page.saving=!1,E.page.dataChanged=!1},E.init()}]);var r=[31,28,31,30,31,30,31,31,30,31,30,31];function i(e,t,n){if(null!=e&&""!=e&&null!=t&&""!=t&&null!=n&&""!=n){var o=r[t-1];return 2==t&&(e%4==0&&e%100!=0||e%400==0)&&(o=29),n>0&&n<=o}return l(e,t,n)}function l(e,t,n){return!(null!=e&&""!=e||null!=t&&""!=t||null!=n&&""!=n)}function s(e){return/^[0-9]+$/.test(e)}function c(e){return null!=e&&!/^[0-9 \-\()]*$/.test(e)}function u(e){return null!=(e=String(e))&&""!=e&&"*"==e.charAt(e.length-1)}function d(e){return u(e)&&(e=e.substring(0,e.length-1)),e}function p(e){var t=e;if(null!=e.role){var n={};n.role=e.role,n.sdm=e.sdm,n.ec=e.ec,n.category=e.category,n.lastName=e.lastName,n.firstName=e.firstName,n.phone=e.phone,t=[n]}for(var o=0;o<t.length;o++)1==t[o].sdm&&(t[o].role+=" /sdm"),1==t[o].ec&&(t[o].role+=" /ec"),null!=t[o].role&&""!=t[o].role||(t[o].role="-"),null==t[o].phone||""==t[o].phone?t[o].phone="-":"*"==t[o].phone.charAt(t[o].phone.length-1)&&(t[o].phone=t[o].phone.substring(0,t[o].phone.length-1));return t}function m(e){return e instanceof Array?e:null==e?[]:[e]}}.call(this,n(6))},function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}t.__esModule=!0,o(n(8));var a=n(8);o(n(22));var r=n(22);o(n(16));var i=n(16);o(n(7));var l=n(7);o(n(15));var s=n(15);o(n(12));var c=n(12);t.APIS=[a.AppointmentApi,r.IceFallApi,i.ProviderPreferenceApi,l.ScheduleApi,s.SitesApi,c.SystemPreferenceApi]},function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}t.__esModule=!0,o(n(192)),o(n(193)),o(n(194)),o(n(195)),o(n(196)),o(n(197)),o(n(198)),o(n(199)),o(n(200)),o(n(201)),o(n(202)),o(n(203)),o(n(204)),o(n(205)),o(n(206)),o(n(207)),o(n(208)),o(n(209)),o(n(210)),o(n(211)),o(n(212))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.OSCAR="OSCAR"]="OSCAR",e[e.MYOSCARSELFBOOKING="MYOSCAR_SELF_BOOKING"]="MYOSCARSELFBOOKING"}(e.BookingSourceEnum||(e.BookingSourceEnum={}))}(t.AppointmentTo1||(t.AppointmentTo1={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.M="M"]="M",e[e.F="F"]="F"}(e.SexEnum||(e.SexEnum={}))}(t.ProviderTo1||(t.ProviderTo1={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseAppointmentTo1||(t.RestResponseAppointmentTo1={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseBoolean||(t.RestResponseBoolean={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseCalendarAppointment||(t.RestResponseCalendarAppointment={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseCalendarSchedule||(t.RestResponseCalendarSchedule={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseIceFallLogEntryListTo1||(t.RestResponseIceFallLogEntryListTo1={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseIceFallSettingsTo1||(t.RestResponseIceFallSettingsTo1={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseInteger||(t.RestResponseInteger={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseSiteTransfer||(t.RestResponseSiteTransfer={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestResponseString||(t.RestResponseString={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponseAppointmentEditRecord||(t.RestSearchResponseAppointmentEditRecord={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponseAppointmentTypeTo1||(t.RestSearchResponseAppointmentTypeTo1={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponseCalendarAppointmentStatus||(t.RestSearchResponseCalendarAppointmentStatus={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponseLookupListItemTo1||(t.RestSearchResponseLookupListItemTo1={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponsePatientListItemTransfer||(t.RestSearchResponsePatientListItemTransfer={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponseScheduleGroup||(t.RestSearchResponseScheduleGroup={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponseScheduleSearchResult||(t.RestSearchResponseScheduleSearchResult={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponseScheduleTemplateCode||(t.RestSearchResponseScheduleTemplateCode={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.SUCCESS="SUCCESS"]="SUCCESS",e[e.ERROR="ERROR"]="ERROR"}(e.StatusEnum||(e.StatusEnum={}))}(t.RestSearchResponseSiteTransfer||(t.RestSearchResponseSiteTransfer={}))},function(e,t,n){"use strict";t.__esModule=!0,function(e){!function(e){e[e.GROUP="GROUP"]="GROUP",e[e.PROVIDER="PROVIDER"]="PROVIDER"}(e.IdentifierTypeEnum||(e.IdentifierTypeEnum={}))}(t.ScheduleGroup||(t.ScheduleGroup={}))},function(e,t){angular.module("Record.Details").controller("Record.Details.SwipecardController",["$scope","$uibModal","$uibModalInstance",function(e,t,n){let o=this;o.cardDataString=null,o.focusInput=null,o.init=function(){o.focusInput="card-data"},o.parseDataAndClose=function(e){if(!Juno.Common.Util.isBlank(e)){var t=Oscar.HealthCardParser.parse(e);n.close(t)}},o.onEnterKeyDown=function(){o.parseDataAndClose(o.cardDataString)},o.cancel=function(){n.dismiss("cancel")},o.init()}])},function(e,t,n){"use strict";angular.module("Record.PHR",["Common","Common.Services"])},function(e,t,n){(function(e){angular.module("Record.PHR").controller("Record.PHR.PHRController",["$scope","$http","$location","$state","$stateParams","demographicService","demo","formService",function(t,n,o,a,r,i,l,s){var c=this;console.log("phr ctrl ",r,a),c.page={},c.page.currentFormList=[],c.page.currentForm={},c.page.currentlistId=0,console.log("What is the state "+a.params.type+" : "+angular.isUndefined(a.params.type)+" id "+a.params.id,a),c.page.formlists=[{id:0,label:"Data"}],c.page.currentFormList[0]=[{id:0,name:"Glucose",url:"../oscarEncounter/myoscar/measurements_glucose.do?type=GLUCOSE&demoNo=",type:"frame"},{id:1,name:"BP",url:"../oscarEncounter/myoscar/measurements_blood_pressure.do?type=BLOOD_PRESSURE&demoNo=",type:"frame"},{id:2,name:"Height & Weight",url:"../oscarEncounter/myoscar/measurements_height_and_weight.do?type=HEIGHT_AND_WEIGHT&demoNo=",type:"frame"},{id:3,name:"Open Record",url:"../demographic/viewPhrRecord.do?demographic_no=",type:"window"},{id:4,name:"Send a Message",url:"../phr/PhrMessage.do?method=createMessage&demographicNo=",type:"window"},{id:5,name:"Data Sync",url:"../admin/oscar_myoscar_sync_config_redirect.jsp?uselessParam=",type:"window"}],c.changeTo=function(e){c.page.currentlistId=e,console.log("set currentlist to "+e),0==e&&s.getAllFormsByHeading(r.demographicNo,"Completed").then(function(e){console.debug("whats the index0",e),c.page.currentFormList[0]=e.list},function(e){console.log(e)})},c.viewFormState=function(t){for(;document.getElementById("formInViewFrame").hasChildNodes();)document.getElementById("formInViewFrame").removeChild(document.getElementById("formInViewFrame").firstChild);var n=t.url+r.demographicNo;if(console.log("item",t),"frame"!=t.type){var o=Math.round(1e3*Math.random());return win="win"+o,void window.open(n,win,"scrollbars=yes, location=no, width=900, height=600","")}c.page.currentForm=t;var a=new e.Parent("formInViewFrame",n,{});c.pymParent=a},c.getListClass=function(e){if(e===c.page.currentlistId)return"active"},c.getActiveFormClass=function(e){return e.type==c.page.currentForm.type&&e.id==c.page.currentForm.id&&angular.isDefined(e.id)?"active":e.type==c.page.currentForm.type&&angular.isUndefined(e.id)&&e.formId==c.page.currentForm.formId?"active":void 0},c.keypress=function(e){if(1==e.altKey&&"Up"==e.key)console.log("up",e),console.log(c.page.currentFormList[c.page.currentlistId].indexOf(c.page.currentForm)),(t=c.page.currentFormList[c.page.currentlistId].indexOf(c.page.currentForm))>0&&(c.page.currentForm=c.page.currentFormList[c.page.currentlistId][t-1],c.viewFormState(c.page.currentForm));else if(1==e.altKey&&"Down"==e.key){console.log("down",e);var t=c.page.currentFormList[c.page.currentlistId].indexOf(c.page.currentForm);console.log(t,c.page.currentFormList[c.page.currentlistId].length),t<=c.page.currentFormList[c.page.currentlistId].length&&(c.page.currentForm=c.page.currentFormList[c.page.currentlistId][t+1],c.viewFormState(c.page.currentForm))}else console.log("keypress",e.altKey,e.key,e)}}])}).call(this,n(21))},function(e,t,n){"use strict";angular.module("Record.Tracker",["Common","Common.Services"])},function(e,t){angular.module("Record.Tracker").controller("Record.Tracker.TrackerController",["$rootScope","$scope","$http","$location","$stateParams","$state","$timeout","demographicService","noteService","uxService",function(e,t,n,o,a,r,i,l,s,c){this.getTrackerUrl=function(){return url="../oscarEncounter/oscarMeasurements/HealthTrackerPage.jspf?template=tracker&demographic_no="+a.demographicNo,url},this.resizeIframe=function(e){var t=e.contentWindow.document.body.scrollHeight;t>0&&(e.height=t+"px")}}])},function(e,t,n){"use strict";angular.module("Tickler",["Common","Common.Services","Common.Filters"])},function(e,t,n){(function(e){angular.module("Tickler").controller("Tickler.TicklerListController",["$scope","$state","$timeout","$resource","$uibModal","$http","$stateParams","$filter","NgTableParams","securityService","ticklerService","noteService","providerService","providers",function(t,n,o,a,r,i,l,s,c,u,d,p,m,h){var g=this,f=a("../ws/rs/tickler/ticklers");g.lastResponse="",g.providers=h,u.hasRights({items:[{objectName:"_tickler",privilege:"w"},{objectName:"_tickler",privilege:"r"}]}).then(function(t){null!=t.content&&2==t.content.length?(g.ticklerWriteAccess=t.content[0],g.ticklerReadAccess=t.content[1],g.ticklerReadAccess&&(g.search={status:"A"},"ticklers"===n.current.name&&(g.search.serviceEndDate=e().startOf("day").toDate()),m.getSettings().then(function(e){e.ticklerViewOnlyMine?m.getMe().then(function(e){g.search.taskAssignedTo=e.providerNo,g.loadTable()}):g.loadTable()}))):alert("failed to load rights")},function(e){alert(e)}),g.doSearch=function(){g.tableParams.reload()},g.clear=function(){g.search=angular.copy({status:"A"}),g.tableParams.reload()},g.checkAll=function(e){angular.forEach(e,function(e){e.checked=!0})},g.checkNone=function(e){angular.forEach(e,function(e){e.checked=!1})},g.loadTable=function(){g.tableParams=new c({page:1,count:10,sorting:{ServiceDate:"desc"}},{getData:function(e){g.search.count=e.url().count,g.search.page=e.url().page,g.search.includeLinks="true",g.search.includeComments="true",g.search.includeUpdates="true",g.search.includeProgram=!0;var t=/sorting\[(\w+)\]/g;for(var n in e.url()){var o=t.exec(String(n));o&&(g.search.sortColumn=o[1],g.search.sortDirection=e.url()[String(n)])}return angular.isDefined(l.demographicNo)&&(g.search.demographicNo=l.demographicNo),f.get(g.search).$promise.then(function(t){e.total(t.total);for(var n=t.content,o=0;o<n.length;o++)n[o].ticklerLinks.length>0&&(n[o].ticklerLinkUrl=g.getLinkUrl(n[o].ticklerLinks[0]));return t.content})}})},g.completeTicklers=function(){var e=[];angular.forEach(g.tableParams.data,function(t){t.checked&&e.push(t.id)}),d.setCompleted(e).then(function(e){g.tableParams.reload()},function(e){alert(e)})},g.deleteTicklers=function(){var e=[];angular.forEach(g.tableParams.data,function(t){t.checked&&e.push(t.id)}),d.setDeleted(e).then(function(e){g.tableParams.reload()},function(e){alert(e)})},g.addTickler=function(){r.open({templateUrl:"src/tickler/ticklerAdd.jsp",controller:"Tickler.TicklerAddController as ticklerAddCtrl",backdrop:"static",size:"lg"}).result.then(function(e){console.log("data from modalInstance "+e),null!=e&&1==e&&g.tableParams.reload()},function(e){alert(e)})},g.editTickler=function(e){r.open({templateUrl:"src/tickler/ticklerView.jsp",controller:"Tickler.TicklerViewController as ticklerViewCtrl",backdrop:"static",size:"lg",resolve:{tickler:function(){return e},ticklerNote:function(){return p.getTicklerNote(e.id)},ticklerWriteAccess:function(){return g.ticklerWriteAccess},me:function(){return m.getMe()}}}).result.then(function(e){console.log("data from modalInstance "+e),null!=e&&1==e&&g.tableParams.reload()},function(e){alert(e)})},g.editNote2=function(e){p.getTicklerNote(e.id).then(function(t){null!=t.ticklerNote?g.ticklerNote=t.ticklerNote:g.ticklerNote={editor:"you",note:"",noteId:0,observationDate:"now",revision:0};r.open({templateUrl:"src/tickler/ticklerNote.jsp",controller:"Tickler.TicklerNoteController as ticklerNoteCtrl",backdrop:"static",resolve:{ticklerNote:function(){return g.ticklerNote},tickler:function(){return e}}})},function(e){alert(e)})},g.showComments=function(e){g.tickler=e;r.open({templateUrl:"src/tickler/ticklerComments.jsp",controller:"Tickler.TicklerCommentController as ticklerCommentCtrl",backdrop:"static",resolve:{tickler:function(){return g.tickler}}})},g.printArea=function(){window.print()},g.getLinkUrl=function(e){if(null!==e&&null!==e.id){var t="";return"CML"===e.tableName?t="../lab/CA/ON/CMLDisplay.jsp?segmentID="+e.tableId:"MDS"===e.tableName?t="../oscarMDS/SegmentDisplay.jsp?segmentID="+e.tableId:"HL7"===e.tableName?t="../lab/CA/ALL/labDisplay.jsp?segmentID="+e.tableId:"DOC"===e.tableName&&(t="../dms/ManageDocument.do?method=display&doc_no="+e.tableId),t}},g.inDemographicView=function(){return null!=n.params.demographicNo}}])}).call(this,n(6))},function(e,t,n){(function(e){angular.module("Tickler").controller("Tickler.TicklerViewController",["$scope","$filter","$uibModalInstance","$timeout","tickler","ticklerService","ticklerNote","ticklerWriteAccess","providerService","me",function(t,n,o,a,r,i,l,s,c,u){var d=this;d.ticklerUpdate=angular.copy(r),d.serviceDateInput=e(d.ticklerUpdate.serviceDate).toDate(),d.serviceTimeInput=e(d.ticklerUpdate.serviceDate).format("hh:mm A"),d.me=u,d.ticklerWriteAccess=s,d.needsUpdate=!1,d.showUpdates=!1,d.showComments=!1,d.showCommentFormControl=!1,d.priorities=["Low","Normal","High"],d.statuses=[{id:"A",label:"Active"},{id:"C",label:"Completed"},{id:"D",label:"Deleted"}],null!=l&&(d.ticklerNote=l.ticklerNote),null!=r&&(d.selectedStatus=d.statuses.find(function(e){return e.id==r.status})),t.$watch(function(){return d.serviceDateInput},function(t){var n=e(t.getTime()).format("MM-DD-YYYY"),o=e(n+"-"+d.serviceTimeInput,"MM-DD-YYYY-hh:mm A").toDate().getTime();d.ticklerUpdate.serviceDate=o}),t.$watch(function(){return d.serviceTimeInput},function(t){var n=e(d.serviceDateInput.getTime()).format("MM-DD-YYYY"),o=e(n+"-"+t,"MM-DD-YYYY-hh:mm A").toDate().getTime();d.ticklerUpdate.serviceDate=o}),d.close=function(){d.needsUpdate?confirm("You have unsaved changes, are you sure?")&&o.close(!1):(d.ticklerUpdate=void 0,o.close(!1))},d.save=function(){o.close("Someone Saved Me")},d.updateTaskAssignedTo=function(e,t,n){d.needsUpdate=!0,d.ticklerUpdate.taskAssignedTo=t,d.ticklerUpdate.taskAssignedToName=n,d.showTaskAssignedToFormControl=!1},d.cancelTaskAssignedToUpdate=function(){d.ticklerUpdate.taskAssignedTo=null,d.ticklerUpdate.taskAssignedToName=null,d.showTaskAssignedToFormControl=!1},d.editServiceDateAndTime=function(){d.showServiceDateAndTimeFormControl=!0},d.updateServiceDateAndTime=function(){var e=d.ticklerUpdate.serviceDate.split("-"),t=d.ticklerUpdate.serviceTime.split(":");if(3==e.length&&2==t.length){var n=new Date(e[0],parseInt(e[1])-1,e[2],t[0],t[1],0,0);null==n||isNaN(n.getTime())?alert("Invalid Date/time. Please use yyyy-MM-dd and HH:mm formats"):(d.needsUpdate=!0,d.tickler.serviceDate=n,d.showServiceDateAndTimeFormControl=!1)}else alert("Invalid Date/time. Please use yyyy-MM-dd and HH:mm formats")},d.cancelServiceDateAndTimeUpdate=function(){d.ticklerUpdate.serviceDate=null,d.showServiceDateAndTimeFormControl=!1},d.editPriority=function(){d.priorities=["Low","Normal","High"],d.showPriorityFormControl=!0},d.updatePriority=function(e){d.needsUpdate=!0,d.showPriorityFormControl=!1},d.cancelPriorityUpdate=function(){d.ticklerUpdate.priority=null,d.showPriorityFormControl=!1},d.editStatus=function(){d.showStatusFormControl=!0},d.updateStatus=function(e){d.needsUpdate=!0,d.ticklerUpdate.status=e.id,d.ticklerUpdate.statusName=e.label,d.showStatusFormControl=!1},d.cancelStatusUpdate=function(){d.ticklerUpdate.statusName=null,d.ticklerUpdate.status=null,d.showStatusFormControl=!1},d.addComment=function(){d.showCommentFormControl=!0},d.saveComment=function(){d.needsUpdate=!0,null==d.ticklerUpdate.ticklerComments&&(d.ticklerUpdate.ticklerComments=[]);var e={message:d.ticklerUpdate.comment,providerName:u.formattedName,providerNo:u.providerNo,updateDate:new Date,newComment:!0};d.ticklerUpdate.ticklerComments.unshift(e),d.showCommentFormControl=!1,d.showComments=!0},d.cancelCommentUpdate=function(){d.ticklerUpdate.comment=null,d.showCommentFormControl=!1},d.searchProviders=function(e){var t={searchTerm:e,active:!0};return c.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t})},d.saveChanges=function(){if(r.message!=d.ticklerUpdate.message&&(d.needsUpdate=!0),r.serviceDate!=d.ticklerUpdate.serviceDate&&(d.needsUpdate=!0),d.needsUpdate){var e=angular.copy(d.ticklerUpdate);console.log("Post DATA: ",e),i.update(e).then(function(e){o.close(!0)})}else o.close(!1)},d.completeTickler=function(){i.setCompleted([r.id]).then(function(e){o.close(!0)},function(e){alert(e)})},d.deleteTickler=function(){i.setDeleted([r.id]).then(function(e){o.close(!0)},function(e){alert(e)})},d.printTickler=function(){window.open("../Tickler.do?method=print&id="+r.id)}}])}).call(this,n(6))},function(e,t,n){(function(e,t){angular.module("Tickler").controller("Tickler.TicklerAddController",["$scope","$uibModalInstance","$filter","$stateParams","demographicService","demographicsService","providerService","ticklerService",function(n,o,a,r,i,l,s,c){var u=this;u.demographicSearch=null,u.tickler={template:{id:1,name:""},serviceDateDate:new Date,serviceDateTime:"12:00 AM",suggestedTextId:0},u.priorities=["Low","Normal","High"],u.init=function(){Juno.Common.Util.exists(r.demographicNo)&&(console.log("initializing demographicSearch pre-selected",r.demographicNo),i.getDemographic(r.demographicNo).then(function(e){u.demographicSearch={demographicNo:e.demographicNo,firstName:e.firstName,lastName:e.lastName,name:e.lastName+","+e.firstName},u.updateDemographicNo(e)})),e("#timepicker").timepicker({defaultTime:u.tickler.serviceDateTime})},c.getTextSuggestions().then(function(e){u.textSuggestions=e.content,u.textSuggestions.unshift({id:0,suggestedText:""})},function(e){alert(e)}),u.close=function(){o.close(!1)},u.validate=function(){var e=u.tickler;return u.errors=[],null==e.demographic&&u.errors.push("You must select a patient"),null!=e.taskAssignedTo&&0!=e.taskAssignedTo.length||u.errors.push("You must assign a provider"),null!=e.message&&0!=e.message.length||u.errors.push("Message is required"),!(u.errors.length>0)},u.save=function(){if(u.showErrors=!0,u.validate()){var e={};e.demographicNo=u.tickler.demographic.demographicNo,e.taskAssignedTo=u.tickler.taskAssignedTo,e.priority=u.tickler.priority,e.status="A",e.message=u.tickler.message;var n=u.tickler.serviceDateDate,a=t(u.tickler.serviceDateTime,"hh:mm A");n.setHours(a.get("hour")),n.setMinutes(a.get("minute")),e.serviceDate=n,c.add(e).then(function(e){o.close(!0)},function(e){alert(e)})}},u.updateDemographicNo=function(e){Juno.Common.Util.exists(e)?i.getDemographic(e.demographicNo).then(function(e){u.tickler.demographic=e,console.log("set controller.tickler.demographic: ",u.tickler.demographic)}):u.tickler.demographic=null},u.searchPatients=function(e){var t={type:l.SEARCH_MODE.Name,term:e,status:l.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return l.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push({demographicNo:e.data[n].demographicNo,name:e.data[n].lastName+","+e.data[n].firstName});return t},function(e){console.log(e)})},u.searchProviders=function(e){var t={searchTerm:e,active:!0};return s.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t})},u.updateProviderNo=function(e,t,n){u.tickler.taskAssignedTo=t,u.tickler.taskAssignedToName=n},u.setSuggestedText=function(){var e=a("filter")(u.textSuggestions,{id:u.tickler.suggestedTextId},!0);null!=e&&(u.tickler.message=e[0].suggestedText)},u.addMonthsFromNow=function(e){u.tickler.serviceDateDate=t().add(e,"months").toDate()}}])}).call(this,n(4),n(6))},function(e,t){angular.module("Tickler").controller("Tickler.TicklerNoteController",["$scope","$uibModalInstance","$http","ticklerNote","tickler","noteService",function(e,t,n,o,a,r){var i=this;i.ticklerNote=o,i.originalNote=o.note,i.tickler=a,i.close=function(){t.close("Someone Closed Me")},i.save=function(){i.ticklerNote.note;i.ticklerNote.tickler=i.tickler,r.saveTicklerNote(i.ticklerNote).then(function(e){t.close("Someone Saved Me")},function(e){alert(e)})}}])},function(e,t){angular.module("Tickler").controller("Tickler.TicklerCommentController",["$scope","$uibModalInstance","tickler",function(e,t,n){this.tickler=n,this.close=function(){t.close("Someone Closed Me")}}])},function(e,t,n){"use strict";angular.module("Schedule",["Common","Common.Services","Common.Components","Patient"])},function(e,t,n){"use strict";n.r(t),function(e,t){var o=n(8),a=n(7),r=n(15),i=n(16),l=n(12);angular.module("Schedule").controller("Schedule.ScheduleController",["$scope","$stateParams","$q","$http","$httpParamSerializer","$uibModal","$state","loadedSettings","providerService","providersService","formService","focusService","securityService","scheduleService","uiCalendarConfig","errorsService","globalStateService",function(s,c,u,d,p,m,h,g,f,v,b,S,C,N,y,_,A){let D=this;s.appointmentApi=new o.AppointmentApi(d,p,"../ws/rs"),s.scheduleApi=new a.ScheduleApi(d,p,"../ws/rs"),s.sitesApi=new r.SitesApi(d,p,"../ws/rs"),s.providerPreferenceApi=new i.ProviderPreferenceApi(d,p,"../ws/rs"),D.systemPreferencesApi=new l.SystemPreferenceApi(d,p,"../ws/rs"),D.providerSettings=g,D.calendarMinColumnWidth=250,s.calendarName="cpCalendar",s.initialized=!1,s.calendarLoading=!1,s.customLoading=!1,s.displayMessages=_.factory(),s.uiConfig={},s.uiConfigApplied={calendar:{}},s.eventSources=[],s.cpCalendarControl={},s.scheduleOptions=[],s.resourceOptionHash={},s.selectedResources=!1,s.showNoResources=!1,s.timeIntervalOptions=[{label:"5 min intervals",value:"00:05:00"},{label:"10 min intervals",value:"00:10:00"},{label:"15 min intervals",value:"00:15:00"},{label:"20 min intervals",value:"00:20:00"},{label:"30 min intervals",value:"00:30:00"}],s.defaultTimeInterval=s.timeIntervalOptions[2].value,s.selectedTimeInterval=s.defaultTimeInterval,s.scheduleTimeInterval=null,s.selectedSlotLabelInterval={hours:1},s.availabilityTypes={},s.events=[],s.scheduleTemplates={},s.sites={},s.siteOptions=[],s.sitesEnabled=!1,s.selectedSiteName=null,s.telehealthEnabled=!1,s.openingDialog=!1,s.dialog=null,D.calendarViewEnum=Object.freeze({agendaDay:"agendaDay",agendaWeek:"agendaWeek",agendaMonth:"month"}),s.calendarViewDefault=D.calendarViewEnum.agendaDay,s.calendarViewName=null,D.scheduleViewEnum=Object.freeze({schedule:"schedule",all:"all"}),D.selectedScheduleView=D.scheduleViewEnum.all,D.scheduleTypeEnum=Object.freeze({group:"GROUP",provider:"PROVIDER"}),s.selectedSchedule=null,D.refreshSettings={timerVariable:null,defaultAutoRefreshMinutes:3,preferredAutoRefreshMinutes:null},s.defaultDate=A.global_settings.schedule.date_selected,s.datepickerSelectedDate=null,D.formLinks={enabled:!0,maxLength:2,formNameMap:{},eFormNameMap:{},quickLinkMap:{}},s.init=function(){s.uiConfig.calendar.defaultView=s.getCalendarViewName(),s.loadAvailabilityTypes().then(function(){N.loadEventStatuses().then(function(){s.loadScheduleOptions().then(function(){D.loadResourceHash().then(function(){s.loadSiteOptions().then(function(){D.loadExtraLinkData().then(function(){D.loadTelehealthEnabled().then(function(){s.loadDefaultSelections(),s.setEventSources(),D.initEventsAutoRefresh(),s.applyUiConfig(s.uiConfig),D.loadWatches(),s.initialized=!0})})})})})})})},s.calendar=function(){return y.calendars[s.calendarName]},s.isSchedulingEnabled=function(){return!0},s.isInitialized=function(){return s.initialized&&Juno.Common.Util.exists(s.calendar())},s.hasSites=function(){return s.sitesEnabled},s.getTimeIntervalOptions=function(){return s.timeIntervalOptions},s.getScheduleOptions=function(){return s.scheduleOptions},s.getSiteOptions=function(){return s.siteOptions},s.getCalendarViewName=function(){var e=s.calendarViewName;return Juno.Common.Util.exists(e)?e:(e=A.global_settings.schedule.view_selected,Juno.Common.Util.exists(e)||(e=s.calendarViewDefault),e)},s.calendarEvents=function(e,t,n,o){s.loadScheduleEvents(s.selectedSchedule,s.selectedSiteName,e,t).then(function(){try{o(s.events)}catch(e){}})},s.showTimeIntervals=function(){return s.getCalendarViewName()!==D.calendarViewEnum.agendaMonth},D.changeToSchedule=function(e,t){s.selectedSchedule=null;for(var n=s.getScheduleOptions(),o=0;o<n.length;o++)if(n[o].uuid===e){s.selectedSchedule=n[o];break}if(null===s.selectedSchedule){var a=s.resourceOptionHash[e];a.label=a.title,a.uuid=a.id,a.value=a.id,a.identifier=a.id,a.identifierType=D.scheduleTypeEnum.provider,a.providerNos=[e],s.selectedSchedule=a}s.calendarViewName=t,s.onScheduleChanged()},s.changeCalendarView=function(e){s.calendarViewName!==e&&(s.calendarViewName=e,A.global_settings.schedule.view_selected=s.calendarViewName,s.calendar().fullCalendar("changeView",s.getCalendarViewName()))},D.changeScheduleView=function(e){D.selectedScheduleView!==e&&s.providerPreferenceApi.updateProviderSetting(C.getUser().providerNo,"schedule.view",e).then(function(){D.selectedScheduleView=e,s.refetchEvents()},function(){s.displayMessages.add_standard_error("Failed to update provider setting")})},s.stepBack=function(){s.calendar().fullCalendar("prev")},s.stepForward=function(){s.calendar().fullCalendar("next")},s.refetchEvents=function(){s.calendar().fullCalendar("refetchEvents")},s.$on("schedule:refreshEvents",function(e,t){s.refetchEvents()}),s.changeDate=function(e){A.global_settings.schedule.date_selected=e,s.uiConfig.calendar.defaultDate=e,s.calendar().fullCalendar("gotoDate",e)},s.isAgendaView=function(){return null===s.uiConfigApplied.calendar.resources||!1===s.uiConfigApplied.calendar.resources},s.isResourceView=function(){return null!==s.uiConfigApplied.calendar.resources&&!1!==s.uiConfigApplied.calendar.resources},s.isScheduleView=function(){return D.selectedScheduleView===D.scheduleViewEnum.schedule},s.isAgendaDayView=function(){return s.isAgendaView()&&s.getCalendarViewName()===D.calendarViewEnum.agendaDay},s.isAgendaWeekView=function(){return s.isAgendaView()&&s.getCalendarViewName()===D.calendarViewEnum.agendaWeek},s.isAgendaMonthView=function(){return s.isAgendaView()&&s.getCalendarViewName()===D.calendarViewEnum.agendaMonth},s.getSelectedSchedule=function(e){if(null!==s.selectedSchedule)return s.selectedSchedule;var t=D.providerSettings.groupNo;if(Juno.Common.Util.exists(t))for(var n=0;n<e.length;n++)if(t===e[n].uuid)return e[n];return e.length>0?e[0]:null},D.getSelectedScheduleView=function(){var e=D.providerSettings.viewSelected;return Juno.Common.Util.exists(e)&&e===D.scheduleViewEnum.schedule?D.scheduleViewEnum.schedule:D.scheduleViewEnum.all},D.getSelectedSite=function(){var e=D.providerSettings.siteSelected;return Juno.Common.Util.exists(e)?e:null},D.hasPatientSelected=function(e){return Juno.Common.Util.exists(e.data.demographicNo)&&Number(e.data.demographicNo)>0},s.setCalendarLoading=function(e){s.calendarLoading=e},s.setCustomLoading=function(e){s.customLoading=e},s.setEventSources=function(){s.eventSources.push(s.calendarEvents)},s.updateEvent=function(e){s.calendar().fullCalendar("updateEvent",e)},s.timeIntervalMinutes=function(){return parseInt(s.selectedTimeInterval.split(":")[1])},s.getSelectedTimeInterval=function(e,t){var n=null,o=s.scheduleTimeInterval;if(null===o){var a=D.providerSettings.period;Juno.Common.Util.exists(a)&&Juno.Common.Util.isIntegerString(a)&&(o="00:"+Juno.Common.Util.pad0(a)+":00")}if(Juno.Common.Util.exists(o))for(var r=0;r<e.length;r++)if(o===e[r].value){n=e[r].value;break}return null===n?t:n},s.getScheduleMinTime=function(){var e="08:00",t=D.providerSettings.startHour;return Juno.Common.Util.exists(t)&&Juno.Common.Util.isIntegerString(t)&&Number(t)>0&&Number(t)<24&&(e=Juno.Common.Util.pad0(t)+":00"),e},s.getScheduleMaxTime=function(){var e="20:00",t=D.providerSettings.endHour;return Juno.Common.Util.exists(t)&&Juno.Common.Util.isIntegerString(t)&&Number(t)>0&&Number(t)<24&&(e=Juno.Common.Util.pad0(t)+":00"),e},s.loadScheduleEvents=function(e,t,n,o){var a=u.defer();s.setCustomLoading(!0),s.isAgendaWeekView()&&(o=angular.copy(n).endOf("week"),n=angular.copy(n).startOf("week"));var r=n.format(Juno.Common.Util.settings.date_format),i=o.subtract(1,"seconds").format(Juno.Common.Util.settings.date_format);return s.scheduleApi.getCalendarSchedule(e.identifier,e.identifierType,s.isScheduleView(),r,i,s.getScheduleMinTime(),s.getScheduleMaxTime(),t,s.timeIntervalMinutes()).then(function(t){var n=t.data.body.visibleSchedules;if(s.showNoResources=!n,s.uiConfig.calendar.hiddenDays=[],e.identifierType===D.scheduleTypeEnum.group){var o=t.data.body.providerIdList;s.selectedResources=D.buildSelectedResources(o),s.uiConfig.calendar.resources=s.selectedResources,s.uiConfig.calendar.defaultView=D.calendarViewEnum.agendaDay,s.calendarViewName=D.calendarViewEnum.agendaDay}else{s.uiConfig.calendar.defaultView=s.getCalendarViewName(),s.calendarViewName=s.getCalendarViewName(),s.uiConfig.calendar.resources=!1;var r=t.data.body.hiddenDaysList;7!==r.length&&(s.isAgendaWeekView()||s.isAgendaMonthView())&&(s.uiConfig.calendar.hiddenDays=r)}s.applyUiConfig(s.uiConfig),s.events=t.data.body.eventList,s.setCustomLoading(!1),a.resolve(t.data.body)},function(e){s.displayMessages.add_standard_error("Failed to load events"),a.reject(e.data.body)}),a.promise},D.buildSelectedResources=function(e){for(var t=[],n=0;n<e.length;n++){var o=s.resourceOptionHash[e[n]];o?t.push(o):console.warn("Attempt to load invalid resource id: "+e[n])}return t},s.setCalendarResources=function(e){s.uiConfig.calendar.resources=!!e&&s.selectedResources,s.applyUiConfig(s.uiConfig)},s.saveEvent=function(e,t,n){var o=u.defer();if(e)this.appointmentApi.updateAppointment(t).then(function(e){o.resolve(e.data)},function(e){s.displayMessages.add_standard_error("Failed to update appointment"),o.reject(e.data)});else if(n&&n.length>0){var a={appointment:t,dateList:n};s.appointmentApi.addRepeatingAppointment(a).then(function(e){o.resolve(e.data)},function(e){s.displayMessages.add_standard_error("Failed to add reoccurring appointment"),o.reject(e.data)})}else s.appointmentApi.addAppointment(t).then(function(e){o.resolve(e.data)},function(e){s.displayMessages.add_standard_error("Failed to add appointment"),o.reject(e.data)});return o.promise},s.moveEvent=function(e,t,n){var o=u.defer(),a=Juno.Common.Util.getDatetimeNoTimezoneMoment(e.startTime),r=Juno.Common.Util.getDatetimeNoTimezoneMoment(e.endTime),i=angular.copy(e);return n&&(i.startTime=Juno.Common.Util.formatMomentDateTimeNoTimezone(a.add(t.asMinutes(),"minutes"))),i.endTime=Juno.Common.Util.formatMomentDateTimeNoTimezone(r.add(t.asMinutes(),"minutes")),s.saveEvent(!0,i).then(function(e){o.resolve(e.body)},function(e){o.reject(e.body)}),o.promise},D.moveEventSuccess=function(t,n){var o=e(t.startTime,"YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ",!1),a=e(t.endTime,"YYYY-MM-DDTHH:mm:ss.SSS+ZZZZ",!1);n.start=Juno.Common.Util.formatMomentTime(o,Juno.Common.Util.settings.datetime_no_timezone_format),n.end=Juno.Common.Util.formatMomentTime(a,Juno.Common.Util.settings.datetime_no_timezone_format),n.data.startTime=n.start,n.data.endTime=n.end,n.data.providerNo=t.providerNo,n.resourceId=t.providerNo;for(var r=0;r<s.events.length;r++)if("background"!==s.events[r].rendering&&s.events[r].data.appointmentNo===n.data.appointmentNo){s.events[r]=angular.copy(n);break}},s.processSaveResults=function(e,t){if("SUCCESS"===(e||{}).status)return!0;var n=((e||{}).error||{}).message,o=((e||{}).error||{}).validationErrors;if(Array.isArray(o)){t.add_standard_error(n);for(var a=0;a<o.length;a++){var r=o[a];t.add_field_error(r.path,r.message)}}},s.deleteEvent=function(e){var t=u.defer();return s.appointmentApi.deleteAppointment(e).then(function(e){t.resolve(e.data)},function(e){s.displayMessages.add_standard_error("Failed to delete appointment"),t.reject(e.data)}),t.promise},s.openCreateInvoice=function(e,t,n){var o=s.get_loaded_schedule(t),a=s.calendar_api_adapter.get_create_invoice_url(e,o.demographics_practitioner_uuid,n);window.window_scope=s,$window.open(a,"_blank")},s.rotateEventStatus=function(e){s.setCalendarLoading(!0);var t=e.data.appointmentNo;s.appointmentApi.setNextStatus(t).then(function(t){var n=t.data.body;e.color=N.getStatusByCode(n).color,e.data.eventStatusCode=n,s.updateEvent(e),s.setCalendarLoading(!1)},function(){s.displayMessages.add_standard_error("Failed to update status")})},D.buildEventLink=function(e,n,o){for(var a in n){var r=n[a]||"NA",i=Juno.Common.Util.trimToLength(r,D.formLinks.maxLength);e.append(t("<div>",{class:"event-item event-blk-label event-form-link"}).append(t("<a>",{class:"event-label "+o,text:i,title:r,"data-id":a})))}},s.onEventRender=function(e,t,o){if("background"!==e.rendering){let o=t.find(".fc-content");o.html(n(226));let i=o.find(".icon-status"),l=o.find(".event-label"),s=o.find(".event-details"),c=o.find(".self-book-indicator"),u=o.find(".event-telehealth");u.hide();let d=N.eventStatuses[e.data.eventStatusCode];Juno.Common.Util.exists(d)?(i.attr("title",d.name),Juno.Common.Util.exists(d.icon)?i.addClass("icon-"+d.icon.substr(0,d.icon.indexOf("."))):i.text(d.displayLetter),Juno.Common.Util.exists(d.sortOrder)&&i.addClass("rotate")):i.attr("title","Unknown").text("?");let p="",m="",h="";D.telehealthEnabled&&e.data.virtual&&u.show(),e.data.doNotBook?p="Do Not Book":Juno.Common.Util.isBlank(e.data.demographicName)?Juno.Common.Util.isBlank(e.data.appointmentName)||(p=e.data.appointmentName):p=e.data.demographicName,Juno.Common.Util.isBlank(e.data.reason)||(m=e.data.reason),Juno.Common.Util.isBlank(e.data.notes)||(h=e.data.notes);var a="";Juno.Common.Util.isBlank(m)||(a+="("+m+")");let g=p+"\nReason: "+m+"\nNotes: "+h;if(o.attr("title",g),!D.hasPatientSelected(e))o.find(".event-encounter, .event-invoice, .event-demographic, .event-rx").hide();Juno.Common.Util.exists(e.data.tagSelfBooked)&&e.data.tagSelfBooked&&(c.addClass("visible"),c.attr("title","Self Booked"),s.parent().addClass("show-self-booked"));var r=D.providerSettings.patientNameLength;if(Juno.Common.Util.exists(r)&&Juno.Common.Util.isIntegerString(r)&&Number(r)>0&&(p=Juno.Common.Util.trimToLength(p,Number(r))),l.text(p),s.append(a),D.formLinks.enabled&&D.hasPatientSelected(e)){let e=o.find(".inline-flex");D.buildEventLink(e,D.formLinks.formNameMap,"onclick-open-form"),D.buildEventLink(e,D.formLinks.eFormNameMap,"onclick-open-eform"),D.buildEventLink(e,D.formLinks.quickLinkMap,"onclick-open-quicklink")}}else{t.html(n(227));var i=t.find(".background-event-schedulecode");Juno.Common.Util.exists(e.color)&&i.css("background-color",e.color);var l=e.availabilityType;Juno.Common.Util.exists(l)&&Juno.Common.Util.exists(l.systemCode)&&(l.systemCodeVisible&&i.text(l.systemCode),Juno.Common.Util.exists(l.name)&&i.attr("title",l.name)),Juno.Common.Util.exists(e.start)&&0===e.start.minute()&&t.find(".background-event-schedulecode,.background-event-body").addClass("hour-marker")}},s.onViewRender=function(n,o){s.isInitialized()&&(s.datepickerSelectedDate=Juno.Common.Util.formatMomentDate(e(s.calendar().fullCalendar("getDate")))),t("#ca-calendar").css("min-width",t(".fc-resource-cell,.fc-day-header").length*D.calendarMinColumnWidth),o.addClass("calendar-background")},s.onResourceRender=function(e,t,o){t.html(n(228)),t.find(".hdr-label").text(e.display_name),t.find(".column-ctl-root").attr("data-resourceId",e.id),t.on("click",s.onHeaderClick)},s.afterRender=function(){t(".fc-agendaDay-button").click(function(){t("#schedule_container").css("min-width",t(".fc-resource-cell,.fc-day-header").length*D.calendarMinColumnWidth)})},s.onHeaderClick=function(e){var n=e.currentTarget.dataset.resourceId;t(e.target).is(".onclick-daysheet")?D.openDaysheet(n):t(e.target).is(".onclick-search")?(console.info("onclick-search clicked"),D.openScheduleSearchDialog(n)):t(e.target).is(".onclick-day-view")?(console.info("onclick-day-view clicked"),D.changeToSchedule(n,D.calendarViewEnum.agendaDay)):t(e.target).is(".onclick-week-view")?(console.info("onclick-week-view clicked"),D.changeToSchedule(n,D.calendarViewEnum.agendaWeek)):t(e.target).is(".onclick-month-view")&&(console.info("onclick-month-view clicked"),D.changeToSchedule(n,D.calendarViewEnum.agendaMonth))},s.onEventClick=function(e,n,o){var a=t(n.target);a.is(".onclick-event-status:not(.disabled)")?s.rotateEventStatus(e):a.is(".onclick-event-encounter:not(.disabled)")?D.openEncounterPage(e):a.is(".onclick-event-invoice:not(.disabled)")?D.openBillingPage(e):a.is(".onclick-event-demographic:not(.disabled)")?D.openMasterRecord(e):a.is(".onclick-event-rx:not(.disabled)")?D.openRxPage(e):a.is(".onclick-open-form")?D.openFormLink(a.attr("data-id"),e.data.demographicNo,e.data.appointmentNo):a.is(".onclick-open-eform")?b.openEFormInstancePopup(e.data.demographicNo,a.attr("data-id")):a.is(".onclick-open-quicklink")?D.openQuickLink(a.attr("data-id"),e.data.demographicNo,e.data.appointmentNo):a.is(".onclick-event-telehealth")?D.openTelehealthLink(e):s.openEditEventDialog(e)},D.openEncounterPage=function(t){if(g.hideOldEchartLinkInAppointment){if(0!==t.data.demographicNo){let e={demographicNo:t.data.demographicNo,appointmentNo:t.data.appointmentNo,encType:"face to face encounter with client"};h.go("record.summary",e)}}else if(0!==t.data.demographicNo){var n=Juno.Common.Util.getDatetimeNoTimezoneMoment(t.data.startTime),o={providerNo:t.resourceId,curProviderNo:t.data.userProviderNo,demographicNo:t.data.demographicNo,userName:t.data.userFirstName+" "+t.data.userLastName,reason:t.data.reason,curDate:Juno.Common.Util.formatMomentDate(e()),providerview:t.resourceId,appointmentNo:t.data.appointmentNo,appointmentDate:Juno.Common.Util.formatMomentDate(n),startTime:Juno.Common.Util.formatMomentTime(n),status:t.data.eventStatusCode,apptProvider_no:t.resourceId,encType:"face to face encounter with client"};window.open(N.getEncounterLink(o),"popupWindow","height=800,width=1000,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no")}},D.openBillingPage=function(e){if(0!==e.data.demographicNo){var t=Juno.Common.Util.getDatetimeNoTimezoneMoment(e.data.startTime),n={demographic_no:e.data.demographicNo,demographic_name:e.data.demographicName,providerNo:e.resourceId,providerview:e.resourceId,user_no:e.data.userProviderNo,billRegion:e.data.billingRegion,billForm:e.data.billingForm,hotclick:"",bNewForm:1,apptProvider_no:e.resourceId,appointment_no:e.data.appointmentNo,appointmentDate:Juno.Common.Util.formatMomentDate(t),status:e.data.eventStatusCode,start_time:Juno.Common.Util.formatMomentTime(t),referral_no_1:e.data.billingRdohip};window.open(N.getBillingLink(n))}},D.openMasterRecord=function(e){if(0!==e.data.demographicNo){var t={demographicNo:e.data.demographicNo};h.go("record.details",t)}},D.openRxPage=function(e){if(0!==e.data.demographicNo){var t={demographicNo:e.data.demographicNo,providerNo:e.resourceId};window.open(N.getRxLink(t))}},D.openTelehealthLink=function(e){0!==e.data.demographicNo&&e.data.virtual&&window.open("../integrations/myhealthaccess.do?method=connect&demographicNo="+encodeURIComponent(e.data.demographicNo)+"&siteName="+encodeURIComponent(e.data.site)+"&appt="+encodeURIComponent(e.data.appointmentNo),"_blank")},D.openDaysheet=function(e){var t=s.datepickerSelectedDate;window.open("../report/reportdaysheet.jsp?dsmode=all&provider_no="+encodeURIComponent(e)+"&sdate="+encodeURIComponent(t)+"&edate="+encodeURIComponent(t),"daysheet","height=700,width=1024,scrollbars=1").focus()},D.openFormLink=function(e,t,n){var o="../form/forwardshortcutname.jsp?formname="+encodeURIComponent(e)+"&demographic_no="+encodeURIComponent(t)+"&appointmentNo="+encodeURIComponent(n);"__intakeForm"===e&&(o="../provider/formIntake.jsp?demographic_no="+encodeURIComponent(t)),window.open(o,"Form_"+encodeURIComponent(t)+"_"+encodeURIComponent(e),"height=700,width=1024,scrollbars=1").focus()},D.openEFormLink=function(e,t,n){var o="../eform/efmformadd_data.jsp?fid="+encodeURIComponent(e)+"&demographic_no="+encodeURIComponent(t)+"&appointment="+encodeURIComponent(n);window.open(o,"Eform_"+encodeURIComponent(t)+"_"+encodeURIComponent(e),"height=700,width=1024,scrollbars=1").focus()},D.openQuickLink=function(e,t,n){e.startsWith("http://")&&e.startsWith("https://")||(e="https://"+e),window.open(e,"quickLink_"+e,"height=700,width=1024,scrollbars=1").focus()},s.getActiveTemplateEvents=function(e,t,n){for(var o=[],a=0;a<t.length;a++)if("background"===t[a].rendering&&t[a].resourceId===n){var r=angular.copy(t[a]);if(r.start=Juno.Common.Util.getDatetimeNoTimezoneMoment(r.start),r.end=Juno.Common.Util.getDatetimeNoTimezoneMoment(r.end),e.isValid()&&r.start.isValid()&&r.end.isValid()&&e.isBefore(r.end)&&e.isSameOrAfter(r.start)){var i=s.availabilityTypes[r.scheduleTemplateCode];Juno.Common.Util.exists(i)?r.availabilityType=i:r.availabilityType.duration=r.availabilityType.preferredEventLengthMinutes,o.push(r)}}return o},s.openCreateEventDialog=function(e,t,n,o,a){if(C.hasPermission("scheduling_create")){var r=null;Juno.Common.Util.exists(a)?r=a.id:null!==s.selectedSchedule&&(r=s.selectedSchedule.uuid);var i=s.getActiveTemplateEvents(e,s.events,Number(r))[0],l=s.timeIntervalMinutes();if(Juno.Common.Util.exists(i)&&Juno.Common.Util.exists(i.availabilityType)){e=i.start;var c=i.availabilityType.duration;Juno.Common.Util.exists(c)&&Juno.Common.Util.isIntegerString(c)&&(l=c)}t=angular.copy(e).add(l,"minutes"),D.openAppointmentDialog(!1,r,e,t,{})}},s.openEditEventDialog=function(e){C.hasPermission("scheduling_edit")&&D.openAppointmentDialog(!0,e.resourceId,e.start,e.end,e.data)},D.openAppointmentDialog=function(e,t,n,o,a){if(!s.openingDialog&&!s.dialog){s.openingDialog=!0;var r={scheduleId:t,startTime:n,endTime:o,defaultEventStatus:"t",timeInterval:s.timeIntervalMinutes(),sites:s.sites,events:s.events,eventData:a};s.dialog=m.open({animation:!1,backdrop:"static",component:"eventComponent",windowClass:"juno-modal",resolve:{parentScope:[function(){return s}],data:[function(){return r}],loadedSettings:[function(){return g}],editMode:[function(){return e}],keyBinding:[function(){return{bindKeyGlobal:function(){}}}],focus:[function(){return S}]}}),s.dialog.result.then(function(e){s.dialog=null},function(e){s.dialog=null}),s.openingDialog=!1}},D.openScheduleSearchDialog=function(e){C.hasPermission("scheduling_create")&&(s.openingDialog=!0,s.dialog=m.open({animation:!1,backdrop:"static",component:"scheduleSearch",windowClass:"juno-modal",resolve:{providerId:function(){return e},scheduleStartTime:function(){return s.getScheduleMinTime()},scheduleEndTime:function(){return s.getScheduleMaxTime()}}}),s.dialog.result.then(function(e){s.dialog=null,D.openAppointmentDialog(!1,e.resourceId,e.start,e.end,{})},function(e){s.dialog=null}),s.openingDialog=!1)},s.onEventDrop=function(e,t,n,o,a,r){if(C.hasPermission("scheduling_create")){s.setCalendarLoading(!0);var i=angular.copy(e.data);i.providerNo=e.resourceId,s.moveEvent(i,t,!0).then(function(t){D.moveEventSuccess(t,e),s.setCalendarLoading(!1)},function(e){console.log("failed to save event",e),n(),s.setCalendarLoading(!1)})}else n()},s.onEventResize=function(e,t,n,o,a,r){if(C.hasPermission("scheduling_create")){s.setCalendarLoading(!0);var i=angular.copy(e.data);i.providerNo=e.resourceId,s.moveEvent(i,t,!1).then(function(t){D.moveEventSuccess(t,e),s.setCalendarLoading(!1)},function(e){console.log("failed to resize event",e),n(),s.setCalendarLoading(!1)})}else n()},s.onSiteChanged=function(){var e=s.selectedSiteName;Juno.Common.Util.exists(e)||(s.selectedSiteName=null),s.providerPreferenceApi.updateProviderSetting(C.getUser().providerNo,"schedule.site",s.selectedSiteName).then(function(){D.providerSettings.siteSelected=s.selectedSiteName,s.refetchEvents()},function(){s.displayMessages.add_standard_error("Failed to update provider setting")})},s.onScheduleChanged=function(){var e=s.selectedSchedule;Juno.Common.Util.exists(e)&&s.providerPreferenceApi.updateProviderSetting(C.getUser().providerNo,"myGroupNo",e.identifier).then(function(){D.providerSettings.groupNo=e.identifier,e.identifierType===D.scheduleTypeEnum.group?(s.uiConfig.calendar.defaultView=D.calendarViewEnum.agendaDay,s.setCalendarResources(!0)):(s.calendarViewName=s.getCalendarViewName(),s.uiConfig.calendar.defaultView=s.getCalendarViewName(),s.setCalendarResources(!1)),s.refetchEvents()},function(){s.displayMessages.add_standard_error("Failed to update provider setting")})},s.onTimeIntervalChanged=function(){s.scheduleTimeInterval=s.selectedTimeInterval;var e=s.scheduleTimeInterval.split(":")[1];s.providerPreferenceApi.updateProviderSetting(C.getUser().providerNo,"everyMin",e).then(function(){D.providerSettings.period=Number(e),s.uiConfig.calendar.slotDuration=s.selectedTimeInterval,s.uiConfig.calendar.slotLabelInterval=s.selectedSlotLabelInterval,s.uiConfig.calendar.defaultDate=s.calendar().fullCalendar("getDate"),s.applyUiConfig(s.uiConfig)},function(){s.displayMessages.add_standard_error("Failed to update provider setting")})},s.loadScheduleOptions=function(){var e=u.defer();return s.scheduleApi.getScheduleGroups().then(function(t){for(var n=t.data.body,o=0;o<n.length;o++){var a=n[o];n[o].uuid=n[o].identifier,n[o].label=n[o].name,n[o].value=n[o].identifier,s.scheduleOptions.push(a)}e.resolve(n)},function(t){s.displayMessages.add_standard_error("Failed to load schedule groups"),e.reject(t)}),e.promise},D.loadResourceHash=function(){var e=u.defer();return v.getAll().then(function(t){for(var n=0;n<t.length;n++){var o=Number(t[n].providerNo);s.resourceOptionHash[o]={id:o,title:t[n].name,display_name:t[n].name}}e.resolve(s.resourceOptionHash)},function(){s.displayMessages.add_standard_error("Failed to load resource hash"),e.reject(s.resourceOptionHash)}),e.promise},s.loadSiteOptions=function(){var e=u.defer();return D.loadSitesEnabled().then(function(){s.sitesEnabled?s.loadSites().then(function(t){if(s.sites={},s.siteOptions=[],angular.isArray(t)&&t.length>0){for(var n=0;n<t.length;n++)s.sites[t[n].name]=t[n];s.siteOptions=[{uuid:null,value:null,label:"All Sites"}],s.siteOptions=s.siteOptions.concat(t)}e.resolve(t)}):e.resolve()}),e.promise},D.loadTelehealthEnabled=function(){let e=u.defer();return D.systemPreferencesApi.getPropertyEnabled("myhealthaccess_telehealth_enabled").then(function(t){var n=t.data.body;D.telehealthEnabled=n,e.resolve(n)},function(t){s.displayMessages.add_standard_error("Failed to load telehealth enabled"),e.reject(t.data.body)}),e.promise},D.loadSitesEnabled=function(){var e=u.defer();return s.sitesApi.getSitesEnabled().then(function(t){var n=t.data.body;s.sitesEnabled=n,e.resolve(n)},function(t){s.displayMessages.add_standard_error("Failed to load sites enabled"),e.reject(t.data.body)}),e.promise},s.loadSites=function(){var e=u.defer();return s.sitesApi.getSiteList().then(function(t){var n=t.data.body,o=[];if(angular.isArray(n))for(var a=0;a<n.length;a++)o.push({uuid:n[a].siteId,value:n[a].name,label:n[a].name,color:n[a].bgColor});e.resolve(o)},function(t){s.displayMessages.add_standard_error("Failed to load sites"),e.reject(t)}),e.promise},s.loadAvailabilityTypes=function(){var e=u.defer(),t={};return s.scheduleApi.getScheduleTemplateCodes().then(function(n){for(var o=n.data.body,a=0;a<o.length;a++){var r=o[a];t[r.code]=angular.copy(r)}s.availabilityTypes=t,e.resolve(t)},function(t){s.displayMessages.add_standard_error("Failed to load availablity types"),e.reject(t.data.body)}),e.promise},D.loadExtraLinkData=function(){var e=u.defer();if(D.formLinks.enabled){var t=D.providerSettings.appointmentScreenLinkNameDisplayLength;Juno.Common.Util.exists(t)&&Juno.Common.Util.isNumber(t)&&t>0&&(D.formLinks.maxLength=t);var n=D.providerSettings.appointmentScreenEforms;Juno.Common.Util.exists(n)&&n.length>0?b.getAllEForms().then(function(t){for(var o=0;o<t.length;o++){var a=t[o].id;if(n.includes(a)){var r=t[o].formName;D.formLinks.eFormNameMap[a]=r}}e.resolve()},function(){s.displayMessages.add_standard_error("Failed to load eform data"),e.reject()}):e.resolve();var o=D.providerSettings.appointmentScreenForms;if(Juno.Common.Util.exists(o))for(var a=0;a<o.length;a++){var r=o[a];D.formLinks.formNameMap[r]=r}var i=D.providerSettings.intakeFormEnabled;Juno.Common.Util.exists(i)&&i&&(D.formLinks.formNameMap.__intakeForm="Intake Form");var l=D.providerSettings.appointmentScreenQuickLinks;if(Juno.Common.Util.exists(l))for(a=0;a<l.length;a++){var c=l[a].name,d=l[a].url;D.formLinks.quickLinkMap[d]=c}}return e.promise},D.loadEformData=function(e){var t=u.defer();return eFormService.loadEForm(e).then(function(e){t.resolve(e)},function(n){s.displayMessages.add_standard_error("Failed to load eform "+e),t.reject(n)}),t.promise},s.loadDefaultSelections=function(){s.selectedSchedule=s.getSelectedSchedule(s.scheduleOptions),s.selectedSiteName=D.getSelectedSite(),D.selectedScheduleView=D.getSelectedScheduleView(),s.selectedTimeInterval=s.getSelectedTimeInterval(s.timeIntervalOptions,s.defaultTimeInterval),s.uiConfig.calendar.slotDuration=s.selectedTimeInterval,s.uiConfig.calendar.slotLabelInterval=s.selectedSlotLabelInterval,s.uiConfig.calendar.minTime=s.getScheduleMinTime(),s.uiConfig.calendar.maxTime=s.getScheduleMaxTime(),s.uiConfig.calendar.scrollTime=e().subtract(1,"hours").format("HH:mm:ss")},D.loadWatches=function(){s.$watch("datepickerSelectedDate",function(e,t){if(e!==t){var n=Juno.Common.Util.getDateMoment(e);s.changeDate(n)}}),s.$watch("selectedSiteName",function(e,t){e!==t&&s.onSiteChanged()}),s.$watch("selectedTimeInterval",function(e,t){e!==t&&s.onTimeIntervalChanged()})},s.applyUiConfig=function(e){s.uiConfigApplied=angular.copy(e)},D.initEventsAutoRefresh=function(){var e=u.defer(),t=D.refreshSettings.timerVariable;null!==t&&clearInterval(t);var n=D.refreshSettings.preferredAutoRefreshMinutes;return(n=Juno.Common.Util.exists(n)&&Juno.Common.Util.isIntegerString(n)?parseInt(n):D.refreshSettings.defaultAutoRefreshMinutes)>0&&(D.refreshSettings.timerVariable=setInterval(s.refetchEvents,60*n*1e3)),e.resolve(),e.promise},s.$on("$destroy",function(){D.refreshSettings.timerVariable&&clearInterval(D.refreshSettings.timerVariable)}),s.uiConfig={calendar:{height:"parent",nowIndicator:!0,header:!1,columnHeader:!0,views:{day:{columnHeaderFormat:"dddd MMMM Do"},week:{columnHeaderFormat:"dddd MMM Do"},month:{columnHeaderFormat:"dddd"}},hiddenDays:[],allDaySlot:!1,agendaEventMinHeight:18,defaultView:null,defaultDate:s.defaultDate,slotDuration:s.selectedTimeInterval,snapDuration:"00:05:00",slotLabelInterval:s.selectedSlotLabelInterval,slotLabelFormat:"h A",slotEventOverlap:!1,lazyFetching:!1,resources:!1,resourceOrder:"id",loading:s.setCalendarLoading,selectable:!0,select:s.openCreateEventDialog,eventClick:s.onEventClick,eventRender:s.onEventRender,viewRender:s.onViewRender,resourceRender:s.onResourceRender,navLinkDayClick:s.onHeaderClick,navLinkWeekClick:s.onHeaderClick,eventAfterAllRender:s.afterRender,editable:!0,eventDrop:s.onEventDrop,eventResize:s.onEventResize,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source"}},s.init()}])}.call(this,n(6),n(4))},function(e,t){e.exports='<div class="schedule-event event-color">\n\t<div class="event-block">\n\t\t<div class="inline-flex">\n\n\t\t\t<button class="event-item btn btn-icon  event-status">\n\t\t\t\t<i class="icon icon-status onclick-event-status"></i>\n\t\t\t</button>\n\n\t\t\t<button class="event-item btn btn-icon event-status event-telehealth onclick-event-telehealth">\n\t\t\t\t<i class="icon icon-video-2 onclick-event-telehealth"></i>\n\t\t\t</button>\n\n\t\t\t<button class="event-item btn btn-event-link event-encounter onclick-event-encounter">\n\t\t\t\tE\n\t\t\t</button>\n\t\t\t<button class="event-item btn btn-event-link event-invoice onclick-event-invoice">\n\t\t\t\tB\n\t\t\t</button>\n\t\t\t<button class="event-item btn btn-event-link event-demographic onclick-event-demographic">\n\t\t\t\tM\n\t\t\t</button>\n\t\t\t<button class="event-item btn btn-event-link event-rx onclick-event-rx">\n\t\t\t\tRx\n\t\t\t</button>\n\t\t\t<div class="event-item event-blk-label">\n\t\t\t\t<span class="event-label bold"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<span class="event-details"></span>\n\n\t\t<div class="event-item self-book-indicator"></div>\n\t</div>\n</div>'},function(e,t){e.exports='<div class="schedule-background-event">\n\t<span class="background-event-schedulecode">\n\t</span>\n\t<div class="background-event-body">\n\t</div>\n</div>'},function(e,t){e.exports='<div class="column-ctl-root flex-column">\n\t<div class="column-ctl flex-grow flex-row">\n\t\t<div class="column-ctl btn-icon"\n\t\t\t title="Daysheet">\n\t\t\t<i class="icon icon-day-sheet onclick-daysheet"></i>\n\t\t</div>\n\t\t<div class="column-ctl btn-icon"\n\t\t     title="Search">\n\t\t\t<i class="icon icon-calendar-search onclick-search"></i>\n\t\t</div>\n\t\t<div class="column-ctl flex-grow">\n\t\t\t<a class="hdr-label onclick-day-view"></a>\n\t\t</div>\n\t\t<div class="column-ctl btn-icon"\n\t\t     title="Week View">\n\t\t\t<i class="icon icon-calendar-week onclick-week-view"></i>\n\t\t</div>\n\t\t<div class="column-ctl btn-icon"\n\t\t     title="Month View">\n\t\t\t<i class="icon icon-calendar onclick-month-view"></i>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";n.r(t),function(e,t){var o=n(7),a=n(8),r=n(13);angular.module("Schedule").component("eventComponent",{templateUrl:"src/schedule/event.jsp",bindings:{modalInstance:"<",resolve:"<"},controllerAs:"eventController",controller:["$scope","$q","$http","$httpParamSerializer","$timeout","$state","$uibModal","errorsService","demographicService","providerService","securityService","scheduleService",function(n,i,l,s,c,u,d,p,m,h,g,f){let v=this;n.scheduleApi=new o.ScheduleApi(l,s,"../ws/rs"),n.appointmentApi=new a.AppointmentApi(l,s,"../ws/rs");let b=new r.SitesApi(l,s,"../ws/rs");v.useOldEchart=!0,v.tabEnum=Object.freeze({appointment:0,repeatBooking:1,history:2}),v.activeTab=v.tabEnum.appointment,v.appointmentTypeList=[],v.reasonCodeList=[],n.eventUuid=null,n.eventData={startDate:null,startTime:null,reason:null,reasonCode:null,notes:null,type:null,duration:null,doNotBook:!1,critical:!1,site:null,virtual:!1},v.repeatBooking={disabled:!g.getUser().superAdmin,max_bookings_limit:100,toggleEnum:Object.freeze({on:"on",off:"off"}),endTypeEnum:Object.freeze({date:"date",after:"after"}),intervalOptions:[{label:"days",value:"days"},{label:"weeks",value:"weeks"},{label:"months",value:"months"}],frequencyOptions:[{label:"1x",value:1},{label:"2x",value:2},{label:"3x",value:3}]},v.repeatBookingData={enabled:v.repeatBooking.toggleEnum.off,frequency:v.repeatBooking.frequencyOptions[0].value,interval:v.repeatBooking.intervalOptions[0].value,endDate:Juno.Common.Util.formatMomentDate(e().add(1,"days")),endAfterNumber:1,endType:v.repeatBooking.endTypeEnum.date},v.repeatBookingDates=null,v.eventHistory=[],v.patientTypeahead={},n.autocompleteValues={},v.eventStatuses=f.eventStatuses,n.eventStatusOptions=[],v.selectedEventStatus=null,n.defaultEventStatus=null,n.timepickerFormat="h:mm A",n.fieldValueMapping={startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time"},n.displayMessages=p.factory(),n.initialized=!1,n.working=!1,v.isDoubleBook=!1,v.isDoubleBookPrevented=!1,v.siteOptions=[],v.providerModel={providerNo:null,firstName:null,lastName:null,displayName:"",title:null,loadData:function(e){var t=this;t.providerNo=e,h.getProvider(e).then(function(e){t.firstName=e.firstName,t.lastName=e.lastName,t.title="Dr.",t.displayName=Juno.Common.Util.toTrimmedString(t.title)+" "+Juno.Common.Util.toTrimmedString(t.firstName)+" "+Juno.Common.Util.toTrimmedString(t.lastName)})}},v.demographicModel={demographicNo:null,data:{},clear:function(){this.demographicNo=null,this.data={}},fillData:function(e){this.data=e,this.demographicNo=e.demographicNo},loadData:function(e){var t=i.defer();return Juno.Common.Util.exists(e)&&0!==e?m.getDemographic(e).then(function(e){v.demographicModel.fillData(e),t.resolve()},function(e){console.log("error initializing patient autocomplete",e),v.demographicModel.clear(),t.resolve()}):(v.demographicModel.clear(),t.resolve()),t.promise}},v.$onInit=function(){g.hasPermission("scheduling_create")||c(function(){n.cancel()}),v.loadedSettings=v.resolve.loadedSettings,v.parentScope=v.resolve.parentScope,v.keyBinding=v.resolve.keyBinding,v.editMode=v.resolve.editMode;var e=v.resolve.focus,t=v.resolve.data;n.events=t.events,n.scheduleId=t.scheduleId,v.sitesEnabled=v.parentScope.hasSites(),v.keyBinding.bindKeyGlobal("ctrl+enter",n.keyBindSettings["ctrl+enter"]),v.keyBinding.bindKeyGlobal("ctrl+shift+enter",n.keyBindSettings["ctrl+shift+enter"]),v.loadAppointmentReasons(),v.loadAppointmentTypes(),v.providerModel.loadData(t.scheduleId);var o=t.startTime,a=t.endTime;for(var r in n.eventData.startTime=Juno.Common.Util.formatMomentTime(o,n.timepickerFormat),n.eventData.startDate=Juno.Common.Util.formatMomentDate(o),v.eventStatuses)v.eventStatuses.hasOwnProperty(r)&&n.eventStatusOptions.push(v.eventStatuses[r]);n.defaultEventStatus=t.defaultEventStatus,v.setSelectedEventStatus(t.eventData.eventStatusCode),n.eventData.eventStatusModifier=t.eventData.eventStatusModifier,n.eventData.duration=a.diff(o,"minutes"),v.editMode?(n.eventUuid=t.eventData.appointmentNo,n.eventData.reason=t.eventData.reason,n.eventData.notes=t.eventData.notes,n.eventData.type=t.eventData.type,n.eventData.reasonCode=t.eventData.reasonCode,n.eventData.doNotBook=t.eventData.doNotBook,n.eventData.critical="critical"===t.eventData.urgency,n.eventData.site=t.eventData.site,n.eventData.virtual=t.eventData.virtual,v.checkEventConflicts(),v.demographicModel.loadData(t.eventData.demographicNo).then(function(){n.isPatientSelected()?v.patientTypeahead=v.demographicModel.data:(v.patientTypeahead.isTypeaheadSearchQuery=!0,v.patientTypeahead.searchQuery=t.eventData.appointmentName),c(v.loadWatches),n.initialized=!0}),v.loadAppointmentHistory(n.eventUuid)):(v.demographicModel.clear(),n.eventData.site=v.parentScope.selectedSiteName,e.element("#input-patient"),v.checkEventConflicts(),c(v.loadWatches),n.initialized=!0),v.changeTab(v.tabEnum.appointment),b.getSitesByProvider(v.providerModel.providerNo).then(function(e){v.siteOptions=[];for(let t of e.data.body)null!=t.siteId&&v.siteOptions.push({label:t.name,value:t.name,uuid:t.siteId,color:t.bgColor});b.getSitesByProvider(g.getUser().providerNo).then(function(e){let t=[];for(let n of v.siteOptions)e.data.body.find(e=>e.name===n.value)&&t.push(n);v.siteOptions=t,v.sitesEnabled&&!v.isValidSiteValue(n.eventData.site)&&b.getProviderSiteBySchedule(v.providerModel.providerNo,n.eventData.startDate).then(function(e){let t=v.siteOptions.find(t=>t.uuid===e.data.body.siteId);t?n.eventData.site=t.value:v.assignDefaultSite()},function(e){v.assignDefaultSite()})},function(e){console.error("Failed to lookup sites for the current user, with error: "+e)})},function(e){console.error("Failed to get provider Site assignment with error: "+e)})},v.assignDefaultSite=function(){if(v.siteOptions[0])n.eventData.site=v.siteOptions[0].value;else if(0===v.siteOptions.length){let e={label:"No Sites Available",value:"No Sites Available",uuid:null,color:null};v.siteOptions=[e],n.eventData.site="No Sites Available"}},v.setSelectedEventStatus=function(e){var t=n.defaultEventStatus;Juno.Common.Util.exists(e)&&(t=e),Juno.Common.Util.exists(t)&&Juno.Common.Util.exists(v.eventStatuses[t])||(t=n.eventStatusOptions[0].displayLetter),v.selectedEventStatus=t},v.loadAppointmentReasons=function(){var e=i.defer();return n.scheduleApi.getAppointmentReasons().then(function(t){var o=t.data.body,a=[];if(angular.isArray(o))for(var r=0;r<o.length;r++)a.push({label:o[r].label,value:o[r].id});v.reasonCodeList=a,Juno.Common.Util.exists(n.eventData.reasonCode)||(n.eventData.reasonCode=v.reasonCodeList[0].value),e.resolve(v.reasonCodeList)}),e.promise},v.loadAppointmentTypes=function(){var e=i.defer();return n.scheduleApi.getAppointmentTypes().then(function(t){var n=t.data.body,o=[];if(angular.isArray(n))for(var a=0;a<n.length;a++)o.push({label:n[a].name,value:n[a].name,data:{id:n[a].id,location:n[a].location,duration:n[a].duration,notes:n[a].notes,reason:n[a].reason,resources:n[a].resources}});v.appointmentTypeList=o,e.resolve(v.appointmentTypeList)}),e.promise},v.getTypeDataByTypeValue=function(e){for(var t={},n=0;n<v.appointmentTypeList.length;n++)if(v.appointmentTypeList[n].value===e){t=v.appointmentTypeList[n].data;break}return t},v.checkEventConflicts=function(){var e=t(".modal-content"),o=Juno.Common.Util.getDateAndTimeMoment(n.eventData.startDate,n.formattedTime(n.eventData.startTime)),a=v.calculateEndTime();if(v.isDoubleBook=!1,v.isDoubleBookPrevented=!1,e.removeClass("double-book double-book-prevented"),o.isValid()&&a.isValid()&&o.isSameOrBefore(a)){for(var r=0;r<n.events.length;r++){var i=n.events[r];if("background"!==i.rendering&&i.resourceId==n.scheduleId&&n.eventUuid!=i.data.appointmentNo){var l=Juno.Common.Util.getDatetimeNoTimezoneMoment(i.start),s=Juno.Common.Util.getDatetimeNoTimezoneMoment(i.end),c=i.data.doNotBook;if(l.isValid()&&s.isValid()&&(o.isSameOrAfter(l)&&o.isBefore(s)||a.isAfter(l)&&a.isSameOrBefore(s))&&(v.isDoubleBook=!0,c)){v.isDoubleBookPrevented=!0;break}}}v.isDoubleBookPrevented?e.addClass("double-book-prevented"):v.isDoubleBook&&e.addClass("double-book")}else console.warn("unable to check double booking, invalid event time/duration",o,a)},v.loadAppointmentHistory=function(t){var o=i.defer();return n.appointmentApi.getEditHistory(t).then(function(t){v.eventHistory=t.data.body;for(var n=0;n<v.eventHistory.length;n++)v.eventHistory[n].formattedUpdateDate=Juno.Common.Util.formatMomentDate(e(v.eventHistory[n].updateDateTime),"DD MMMM YYYY"),v.eventHistory[n].formattedCreateDate=Juno.Common.Util.formatMomentDate(e(v.eventHistory[n].createDateTime),"DD MMMM YYYY"),v.eventHistory[n].formattedUpdateTime=Juno.Common.Util.formatMomentTime(e(v.eventHistory[n].updateDateTime),"hh:mm A"),v.eventHistory[n].formattedCreateTime=Juno.Common.Util.formatMomentTime(e(v.eventHistory[n].createDateTime),"hh:mm A");o.resolve(v.eventHistory)}),o.promise},n.validateForm=function(){return n.displayMessages.clear(),Juno.Common.Util.validateDateString(n.eventData.startDate,n.displayMessages,"startDate","Session Date",!0),Juno.Common.Util.validateTimeString(n.formattedTime(n.eventData.startTime),n.displayMessages,"startTime","Start Time",!0),Juno.Common.Util.validateIntegerString(n.eventData.duration,n.displayMessages,"duration","Duration",!0,!0,!0),v.sitesEnabled&&!v.isValidSiteValue(n.eventData.site)&&n.displayMessages.add_field_error("site","A valid site must be selected"),Juno.Common.Util.validateIntegerString(v.repeatBookingData.endAfterNumber,n.displayMessages,"repeatEndAfterNumber","Repeat End After",!1,!0,!1),Juno.Common.Util.validateDateString(v.repeatBookingData.endDate,n.displayMessages,"repeatEndOnDate","Repeat End Date",!1),!n.displayMessages.has_errors()},v.updateRepeatBookingDates=function(){v.repeatBookingDates=[],v.isRepeatBookingEnabled()&&(v.repeatBookingDates=v.generateRepeatBookingDateList(v.repeatBooking.max_bookings_limit))},v.removeRepeatBookingDate=function(e){v.repeatBookingDates=v.repeatBookingDates.filter(function(t){return t!==e})},v.generateRepeatBookingDateList=function(t){var o=[],a=e(n.eventData.startDate),r=e(v.repeatBookingData.endDate),i=v.repeatBookingData.endAfterNumber,l=v.repeatBookingData.interval,s=v.repeatBookingData.frequency,c=v.isRepeatBookingEndTypeDate(),u=v.isRepeatBookingEndTypeAfter();n.displayMessages.remove_field_error("repeatEndAfterNumber"),n.displayMessages.remove_field_error("repeatEndOnDate");for(var d=0,p=a;;){var m=p.add(s,l);if(d+=1,u&&d>i||c&&m.isAfter(r,"day"))break;if(d>t){u&&n.displayMessages.add_field_error("repeatEndAfterNumber","limit of "+t),c&&n.displayMessages.add_field_error("repeatEndOnDate","limit of "+t);break}o.push(Juno.Common.Util.formatMomentDate(m)),p=m}return o},n.saveEvent=function(){var e=i.defer(),t=Juno.Common.Util.getDateAndTimeMoment(n.eventData.startDate,n.formattedTime(n.eventData.startTime)),o=v.calculateEndTime(),a=n.eventData.doNotBook?null:v.demographicModel.demographicNo,r=null==a&&Juno.Common.Util.exists(v.patientTypeahead.searchQuery)?v.patientTypeahead.searchQuery:null,l=null;return v.isRepeatBookingEnabled()&&(l=v.repeatBookingDates),v.parentScope.saveEvent(v.editMode,{appointmentNo:n.eventUuid,startTime:t,endTime:o,type:n.eventData.type,reason:n.eventData.reason,reasonCode:n.eventData.reasonCode,notes:n.eventData.notes,providerNo:n.scheduleId,eventStatusCode:v.selectedEventStatus,eventStatusModifier:n.eventData.eventStatusModifier,demographicNo:a,appointmentName:r,site:n.eventData.site,doNotBook:n.eventData.doNotBook,urgency:n.eventData.critical?"critical":null,virtual:n.eventData.virtual},l).then(function(t){v.parentScope.processSaveResults(t,n.displayMessages)?e.resolve(t):e.reject(t)},function(t){v.parentScope.processSaveResults(t,n.displayMessages),e.reject()}),e.promise},n.deleteEvent=function(){var e=i.defer();return v.parentScope.deleteEvent(n.eventUuid).then(function(){e.resolve()},function(){e.reject()}),e.promise},n.formattedTime=function(e){return e.replace(/ /g,"")},v.calculateEndTime=function(){return Juno.Common.Util.getDateAndTimeMoment(n.eventData.startDate,n.formattedTime(n.eventData.startTime)).add(n.eventData.duration,"minutes")},n.loadPatientFromTypeahead=function(e){v.demographicModel.loadData(e.demographicNo)},v.autofillDataFromType=function(e){var t=v.getTypeDataByTypeValue(e);Juno.Common.Util.exists(t.duration)&&t.duration>0&&(n.eventData.duration=t.duration),Juno.Common.Util.exists(t.location)&&v.isValidSiteValue(t.location)&&(n.eventData.site=t.location),Juno.Common.Util.exists(t.notes)&&!Juno.Common.Util.isBlank(t.notes)&&(n.eventData.notes=t.notes),Juno.Common.Util.exists(t.reason)&&!Juno.Common.Util.isBlank(t.reason)&&(n.eventData.reason=t.reason)},v.loadWatches=function(){n.$watch("eventController.patientTypeahead",function(e,t){e!=t&&n.loadPatientFromTypeahead(v.patientTypeahead)},!0),n.$watch("[eventData.startTime, eventData.duration]",function(e,t){e!=t&&v.checkEventConflicts()}),n.$watch("eventData.type",function(e,t){e!=t&&v.autofillDataFromType(e)}),n.$watch("[eventController.repeatBookingData.enabled,eventController.repeatBookingData.frequency,eventController.repeatBookingData.interval,eventController.repeatBookingData.endType, eventController.repeatBookingData.endDate,eventController.repeatBookingData.endAfterNumber]",function(e,t){e!==t&&v.updateRepeatBookingDates()})},n.isWorking=function(){return n.working},n.isInitialized=function(){return n.initialized},n.isPatientSelected=function(){return Juno.Common.Util.exists(v.demographicModel.demographicNo)},v.hasAppointmentId=function(){return Juno.Common.Util.exists(n.eventUuid)},v.inEditMode=function(){return v.editMode},v.isRepeatBookingEnabled=function(){return!v.inEditMode()&&v.repeatBookingData.enabled===v.repeatBooking.toggleEnum.on},v.isRepeatBookingEndTypeDate=function(){return v.repeatBookingData.endType===v.repeatBooking.endTypeEnum.date},v.isRepeatBookingEndTypeAfter=function(){return v.repeatBookingData.endType===v.repeatBooking.endTypeEnum.after},n.hasSites=function(){return v.siteOptions.length>0},v.isValidSiteValue=function(e){for(var t=0;t<v.siteOptions.length;t++)if(v.siteOptions[t].value===e&&null!==v.siteOptions[t].uuid)return!0;return!1},v.showPatientChartLinks=function(){return v.hasAppointmentId()&&n.isPatientSelected()},v.changeTab=function(e){v.activeTab=e},v.isTabActive=function(e){return e===v.activeTab},n.clearPatient=function(){n.autocompleteValues.patient=null,v.demographicModel.clear()},v.save=function(){if(!n.validateForm())return!1;n.working=!0,n.saveEvent().then(function(){v.parentScope.refetchEvents(),v.modalInstance.close(),n.working=!1},function(){console.log(n.displayMessages.field_errors().location),n.displayMessages.has_standard_errors()||n.displayMessages.add_generic_fatal_error(),n.working=!1})},v.del=function(){n.working=!0,n.deleteEvent().then(function(){v.parentScope.refetchEvents(),v.modalInstance.close(),n.working=!1},function(){n.displayMessages.add_generic_fatal_error(),n.working=!1})},v.cancel=function(){v.modalInstance.dismiss("cancel")},v.saveAndBill=function(){if(!n.validateForm())return!1;n.working=!0,n.saveEvent().then(function(){v.parentScope.refetchEvents(),v.modalInstance.close(),n.working=!1,v.parentScope.openCreateInvoice(n.eventUuid,n.scheduleId,v.demographicModel.demographicNo)},function(){n.displayMessages.add_generic_fatal_error(),n.working=!1})},v.saveAndPrint=function(){if(!n.validateForm())return!1;n.working=!0,n.saveEvent().then(function(e){(v.parentScope.refetchEvents(),v.modalInstance.close(),n.working=!1,Juno.Common.Util.exists(e)&&Juno.Common.Util.exists(e.body)&&Juno.Common.Util.exists(e.body.appointmentNo))?window.open("../appointment/appointmentcontrol.jsp?displaymode=PrintCard&appointment_no="+encodeURIComponent(e.body.appointmentNo),"printappointmentcard","height=700,width=1024,scrollbars=1").focus():console.error("invalid response data",e)},function(){n.displayMessages.add_generic_fatal_error(),n.working=!1})},v.saveAndReceipt=function(){if(!n.validateForm())return!1;n.working=!0,n.saveEvent().then(function(e){(v.parentScope.refetchEvents(),v.modalInstance.close(),n.working=!1,Juno.Common.Util.exists(e)&&Juno.Common.Util.exists(e.body)&&Juno.Common.Util.exists(e.body.appointmentNo))?window.open("../appointment/printappointment.jsp?appointment_no="+encodeURIComponent(e.body.appointmentNo),"printappointment","height=700,width=1024,scrollbars=1").focus():console.error("invalid response data",e)},function(){n.displayMessages.add_generic_fatal_error(),n.working=!1})},v.saveDoNotBook=function(){if(!n.validateForm())return!1;n.working=!0,n.clearPatient(),n.eventData.doNotBook=!0,n.saveEvent().then(function(){v.parentScope.refetchEvents(),v.modalInstance.close(),n.working=!1},function(){n.displayMessages.add_generic_fatal_error(),n.working=!1})},n.viewInvoices=function(){v.parentScope.open_view_invoices(n.eventUuid)},n.createPatient=function(){n.create_patient_dialog=v.parentScope.calendar_api_adapter.openPatientDialog(function(){return!1},function(){return n.onPatientModalSave},function(){return n.onPatientModalSave})},n.modify_patient=function(){if(n.isPatientSelected()){n.modify_patient_dialog=v.parentScope.calendar_api_adapter.openPatientDialog(function(){return!0},function(){return n.onPatientModalSave},function(){return n.onPatientModalSave})}},n.onPatientModalSave=function(e){v.demographicModel.loadData(e)},n.newDemographic=function(){d.open({component:"addDemographicModal",backdrop:"static",windowClass:"juno-modal"}).result.then(function(e){console.log(e),console.log("patient #: ",e.demographicNo),v.demographicModel.loadData(e.demographicNo),v.patientTypeahead={isTypeaheadSearchQuery:!0,searchQuery:e.lastName+", "+e.firstName}},function(e){console.log("Modal dismissed at: "+new Date),console.log(e)}),console.log(t("#myModal"))},v.openEncounterPage=function(){if(n.isPatientSelected()){if(v.loadedSettings&&v.loadedSettings.hideOldEchartLinkInAppointment){var t={demographicNo:v.demographicModel.demographicNo};angular.isDefined(n.eventUuid)&&(t.appointmentNo=n.eventUuid,t.encType="face to face encounter with client"),u.go("record.summary",t)}else{t={providerNo:v.providerModel.providerNo,curProviderNo:v.resolve.data.eventData.userProviderNo,demographicNo:v.demographicModel.demographicNo,userName:"",reason:n.eventData.reason,curDate:Juno.Common.Util.formatMomentDate(e()),providerview:v.resolve.data.eventData.userProviderNo,appointmentNo:n.eventUuid,appointmentDate:n.eventData.startDate,startTime:n.eventData.startTime,status:v.selectedEventStatus,apptProvider_no:v.providerModel.providerNo,encType:"face to face encounter with client"};window.open(f.getEncounterLink(t),"popupWindow","height=800,width=1000,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no")}v.cancel()}},v.openBillingPage=function(){if(n.isPatientSelected()&&Juno.Common.Util.exists(n.eventUuid)){var e={demographic_no:v.demographicModel.demographicNo,demographic_name:v.demographicModel.fullName,providerNo:v.providerModel.providerNo,providerview:v.providerModel.providerNo,user_no:v.resolve.data.eventData.userProviderNo,billRegion:v.resolve.data.eventData.billingRegion,billForm:v.resolve.data.eventData.billingForm,hotclick:"",bNewForm:1,apptProvider_no:v.providerModel.providerNo,appointment_no:n.eventUuid,appointmentDate:n.eventData.startDate,status:v.selectedEventStatus,start_time:n.eventData.startTime,referral_no_1:""};window.open(f.getBillingLink(e)),v.cancel()}},v.openMasterRecord=function(){if(n.isPatientSelected()){var e={demographicNo:v.demographicModel.demographicNo};u.go("record.details",e),v.cancel()}},v.openRxWindow=function(){var e={demographicNo:v.demographicModel.demographicNo,providerNo:v.providerModel.providerNo};window.open(f.getRxLink(e)),v.cancel()},v.openTelehealthWindow=function(){0!==v.demographicModel.demographicNo&&n.eventData.virtual&&window.open("../telehealth/myhealthaccess.do?method=openTelehealth&demographicNo="+encodeURIComponent(v.demographicModel.demographicNo)+"&siteName="+encodeURIComponent(n.eventData.site)+"&appt="+encodeURIComponent(n.eventUuid),"_blank")},n.keyBindSettings={"ctrl+enter":{title:"Ctrl+Enter",tooltip:"Save",description:"Save appointment",callback_fn:function(){n.isWorking()||n.save()},target:null},"ctrl+shift+enter":{title:"Ctrl+Shift+Enter",tooltip:"Save And Bill",description:"Save and bill for appointment",callback_fn:function(){n.isWorking()||n.saveAndBill()},target:null}}}]})}.call(this,n(6),n(4))},function(e,t,n){"use strict";n.r(t),function(e){var t=n(7);angular.module("Schedule").component("scheduleSearch",{templateUrl:"src/schedule/scheduleSearch.jsp",bindings:{modalInstance:"<",resolve:"<"},controller:["$q","$http","$httpParamSerializer","providerService",function(n,o,a,r){var i=this;i.scheduleApi=new t.ScheduleApi(o,a,"../ws/rs"),i.formattedDate=Juno.Common.Util.DisplaySettings.dateFormat,i.formattedTime=Juno.Common.Util.DisplaySettings.timeFormat,i.$onInit=function(){i.search={provider:i.resolve.providerId,dayOfWeek:null,startTime:i.resolve.scheduleStartTime,endTime:i.resolve.scheduleEndTime,appointmentCode:null},i.clean=!0,i.resultList=[],i.providerList=[],i.loadProviderList(),i.appointmentCodeList=[],i.loadAppointmentCodes(),i.dayOfWeekList=[{label:"Any",value:null},{label:"Any Weekday",value:"daily"},{label:"Sunday",value:1},{label:"Monday",value:2},{label:"Tuesday",value:3},{label:"Wednesday",value:4},{label:"Thursday",value:5},{label:"Friday",value:6},{label:"Saturday",value:7}],i.timeList=[];for(var e=0;e<24;e++){var t={label:e<12?(0===e?12:e)+" am":(e-12==0?12:e-12)+" pm",value:Juno.Common.Util.pad0(e)+":00"};i.timeList.push(t)}i.working=!1},i.cancel=function(){i.modalInstance.dismiss("cancel")},i.addAppointment=function(t){var n=t.scheduleSlot,o=t.provider,a=e(n.appointmentDateTime),r=angular.copy(a).add(n.durationMinutes,"minutes"),l=o.providerNo;i.modalInstance.close({start:a,end:r,resourceId:l})},i.reset=function(){i.search={provider:i.resolve.providerId,dayOfWeek:null,startTime:i.resolve.scheduleStartTime,endTime:i.resolve.scheduleEndTime,appointmentCode:null},i.resultList=[],i.clean=!0},i.searchSchedules=function(){var e=n.defer();return i.working=!0,i.scheduleApi.searchAvailable(i.search.provider,i.search.dayOfWeek,i.search.startTime,i.search.endTime,i.search.appointmentCode,8).then(function(t){i.resultList=t.data.body,i.working=!1,i.clean=!1,e.resolve(t.data.body)},function(t){console.error(t),i.working=!1,e.reject()}),e},i.isWorking=function(){return i.working},i.loadProviderList=function(){var e=n.defer();return r.searchProviders({active:!0}).then(function(t){i.providerList=t.map(e=>({value:e.providerNo,label:e.name})),e.resolve(i.providerList)},function(){e.reject()}),e},i.loadAppointmentCodes=function(){var e=n.defer();return i.scheduleApi.getScheduleTemplateCodes().then(function(t){var n=t.data.body;i.appointmentCodeList=n.map(e=>({value:e.code,label:"("+e.code+") "+e.description})),e.resolve(i.appointmentCodeList)},function(){e.reject()}),e}}]})}.call(this,n(6))},function(e,t,n){"use strict";n.r(t);var o=n(8),a=n(7);angular.module("Schedule").service("scheduleService",["$http","$httpParamSerializer","$q",function(e,t,n){var r={appointmentApi:new o.AppointmentApi(e,t,"../ws/rs"),scheduleApi:new a.ScheduleApi(e,t,"../ws/rs"),eventStatuses:{},rotateStatuses:[],getStatusByCode:function(e){return r.eventStatuses[e]},getNextRotateStatus:function(e){for(var t=e,n=0;n<r.rotateStatuses.length;n++)if(r.rotateStatuses[n].displayLetter===e){t=r.rotateStatuses[(n+1)%r.rotateStatuses.length].displayLetter;break}return t},loadEventStatuses:function(){var e=n.defer();return r.eventStatuses={},r.rotateStatuses=[],r.scheduleApi.getCalendarAppointmentStatuses().then(function(t){for(var n=t.data.body,o=0;o<n.length;o++){var a=n[o];r.eventStatuses[a.displayLetter]=a,a.rotates&&r.rotateStatuses.push(a)}e.resolve(n)}),e.promise},getBillingLink:function(e){return"../billing.do?billRegion="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.billRegion))+"&billForm="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.billForm))+"&hotclick="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.hotclick))+"&appointment_no="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.appointment_no))+"&demographic_name="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.demographic_name))+"&status="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.status))+"&demographic_no="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.demographic_no))+"&providerview="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.providerview))+"&user_no="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.user_no))+"&apptProvider_no="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.apptProvider_no))+"&appointment_date="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.appointmentDate))+"&start_time="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.start_time))+"&bNewForm="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.bNewForm))+"&referral_no_1="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.referral_no_1))},getEncounterLink:function(e){return"../oscarEncounter/IncomingEncounter.do?providerNo="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.providerNo))+"&appointmentNo="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.appointmentNo))+"&demographicNo="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.demographicNo))+"&curProviderNo="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.curProviderNo))+"&reason="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.reason))+"&encType="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.encType))+"&userName="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.userName))+"&curDate="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.curDate))+"&appointmentDate="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.appointmentDate))+"&startTime="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.startTime))+"&status="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.status))+"&apptProvider_no="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.apptProvider_no))+"&providerview="+encodeURIComponent(Juno.Common.Util.toTrimmedString(e.providerview))},getRxLink:function(e){if(0!==e.demographicNo)return"../oscarRx/choosePatient.do?providerNo="+encodeURIComponent(e.providerNo)+"&demographicNo="+encodeURIComponent(e.demographicNo)}};return r}])},function(e,t,n){"use strict";angular.module("Admin",["Common","Common.Services"])},function(e,t,n){"use strict";n.r(t);var o=n(10);angular.module("Admin").controller("Admin.AdminController",["$scope","$http","$location","personaService","$stateParams",function(e,t,n,a,r){let i=this;function l(e){return e.forEach(function(e){e.items.forEach(function(t){var o,a;t.callback=(o=t.transitionState,a=t.rawTransition,function(){a?window.open(o,"_blank"):(angular.element(document.querySelector("html")).animate({scrollTop:0},500),n.url("/admin/"+o))}),(void 0!==r.frameUrl&&(t.transitionState.includes(r.frameUrl)||t.transitionState.includes(encodeURIComponent(r.frameUrl)))||n.url().includes(t.transitionState))&&(e.expanded=!0)})}),e}function s(){a.getAdminNav().then(function(e){i.navList=l(e)},function(e){console.error("failed to load admin nav bar, with error: "+e)})}i.navList=[],i.expandNavGroup=function(e){let t=i.navList.find(function(t){return t.name===e});t&&(t.expanded=!0)},i.collapseAllNavGroups=function(){i.navList.forEach(function(e){e.expanded=!1})},e.$on(o.ADMIN_PAGE_EVENTS.ADMIN_RELOAD_NAV,function(e){s()}),e.$on(o.ADMIN_PAGE_EVENTS.ADMIN_EXPAND_NAV_GROUP,function(e,t){i.collapseAllNavGroups(),i.expandNavGroup(t)}),s()}])},function(e,t,n){"use strict";angular.module("Admin.Integration",["Common","Common.Services"])},function(e,t,n){"use strict";angular.module("Admin.Integration.Fax",["Common","Common.Services"])},function(e,t){angular.module("Admin.Integration.Fax").controller("Admin.Integration.Fax.FaxConfigurationController",["$uibModal","faxAccountService","providerService","systemPreferenceService",function(e,t,n,o){var a=this;a.faxAccountList=[],a.loggedInProvider=null,a.masterFaxDisabled=!0,a.masterFaxEnabledInbound=!1,a.masterFaxEnabledOutbound=!1,a.initialize=function(){null==a.loggedInProvider&&n.getMe().then(function(e){a.loggedInProvider=e},function(e){console.error(e)}),o.isPreferenceEnabled("masterFaxEnabledInbound",a.masterFaxEnabledInbound).then(function(e){a.masterFaxEnabledInbound=e,a.updateMasterFaxDisabledStatus()},function(e){console.error(e)}),o.isPreferenceEnabled("masterFaxEnabledOutbound",a.masterFaxEnabledOutbound).then(function(e){a.masterFaxEnabledOutbound=e,a.updateMasterFaxDisabledStatus()},function(e){console.error(e)}),t.listAccounts().then(function(e){a.faxAccountList=e},function(e){console.error(e)})},a.editNewFaxAccount=function(){a.editFaxAccount()},a.editFaxAccount=function(t){let n=!0;t&&(n=!1),e.open({templateUrl:"src/admin/integration/fax/faxConfigurationEdit.jsp",controller:"Admin.Integration.Fax.FaxConfigurationEditController as faxConfigEditController",backdrop:"static",windowClass:"faxEditModal",resolve:{faxAccount:function(){return t},masterFaxEnabledInbound:function(){return a.masterFaxEnabledInbound},masterFaxEnabledOutbound:function(){return a.masterFaxEnabledOutbound}}}).result.then(function(e){n?a.faxAccountList.push(e):angular.copy(e,t)},function(e){})},a.saveMasterFaxEnabledStateInbound=function(){a.setSystemProperty("masterFaxEnabledInbound",a.masterFaxEnabledInbound),a.updateMasterFaxDisabledStatus()},a.saveMasterFaxEnabledStateOutbound=function(){a.setSystemProperty("masterFaxEnabledOutbound",a.masterFaxEnabledOutbound),a.updateMasterFaxDisabledStatus()},a.updateMasterFaxDisabledStatus=function(){a.masterFaxDisabled=!a.masterFaxEnabledInbound&&!a.masterFaxEnabledOutbound},a.setSystemProperty=function(e,t){o.setPreference(e,t).then(function(e){},function(e){console.error(e)})},a.initialize()}])},function(e,t){angular.module("Admin.Integration.Fax").controller("Admin.Integration.Fax.FaxConfigurationEditController",["$uibModal","$uibModalInstance","faxAccountService","faxAccount","masterFaxEnabledInbound","masterFaxEnabledOutbound",function(e,t,n,o,a,r){var i=this;i.connectionStatusEnum=Object.freeze({unknown:1,success:2,failure:3}),i.coverLetterOptions=["None","Basic","Standard","Company","Personal"],i.initialize=function(){o?(i.faxAccount=angular.copy(o),i.faxAccount.connectionStatus||i.setDefaultConnectionStatus()):i.faxAccount={enabled:!0,enableInbound:!1,enableOutbound:!1,accountLogin:null,accountEmail:"",password:"",displayName:"",coverLetterOption:"",faxNumber:"",connectionStatus:i.connectionStatusEnum.unknown},i.masterFaxEnabledInbound=a,i.masterFaxEnabledOutbound=r,i.masterFaxEnabledInbound||(i.faxAccount.enableInbound=!1),i.masterFaxEnabledOutbound||(i.faxAccount.enableOutbound=!1)},i.saveSettings=function(e){if(!e.$valid)return void alert("The form contains errors");let o=function(e){e.connectionStatus=i.faxAccount.connectionStatus,t.close(e)},a=function(e){console.error(e)};i.faxAccount.id?n.updateAccountSettings(i.faxAccount.id,i.faxAccount).then(o,a):n.addAccountSettings(i.faxAccount).then(o,a)},i.cancel=function(){t.dismiss("cancel")},i.testConnection=function(){n.testConnection(i.faxAccount).then(function(e){i.faxAccount.connectionStatus=e?i.connectionStatusEnum.success:i.connectionStatusEnum.failure},function(e){console.error(e),i.faxAccount.connectionStatus=i.connectionStatusEnum.unknown})},i.setDefaultConnectionStatus=function(){i.faxAccount.connectionStatus=i.connectionStatusEnum.unknown},i.initialize()}])},function(e,t,n){(function(e){angular.module("Admin.Integration.Fax").controller("Admin.Integration.Fax.FaxSendReceiveController",["NgTableParams","providerService","faxAccountService","faxInboundService","faxOutboundService",function(t,n,o,a,r){var i=this;i.displayStatus=Object.freeze({all:{value:null,label:"All"},error:{value:"ERROR",label:"Error"},queued:{value:"QUEUED",label:"Queued"},inProgress:{value:"IN_PROGRESS",label:"In Progress"},integrationFailed:{value:"INTEGRATION_FAILED",label:"Failed"},integrationSuccess:{value:"INTEGRATION_SUCCESS",label:"Delivered"}}),i.archivedStatus=Object.freeze({all:{value:null,label:"All"},active:{value:!1,label:"Active"},archived:{value:!0,label:"Archived"}}),i.systemStatusEnum=Object.freeze({sent:"SENT",queued:"QUEUED",error:"ERROR"}),i.notificationStatusEnum=Object.freeze({notify:"NOTIFY",dismissed:"SILENT"}),i.tabEnum=Object.freeze({inbox:0,outbox:1}),i.activeTab=i.tabEnum.outbox,i.loggedInProviderNo=null,i.displayNotificationColumn=!1,i.nextPullTime=null,i.nextPushTime=null,i.selectedFaxAccount=null,i.faxAccountList=[],i.outboxItemList=[],i.inboxItemList=[],i.inbox={search:{page:1,count:10,sorting:{DateSent:"desc"}},startDate:null,endDate:null},i.outbox={search:{page:1,count:10,sorting:{DateSent:"desc"}},startDate:null,endDate:null,displayStatus:i.displayStatus.all,archivedStatus:i.archivedStatus.all},i.initialize=function(){o.listAccounts().then(function(e){i.faxAccountList=e,i.faxAccountList.length>0&&(i.selectedFaxAccount=i.faxAccountList[0])},function(e){console.error(e)}),i.loadNextPushTime(),i.loadNextPullTime()},i.loadOutboxItems=function(){i.tableParamsOutbox=new t(i.outbox.search,{getData:function(e){i.outbox.search=e.url();let t={page:i.outbox.search.page,perPage:i.outbox.search.count},n={startDate:i.formatOptionalDateParam(i.outbox.startDate),endDate:i.formatOptionalDateParam(i.outbox.endDate),combinedStatus:i.outbox.displayStatus.value,archived:i.outbox.archivedStatus.value};var a=new Juno.Common.SearchListHelper(t,n);return o.getOutbox(i.selectedFaxAccount.id,a).then(function(e){return i.outboxItemList=e.data,i.tableParamsOutbox.total(e.meta.total),i.outboxItemList},function(e){console.error(e),alert("Failed to load outbox")})}}),i.loadNextPushTime()},i.loadInboxItems=function(){i.tableParamsInbox=new t(i.inbox.search,{getData:function(e){i.inbox.search=e.url(),console.info(i.inbox);let t={page:i.inbox.search.page,perPage:i.inbox.search.count},n={startDate:i.formatOptionalDateParam(i.inbox.startDate),endDate:i.formatOptionalDateParam(i.inbox.endDate)};var a=new Juno.Common.SearchListHelper(t,n);return o.getInbox(i.selectedFaxAccount.id,a).then(function(e){return i.inboxItemList=e.data,i.tableParamsInbox.total(e.meta.total),i.inboxItemList},function(e){console.error(e),alert("Failed to load inbox")})}}),i.loadNextPullTime()},i.resendFax=function(e){let t=e.combinedStatus===i.displayStatus.integrationFailed.value;e.combinedStatus=i.displayStatus.inProgress.value,r.resendOutboundFax(e.id).then(function(n){angular.copy(n,e),e.systemStatus===i.systemStatusEnum.error&&alert(e.systemStatusMessage),t&&i.loadOutboxItems()},function(t){e.combinedStatus=i.displayStatus.error.value,console.error(t),alert(t)})},i.loadNextPullTime=function(){a.getNextPullTime().then(function(e){i.nextPullTime=e},function(e){i.nextPullTime=null,console.error(e),alert(e)})},i.loadNextPushTime=function(){r.getNextPushTime().then(function(e){i.nextPushTime=e},function(e){i.nextPushTime=null,console.error(e),alert(e)})},i.changeTab=function(e){i.activeTab=e},i.dismissNotification=function(e){r.setNotificationStatus(e.id,i.notificationStatusEnum.dismissed).then(function(t){angular.copy(t,e)},function(e){console.error(e),alert(e)})},i.archive=function(e){r.archive(e.id).then(function(t){angular.copy(t,e)},function(e){console.error(e),alert(e)})},i.openDocument=function(e){let t=function(){let t="segmentID="+e+"&providerNo="+i.loggedInProviderNo+"&status=A&inWindow=true&chartView&demoName=",n="ShowDocument"+e;window.open("../dms/showDocument.jsp?"+t,n,"scrollbars=1,width=1024,height=768")};null==i.loggedInProviderNo?n.getMe().then(function(e){i.loggedInProviderNo=e.providerNo,t()},function(e){console.error(e)}):t()},i.viewDownloadFile=function(e){let t=r.getDownloadUrl(e),n="ViewFaxFile"+e;window.open(t,n,"scrollbars=1,width=1024,height=768")},i.formatOptionalDateParam=function(t){return Juno.Common.Util.isUndefinedOrNull(t)?null:e(t).format("YYYY-MM-DD")},i.getStatusDisplayLabel=function(e){let t=null;switch(e){case i.displayStatus.error.value:t=i.displayStatus.error.label;break;case i.displayStatus.queued.value:t=i.displayStatus.queued.label;break;case i.displayStatus.inProgress.value:t=i.displayStatus.inProgress.label;break;case i.displayStatus.integrationFailed.value:t=i.displayStatus.integrationFailed.label;break;case i.displayStatus.integrationSuccess.value:t=i.displayStatus.integrationSuccess.label;break;default:t="Unknown"}return t},i.initialize()}])}).call(this,n(6))},function(e,t,n){"use strict";n.r(t);var o=n(10);angular.module("Admin.Integration").component("landingPage",{templateUrl:"src/admin/integration/landingPage/landingPage.jsp",bindings:{},controller:["$scope","$location","$window",function(e,t,n){this.goTo=function(n,a){t.url(n),e.$emit(o.ADMIN_PAGE_EVENTS.ADMIN_EXPAND_NAV_GROUP,a)},this.goToFrame=function(a,r){let i=n.adminLandingPage.oscarContextPath;t.url("admin/frame?frameUrl="+i+a),e.$emit(o.ADMIN_PAGE_EVENTS.ADMIN_EXPAND_NAV_GROUP,r)}}]})},function(e,t){angular.module("Admin.Integration").component("panelManagementAdmin",{templateUrl:"src/admin/integration/panelManagement/panelManagement.jsp",bindings:{},controller:["$scope","providersService","uxService",function(e,t,n){let o=this;o.selectedProvider=null,o.selectedPanel=null,o.dashboardUrl=null,o.missingRequiredFeildProvider=!1,o.missingRequiredFeildPanel=!1;o.providers=[],o.panels=[],o.$onInit=function(){t.getAll().then(function(e){o.providers=[];for(let t of e)o.providers.push({label:t.name,value:t.providerNo})},function(e){console.error("Failed to get provider list with error: "+e)}),n.getAllDashboards().then(function(e){o.panels=[];for(let t of e)t.active&&o.panels.push({label:t.name,value:t.id})},function(e){console.error("Failed to get dashboard list with error: "+e)})},o.runReport=function(){o.missingRequiredFeildProvider=null==o.selectedProvider,o.missingRequiredFeildPanel=null==o.selectedPanel,null!=o.selectedPanel&&null!=o.selectedProvider&&(o.dashboardUrl="../web/dashboard/display/DashboardDisplay.do?method=getDashboard&dashboardId="+o.selectedPanel+"&providerNo="+o.selectedProvider,document.querySelector("#dashboard-embedded-page").contentWindow.location.reload())}}]})},function(e,t,n){"use strict";n.r(t);var o=n(10);angular.module("Admin.Integration").component("integrationModules",{templateUrl:"src/admin/integration/integrationModules/integrationModules.jsp",bindings:{},controller:["$scope","systemPreferenceService",function(e,t){let n=this;n.integrationList=[{name:"CareConnect",enabled:!1,propertyName:"integration.CareConnect.enabled",configUrl:""},{name:"IceFall",enabled:!1,propertyName:"icefall_enabled",configUrl:""}],n.$onInit=function(){for(let e of n.integrationList)t.getPreference(e.propertyName,"false").then(function(t){e.enabled="TRUE"===t.toUpperCase()},function(t){e.enabled=!1,console.error("Failed to fetch preference, "+e.propertyName)})},n.enableProperty=function(n,a){t.setPreference(n,a.toString()),e.$emit(o.ADMIN_PAGE_EVENTS.ADMIN_RELOAD_NAV)}}]})},function(e,t){angular.module("Admin.Integration").component("iceFallAdmin",{templateUrl:"src/admin/integration/iceFall/iceFall.jsp",bindings:{},controller:["$scope","$http","$httpParamSerializer","$state",function(e,t,n,o){this.changeTab=function(e){o.go(e)},this.isTabActive=function(e){return e===o.current.name}}]})},function(e,t,n){"use strict";n.r(t);var o=n(13);n(10);angular.module("Admin.Integration").component("iceFallAdminSettings",{templateUrl:"src/admin/integration/iceFall/settings/iceFallAdminSettings.jsp",bindings:{},controller:["$scope","$http","$httpParamSerializer",function(e,t,n){let a=this,r=new o.IceFallApi(t,n,"../ws/rs");a.iceFallSettings=null,r.getIceFallSettings().then(function(e){a.iceFallSettings=e.data.body},function(e){console.error("Failed to get ice fall status. With error: ")}),a.setIceFallVisible=function(e){a.iceFallSettings.visible=e,a.saveIceFallSettings()},a.saveIceFallSettings=function(){r.setIceFallSettings(a.iceFallSettings)}}]})},function(e,t,n){"use strict";n.r(t),function(e){var t=n(13);angular.module("Admin.Integration").component("iceFallAdminActivity",{templateUrl:"src/admin/integration/iceFall/activity/iceFallAdminActivity.jsp",bindings:{},controller:["$scope","$http","$httpParamSerializer","NgTableParams","formService",function(n,o,a,r,i){let l=this,s=new t.IceFallApi(o,a,"../ws/rs");l.filterStatuses=[{value:"%",label:"ANY"},{value:"ERROR",label:"ERROR"},{value:"SENT",label:"SENT"}],l.statusFilter="%",l.startDate=Juno.Common.Util.formatMomentDate(e()),l.endDate=Juno.Common.Util.formatMomentDate(e()),l.logEntries=[],l.search=function(e,t){},l.$onInit=function(){l.tableParams=new r({page:1,count:100,sorting:{DATE_SENT:"desc"},paginationMaxBlocks:3,paginationMinBlocks:2,dataset:l.logEntries},{getData:function(e){return l.startDate&&l.endDate?s.getLogEntries(l.startDate+"T01:01:01",l.endDate+"T23:59:59",e.page(),e.count(),l.statusFilter,l.orderByToApiName(e.orderBy()),l.orderByGetDirection(e.orderBy())).then(function(t){return l.logEntries=t.data.body.logEntries,e.total(t.data.body.totalLogEntries),l.logEntries},function(e){console.error("Failed to retrieve IceFall log entries! error: "+e)}):(e.total(0),[])}})},l.doEformPopup=function(e){e.instance?i.openEFormInstancePopup(e.demographicNo,e.fdid):i.openEFormPopup(e.demographicNo,e.fdid)},l.orderByToApiName=function(e){return e[0].replace("-","").replace("+","")},l.orderByGetDirection=function(e){return e[0].includes("-")?"DESC":"ASC"}}]})}.call(this,n(6))},function(e,t,n){"use strict";angular.module("Admin.Integration.Know2act",["Common","Common.Services"])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aConfigController",["k2aService",function(e){var t=this;t.PrevListQuantity=10,t.availablePreventionRuleSets=[],t.currentPreventionRulesSet=[],t.clinicName="",t.k2aActive=!1,t.checkStatus=function(){e.isK2AInit().then(function(e){t.k2aActive=e,t.k2aActive&&(t.getPreventionRulesList(),t.getCurrentPreventionRulesVersion())},function(e){console.error(e),alert("Failed to verify K2A Status")})},t.checkStatus(),t.getPreventionRulesList=function(){e.preventionRulesList().then(function(e){t.availablePreventionRuleSets=e,console.log("availablePreventionRuleSets",t.availablePreventionRuleSets)},function(e){console.error(e)})},t.getCurrentPreventionRulesVersion=function(){e.getCurrentPreventionRulesVersion().then(function(e){t.currentPreventionRulesSet=e,console.log("currentPreventionRulesSet",e)},function(e){console.error(e)})},t.loadPreventionRuleById=function(t){e.loadPreventionRuleById(t).then(function(t){e.getCurrentPreventionRulesVersion()})},t.increasePrevListQuantity=function(){t.PrevListQuantity=t.availablePreventionRuleSets.length},t.initK2A=function(){e.initK2A(t.clinicName).then(function(e){console.info("Init complete, check status",e),t.checkStatus()},function(e){console.log(e),alert("Failed to initialize K2A")})}}])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aNotificationController",["k2aService",function(e){var t=this;t.page={},t.page.notifications=[],t.readMore=function(t){e.getMoreNotification(t).then(function(e){window.open(e,"moreInfo","width=700,height=700").focus()},function(e){console.error(e)})},t.archive=function(n){e.ackNotification(n).then(function(e){t.getNotifications()},function(e){console.error(e),alert("Failed to acknowledge notification")})},t.getNotifications=function(){e.getNotifications().then(function(e){t.page.notifications=e},function(e){console.error(e),alert("Failed to load notifications")})},t.getNotifications()}])},function(e,t){angular.module("Admin.Integration.Know2act").controller("Admin.Integration.Know2act.k2aTemplateController",["reportByTemplateService","k2aService",function(e,t){var n=this;n.message="",n.k2aActive=!1,n.k2aReports=null,n.K2A_URL="",n.dtOptions={},n.checkStatus=function(){t.isK2AInit().then(function(e){n.k2aActive=e},function(e){console.error(e),alert("Failed to verify K2A Status")})},n.checkStatus(),n.getAllK2AReports=function(){e.getAllK2AReports().then(function(e){n.k2aReports=e,console.log("k2a reports",n.k2aReports)})},n.getAllK2AReports(),n.saveK2AReport=function(t){e.getK2AReportById(t).then(function(e){n.message=e,console.log(n.message),refreshParent()})},n.openK2AUrl=function(){e.getK2AUrl().then(function(e){window.open(e+"/#/ws/rs/posts/browse/Report")},function(e){console.log(e)})},n.refreshParent=function(){window.opener.document.location.href="../../../../oscarReport/reportByTemplate/homePage.jsp"},window.onunload=n.refreshParent()}])},function(e,t){angular.module("Admin.Integration").controller("Admin.Integration.FrameContentController",["$scope","$http","$stateParams","$window",function(e,t,n,o){this.frameUrl=n.frameUrl,this.frameUrlEncoded=escape(n.frameUrl),this.useCompat=n.useCompat}])},function(e,t){angular.module("oscarProviderViewModule").controller("BillingCtrl",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";angular.module("Consults",["Common","Common.Services"])},function(e,t,n){(function(e){angular.module("Consults").controller("Consults.ConsultRequestAttachmentController",["$uibModalInstance","consultService","consult",function(t,n,o){var a=this;a.atth={},a.atth.patientName=o.demographic.lastName+", "+o.demographic.firstName,a.atth.attachedDocs=o.attachments,null!=a.atth.attachedDocs[0]&&(a.atth.selectedAttachedDoc=a.atth.attachedDocs[0]);var r=0;null!=o.id&&(r=o.id),n.getRequestAttachments(r,o.demographicId).then(function(e){null==o.availableDocs&&(o.availableDocs=Juno.Common.Util.toArray(e)),a.atth.availableDocs=o.availableDocs,null!=a.atth.availableDocs[0]&&(a.atth.selectedAvailableDoc=a.atth.availableDocs[0])},function(e){console.log(e)}),a.openDoc=function(e){window.open("../"+e.url)},a.attach=function(){if(null!=a.atth.selectedAvailableDoc){a.atth.attachedDocs.push(a.atth.selectedAvailableDoc),a.atth.selectedAttachedDoc=a.atth.selectedAvailableDoc,a.atth.selectedAttachedDoc.attached=!0;var t=a.atth.availableDocs.map(function(e){return e.documentNo+e.documentType}).indexOf(a.atth.selectedAvailableDoc.documentNo+a.atth.selectedAvailableDoc.documentType);a.atth.availableDocs.splice(t,1);var n=e("#selAvailDoc")[0].selectedIndex;n>=a.atth.availableDocs.length&&(n=a.atth.availableDocs.length-1),a.atth.selectedAvailableDoc=a.atth.availableDocs[n],o.attachmentsChanged=!0}},a.detach=function(){if(null!=a.atth.selectedAttachedDoc){a.atth.availableDocs.push(a.atth.selectedAttachedDoc),a.atth.selectedAvailableDoc=a.atth.selectedAttachedDoc,a.atth.selectedAvailableDoc.attached=!1;var t=a.atth.attachedDocs.map(function(e){return e.documentNo+e.documentType}).indexOf(a.atth.selectedAttachedDoc.documentNo+a.atth.selectedAttachedDoc.documentType);a.atth.attachedDocs.splice(t,1);var n=e("#selAttachDoc")[0].selectedIndex;n>=a.atth.attachedDocs.length&&(n=a.atth.attachedDocs.length-1),a.atth.selectedAttachedDoc=a.atth.attachedDocs[n],o.attachmentsChanged=!0}},a.done=function(){console.log("CLOSE MODAL"),t.close()}}])}).call(this,n(4))},function(e,t,n){(function(e){angular.module("Consults").controller("Consults.ConsultResponseAttachmentController",["$uibModalInstance","consultService","consult",function(t,n,o){controller.atth={},controller.atth.patientName=o.demographic.lastName+", "+o.demographic.firstName,controller.atth.attachedDocs=o.attachments,null!=controller.atth.attachedDocs[0]&&(controller.atth.selectedAttachedDoc=controller.atth.attachedDocs[0]);var a=0;null!=o.id&&(a=o.id),n.getResponseAttachments(a,o.demographic.demographicNo).then(function(e){null==o.availableDocs&&(o.availableDocs=Juno.Common.Util.toArray(e)),controller.atth.availableDocs=o.availableDocs,Juno.Consults.Common.sortAttachmentDocs(controller.atth.availableDocs),null!=controller.atth.availableDocs[0]&&(controller.atth.selectedAvailableDoc=controller.atth.availableDocs[0])},function(e){console.log(e)}),controller.openDoc=function(e){window.open("../"+e.url)},controller.attach=function(){if(null!=controller.atth.selectedAvailableDoc){controller.atth.attachedDocs.push(controller.atth.selectedAvailableDoc),controller.atth.selectedAttachedDoc=controller.atth.selectedAvailableDoc,controller.atth.selectedAttachedDoc.attached=!0,Juno.Consults.Common.sortAttachmentDocs(controller.atth.attachedDocs);var t=e("#selAvailDoc").val();controller.atth.availableDocs.splice(t,1),t>=controller.atth.availableDocs.length&&(t=controller.atth.availableDocs.length-1),controller.atth.selectedAvailableDoc=controller.atth.availableDocs[t],o.attachmentsChanged=!0}},controller.detach=function(){if(null!=controller.atth.selectedAttachedDoc){controller.atth.availableDocs.push(controller.atth.selectedAttachedDoc),controller.atth.selectedAvailableDoc=controller.atth.selectedAttachedDoc,controller.atth.selectedAvailableDoc.attached=!1,Juno.Consults.Common.sortAttachmentDocs(controller.atth.availableDocs);var t=e("#selAttachDoc").val();controller.atth.attachedDocs.splice(t,1),t>=controller.atth.attachedDocs.length&&(t=controller.atth.attachedDocs.length-1),controller.atth.selectedAttachedDoc=controller.atth.attachedDocs[t],o.attachmentsChanged=!0}},controller.done=function(){t.close()}}])}).call(this,n(4))},function(e,t,n){(function(e){angular.module("Consults").controller("Consults.ConsultRequestListController",["$scope","$timeout","$state","$location","NgTableParams","consultService","providerService","demographicService","demographicsService","securityService","staticDataService",function(t,n,o,a,r,i,l,s,c,u,d){var p=this;u.hasRight("_con","r").then(function(e){p.consultReadAccess=e},function(e){console.log(e)}),u.hasRight("_con","u").then(function(e){p.consultUpdateAccess=e},function(e){console.log(e)}),u.hasRight("_con","w").then(function(e){p.consultWriteAccess=e},function(e){console.log(e)}),p.statuses=d.getConsultRequestStatuses(),p.urgencies=d.getConsultUrgencies(),p.lastResponse="",p.teams=[],p.consult={};p.search={team:"All Teams",startIndex:0,numToReturn:10},l.getActiveTeams().then(function(e){p.teams=e,p.teams.unshift("All Teams"),console.log(JSON.stringify(e))},function(e){alert(e),console.log(e)}),p.searchPatients=function(e){var t={type:c.SEARCH_MODE.Name,term:e,status:c.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return c.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push({demographicNo:e.data[n].demographicNo,name:e.data[n].lastName+", "+e.data[n].firstName});return t},function(e){console.log(e)})},p.searchMrps=function(e){var t={searchTerm:e,active:!0};return l.searchProviders(t).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({mrpNo:e[n].providerNo,name:e[n].name});return t},function(e){console.log(e)})},p.updateMrpNo=function(e){e instanceof Object?(p.search.mrpNo=Number(e.mrpNo),p.consult.mrpName=e.name):l.getProvider(e).then(function(e){p.consult.mrpName=e.lastName+", "+e.firstName},function(e){console.log(e)})},p.updateDemographicNo=function(e,t){null!=e?(p.search.demographicNo=e.demographicNo,p.consult.demographicName=e.name):s.getDemographic(t).then(function(e){p.consult.demographicName=e.lastName+", "+e.firstName},function(e){console.log(e)})},p.checkAll=function(){angular.forEach(p.lastResponse,function(e){e.checked=!0})},p.checkNone=function(){angular.forEach(p.lastResponse,function(e){e.checked=!1})},p.editConsult=function(e){var t="/record/"+e.demographic.demographicNo+"/consult/"+e.id;a.path(t).search(p.searchParams)},p.addConsult=function(){if(!p.consultWriteAccess)return alert("You don't have right to create new consult"),!1;var e="/record/"+p.search.demographicNo+"/consult/new";a.path(e).search(p.searchParams)},p.removeDemographicAssignment=function(){p.search.demographicNo=null,p.consult.demographicName=null},p.removeMrpAssignment=function(){p.search.mrpNo=null,p.consult.mrpName=null},p.doSearch=function(){p.tableParams.reload()},p.clear=function(){p.removeDemographicAssignment(),p.removeMrpAssignment();var e=null==o.params.demographicNo?null:Number(o.params.demographicNo);p.search={team:"All Teams",startIndex:0,numToReturn:10,demographicNo:e},p.doSearch()},p.setSearchParams=function(){p.searchParams={},"record.consultRequests"===o.$current.name?p.searchParams.list="patient":null!=p.search.demographicNo&&(p.searchParams.srhDemoNo=p.search.demographicNo),null!=p.search.mrpNo&&(p.searchParams.srhMrpNo=p.search.mrpNo),null!=p.search.status&&(p.searchParams.srhStatus=p.search.status),"All Teams"!=p.search.team&&(p.searchParams.srhTeam=p.search.team),null!=p.search.referralStartDate&&(p.searchParams.srhRefStartDate=p.search.referralStartDate.getTime()),null!=p.search.referralEndDate&&(p.searchParams.srhRefEndDate=p.search.referralEndDate.getTime()),null!=p.search.appointmentStartDate&&(p.searchParams.srhApptStartDate=p.search.appointmentStartDate.getTime()),null!=p.search.appointmentEndDate&&(p.searchParams.srhApptEndDate=p.search.appointmentEndDate.getTime()),null!=p.search.page&&(p.searchParams.srhToPage=p.search.page),null!=p.search.perPage&&(p.searchParams.srhCountPerPage=p.search.perPage),null!=p.search.sortDirection&&(p.searchParams.srhSortMode=p.search.sortColumn,p.searchParams.srhSortDir=p.search.sortDirection)},p.justOpen=!0,p.search.sortColumn="ReferralDate",p.search.sortDirection="desc",p.tableParams=new r({page:1,count:10,sorting:{ReferralDate:"desc"}},{getData:function(t){p.justOpen&&(p.getSavedSearchVals(),p.justOpen=!1),p.setSearchParams();var n=t.url().count,o=t.url().page;p.search.startIndex=(o-1)*n,p.search.numToReturn=parseInt(n),p.search.page=t.url().page,p.search.perPage=t.url().count;var a=/sorting\[(\w+)\]/g;for(var r in t.url()){var l=a.exec(String(r));l&&(p.search.sortColumn=l[1],p.search.sortDirection=t.url()[String(r)])}var s=angular.copy(p.search);return"All Teams"===s.team&&(s.team=null),i.searchRequests(s).then(function(n){t.total(parseInt(n.meta.total));for(var o=0;o<n.data.length;o++){for(var a=n.data[o],r=0;r<p.statuses.length;r++)if(a.status==p.statuses[r].value){a.statusDescription=p.statuses[r].name;break}for(r=0;r<p.urgencies.length;r++)if(a.urgency==p.urgencies[r].value){a.urgencyDescription=p.urgencies[r].name;break}if(1==a.urgency&&(a.urgencyColor="text-danger"),4!=a.status&&5!=a.status&&7!=a.status){var i=e(a.referralDate).toDate();i.setMonth(i.getMonth()+1),new Date>=i&&(a.outstanding=!0)}}return p.lastResponse=n.data,n.data},function(e){alert(e),console.log(e)})}}),p.getSavedSearchVals=function(){null!=o.params.demographicNo?(p.hideSearchPatient=!0,p.search.demographicNo=Number(o.params.demographicNo)):null!=a.search().srhDemoNo&&(p.search.demographicNo=Number(a.search().srhDemoNo),p.updateDemographicNo(null,a.search().srhDemoNo)),null!=a.search().srhMrpNo&&(p.search.mrpNo=Number(a.search().srhMrpNo),p.updateMrpNo(a.search().srhMrpNo)),null!=a.search().srhRefStartDate&&(p.search.referralStartDate=new Date(Number(a.search().srhRefStartDate))),null!=a.search().srhRefEndDate&&(p.search.referralEndDate=new Date(Number(a.search().srhRefEndDate))),null!=a.search().srhApptStartDate&&(p.search.appointmentStartDate=new Date(Number(a.search().srhApptStartDate))),null!=a.search().srhApptEndDate&&(p.search.appointmentEndDate=new Date(Number(a.search().srhApptEndDate))),null!=a.search().srhStatus&&(p.search.status=Number(a.search().srhStatus)),null!=a.search().srhTeam&&(p.search.team=a.search().srhTeam),null!=a.search().srhCountPerPage&&(p.search.perPage=a.search().srhCountPerPage),null!=a.search().srhToPage&&(p.search.page=a.search().srhToPage),null!=a.search().srhSortMode&&null!=a.search().srhSortDir&&(p.search.sortColumn=a.search().sortMode,p.search.sortDirection=a.search().srhSortDir)},p.popup=function(e,t,n,o){windowprops="height="+e+",width="+t+",location=no,scrollbars=yes,menubars=no,toolbars=no,resizable=yes,screenX=0,screenY=0,top=0,left=0";var a=window.open(n,o,windowprops);null!=a&&null==a.opener&&(a.opener=self)}}])}).call(this,n(6))},function(e,t,n){(function(e,t){angular.module("Consults").controller("Consults.ConsultRequestController",["$scope","$http","$q","$resource","$location","$uibModal","consultService","demographicService","securityService","summaryService","staticDataService","consult","user",function(n,o,a,r,i,l,s,c,u,d,p,m,h){var g=this;g.consult=m,console.log(m),m.faxList=Juno.Common.Util.toArray(m.faxList),m.serviceList=Juno.Common.Util.toArray(m.serviceList),m.sendToList=Juno.Common.Util.toArray(m.sendToList),g.urgencies=p.getConsultUrgencies(),g.statuses=p.getConsultRequestStatuses(),g.hours=p.getHours(),g.minutes=p.getMinutes(),g.parseTime=function(e){var t=e.split(":");m.appointmentHour=t[0],m.appointmentMinute=t[1]},null!==m.appointmentTime&&g.parseTime(m.appointmentTime),g.initialize=function(){u.hasRight("_con","r").then(function(e){g.consultReadAccess=e},function(e){console.error(e)}),u.hasRight("_con","u").then(function(e){g.consultUpdateAccess=e},function(e){console.error(e)}),u.hasRight("_con","w").then(function(e){g.consultWriteAccess=e},function(e){console.error(e)}),c.getDemographic(m.demographicId).then(function(e){m.demographic=e,m.demographic.extras=Juno.Common.Util.toArray(m.demographic.extras);for(var t=0;t<m.demographic.extras.length;t++)if("demo_cell"==m.demographic.extras[t].key){m.demographic.cellPhone=m.demographic.extras[t].value;break}},function(e){console.error(e)}),s.getLetterheadList().then(function(e){if(m.letterheadList=Juno.Common.Util.toArray(e.data),null===m.letterhead)g.changeLetterhead(m.letterheadList[0]);else for(var t=0;t<m.letterheadList.length;t++)if(m.letterheadList[t].id===m.letterheadName){g.changeLetterhead(m.letterheadList[t]);break}},function(e){console.error(e)});for(var e=0;e<m.serviceList.length;e++)if(m.serviceList[e].serviceId==m.serviceId){g.specialists=Juno.Common.Util.toArray(m.serviceList[e].specialists);break}angular.forEach(g.specialists,function(e){m.professionalSpecialist&&e.id==m.professionalSpecialist.id&&(m.professionalSpecialist=e)}),m.attachments=Juno.Common.Util.toArray(m.attachments),Juno.Consults.Common.sortAttachmentDocs(m.attachments)},g.initialize(),g.changeLetterhead=function(e){m.letterhead=e,m.letterheadName=m.letterhead.id,m.letterheadAddress=m.letterhead.address,m.letterheadPhone=m.letterhead.phone,m.letterheadFax=m.letterhead.fax},g.consultChanged=0,n.$watchCollection(function(){return g.consult},function(e,t){g.consultChanged++}),n.$on("$stateChangeStart",function(e){g.consultChanged>0&&(confirm("You may have unsaved data. Are you sure to leave?")||e.preventDefault())}),g.changeService=function(t){var o=e("#serviceId")[0].selectedIndex;null!==o?g.specialists=Juno.Common.Util.toArray(m.serviceList[o].specialists):n.specialists=null},g.writeToBox=function(e,t){for(var n=Juno.Common.Util.toArray(e.summaryItem),o=null,a=0;a<n.length;a++)o=Juno.Common.Util.addNewLine(n[a].displayName,o);"clinicalInfo"==t?m.clinicalInfo=Juno.Common.Util.addNewLine(o,m.clinicalInfo):"concurrentProblems"==t?m.concurrentProblems=Juno.Common.Util.addNewLine(o,m.concurrentProblems):"currentMeds"==t&&(m.currentMeds=Juno.Common.Util.addNewLine(o,m.currentMeds))},g.getFamilyHistory=function(e){d.getFamilyHistory(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No family history"),g.writeToBox(t,e)},function(e){alert("Error grabbing family history!"),console.error(e)})},g.getMedicalHistory=function(e){d.getMedicalHistory(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No medical history"),g.writeToBox(t,e)},function(e){alert("Error grabbing medical history!"),console.error(e)})},g.getSocialHistory=function(e){d.getSocialHistory(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No social history"),g.writeToBox(t,e)},function(e){alert("Error grabbing social history!"),console.error(e)})},g.getOngoingConcerns=function(e){d.getOngoingConcerns(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No ongoing concerns"),g.writeToBox(t,e)},function(e){alert("Error grabbing ongoing concerns!"),console.error(e)})},g.getOtherMeds=function(e){d.getOtherMeds(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No other meds"),g.writeToBox(t,e)},function(e){alert("Error grabbing other meds!"),console.error(e)})},g.getReminders=function(e){d.getReminders(m.demographicId).then(function(t){0===t.summaryItem.length&&alert("No reminders"),g.writeToBox(t,e)},function(e){alert("Error grabbing reminders!"),console.error(e)})},g.getAllergies=function(e){d.getAllergies(m.demographicId).then(function(t){g.writeToBox(t,e)},function(e){console.error(e)})},g.invalidData=function(){return g.consult.urgency?g.consult.letterheadName?g.consult.professionalSpecialist?(null==g.consult.demographic||""==g.consult.demographic)&&(alert("Error! Invalid patient!"),!0):(alert("Please select a Specialist"),!0):(alert("Please select a Letterhead"),!0):(alert("Please select an Urgency"),!0)},g.setAppointmentTime=function(){null==m.appointmentHour||null==m.appointmentMinute||m.patientWillBook?m.appointmentTime=null:(apptTime=t(Date.now()),apptTime.set("hours",m.appointmentHour),apptTime.set("minute",m.appointmentMinute),m.appointmentTime=apptTime)},g.openAttach=function(e){window.open("../"+e.url)},g.attachFiles=function(){l.open({templateUrl:"src/consults/consultAttachment.jsp",controller:"Consults.ConsultRequestAttachmentController as consultAttachmentCtrl",windowClass:"attachment-modal-window",size:"lg",resolve:{consult:function(){return m}}}).result.then(function(){m.attachmentsChanged&&(g.consultChanged++,m.attachmentsChanged=!1)},function(e){console.error(e)})},g.setESendEnabled=function(){g.eSendEnabled=null!=m.professionalSpecialist&&null!=m.professionalSpecialist.eDataUrl&&""!=m.professionalSpecialist.eDataUrl.trim()},g.setESendEnabled(),g.save=function(){var e=a.defer(),t=!0;return g.consultWriteAccess||null!=m.id||(alert("You don't have right to save new consult"),t=!1),g.consultUpdateAccess||(alert("You don't have right to update consult"),t=!1),g.invalidData()&&(t=!1),t?(g.consultSaving=!0,g.setAppointmentTime(),s.saveRequest(m).then(function(t){null==m.id&&i.path("/record/"+m.demographicId+"/consult/"+t.id),e.resolve(t.id)},function(t){console.error(t),e.reject(t)}).finally(function(){g.setESendEnabled(),g.consultSaving=!1,g.consultChanged=0})):e.reject("Invalid"),e.promise},g.close=function(){"patient"===i.search().list?i.path("/record/"+m.demographicId+"/consults"):i.path("/consults")},g.saveAndFax=function(){g.save().then(function(e){var t=m.demographicId,n=Juno.Common.Util.noNull(m.letterhead.fax),o=Juno.Common.Util.noNull(m.professionalSpecialist.faxNumber);window.open("../fax/CoverPage.jsp?reqId="+e+"&demographicNo="+t+"&letterheadFax="+n+"&faxRecipients="+o)},function(e){})},g.eSend=function(){g.eSendEnabled&&s.eSendRequest(m.id).then(function(e){alert(e.message)},function(e){console.error(e)})},g.saveAndPrint=function(){g.save().then(function(e){g.print(e)},function(e){})},g.print=function(e){window.open("../oscarEncounter/oscarConsultationRequest/printPdf2.do?reqId="+e+"&demographicNo="+m.demographicId)}}])}).call(this,n(4),n(6))},function(e,t){angular.module("Consults").controller("Consults.ConsultResponseListController",["$scope","$timeout","$state","$location","NgTableParams","consultService","providerService","demographicService","demographicsService","securityService","staticDataService",function(e,t,n,o,a,r,i,l,s,c,u){var d=this;d.onRecordPage=!1,d.demographicNo=null,d.statuses=u.getConsultResponseStatuses(),d.urgencies=u.getConsultUrgencies(),d.lastResponse="",d.teams=[],d.consult={};d.search={team:"All Teams",startIndex:0,numToReturn:10},d.init=function(){n.params.demographicNo&&(d.demographicNo=parseInt(n.params.demographicNo),d.onRecordPage=!0,d.search.list="patient"),d.getAccessRights(),d.getTeams()},d.getAccessRights=function(){c.hasRight("_con","r").then(function(e){d.consultReadAccess=e},function(e){console.log(e)}),c.hasRight("_con","u").then(function(e){d.consultUpdateAccess=e},function(e){console.log(e)}),c.hasRight("_con","w").then(function(e){d.consultWriteAccess=e},function(e){console.log(e)})},d.getTeams=function(){i.getActiveTeams().then(function(e){d.teams=e,d.teams.unshift("All Teams"),d.search.team="All Teams"},function(e){console.log(e)})},d.searchPatients=function(e){var t={type:s.SEARCH_MODE.Name,term:e,status:s.STATUS_MODE.ACTIVE,integrator:!1,outofdomain:!0};return s.search(t,0,25).then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push({demographicNo:e.data[n].demographicNo,name:e.data[n].lastName+", "+e.data[n].firstName});return t},function(e){console.log(e)})},d.searchMrps=function(e){var t={searchTerm:e,active:!0};return i.searchProviders(t).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({mrpNo:e[n].providerNo,name:e[n].name});return t},function(e){console.log(e)})},d.updateMrpNo=function(e){Juno.Common.Util.exists(e)?(d.search.mrpNo=Number(e.mrpNo),d.consult.mrpName=e.name):i.getProvider(e).then(function(t){d.search.mrpNo=Number(e),d.consult.mrpName=t.lastName+", "+t.firstName,d.doSearch(!0)},function(e){console.log(e)})},d.updateDemographicNo=function(e,t,n){null!==e&&(d.demographicName=e.name,d.demographicNo=e.demographicNo,d.tableParams.reload())},d.checkAll=function(){angular.forEach(d.lastResponse,function(e){e.checked=!0})},d.checkNone=function(){angular.forEach(d.lastResponse,function(e){e.checked=!1})},d.editConsult=function(e){return e?(url="/record/"+e.demographic.demographicNo+"/consultResponse/"+e.id,o.path(url).search(d.search),!0):(alert("Something went wrong"),!1)},d.addConsult=function(){if(!d.consultWriteAccess)return alert("You don't have right to create new consult response"),!1;if(d.demographicNo){var e="/record/"+d.demographicNo+"/consultResponse/new";return o.path(e).search(d.search),!0}return alert("Something went wrong"),!1},d.removeDemographicAssignment=function(){d.demographicNo=null,d.demographicName=null,d.tableParams.reload()},d.removeMrpAssignment=function(){d.search.mrpNo=null,d.consult.mrpName=null,d.tableParams.reload()},d.clear=function(){d.onRecordPage||d.removeDemographicAssignment(),d.removeMrpAssignment(),d.search={team:"All Teams",startIndex:0,numToReturn:10},d.doSearch()},d.doSearch=function(e){o.search(d.search),d.tableParams.reload()},d.tableParams=new a({page:1,count:10,sorting:{ReferralDate:"desc"}},{getData:function(e){d.getSavedSearchParams();var t=e._params.count,n=e.url().page;d.search.startIndex=(n-1)*t,d.search.numToReturn=parseInt(t),d.search.page=e.url().page,d.search.perPage=e.url().count;var o=/sorting\[(\w+)\]/g;for(var a in e.url()){var i=o.exec(String(a));i&&(d.search.sortColumn=i[1],d.search.sortDirection=e.url()[String(a)])}var l=angular.copy(d.search);return"All Teams"===l.team&&(l.team=null),d.demographicNo&&(l.demographicNo=d.demographicNo),r.searchResponses(l).then(function(t){e.total(parseInt(t.meta.total[0]));for(var n=0;n<t.data.length;n++){for(var o=t.data[n],a=0;a<d.statuses.length;a++)if(o.status===d.statuses[a].value){o.statusDescription=d.statuses[a].name;break}for(a=0;a<d.urgencies.length;a++)if(o.urgency===d.urgencies[a].value){o.urgencyDescription=d.urgencies[a].name;break}1===o.urgency&&(o.urgencyColor="text-danger")}return d.lastResponse=t.data,t.data},function(e){console.log(e)})}}),d.getSavedSearchParams=function(){null!=n.params.demographicNo?(d.hideSearchPatient=!0,d.updateDemographicNo(null,n.params.demographicNo)):null!=o.search().srhDemoNo&&d.updateDemographicNo(null,o.search().srhDemoNo),null!=o.search().srhMrpNo&&d.updateMrpNo(o.search().srhMrpNo),o.search().referralStartDate&&(d.search.referralStartDate=new Date(o.search().referralStartDate)),null!=o.search().referralEndDate&&(d.search.referralEndDate=new Date(o.search().referralEndDate)),null!=o.search().appointmentStartDate&&(d.search.appointmentStartDate=new Date(o.search().appointmentStartDate)),null!=o.search().appointmentEndDate&&(d.search.appointmentEndDate=new Date(o.search().appointmentEndDate)),null!=o.search().status&&(d.search.status=Number(o.search().status)),null!=o.search().team&&(d.search.team=o.search().team),null!=o.search().countPerPage&&(d.countPerPage=o.search().countPerPage),null!=o.search().toPage&&(d.toPage=o.search().toPage),null!=o.search().sortColumn&&null!=o.search().sortDirection&&(d.search.sortColumn=o.search().sortColumn,d.search.sortDirection=o.search().sortDirection)},d.init()}])},function(e,t,n){(function(e,t){angular.module("Consults").controller("Consults.ConsultResponseController",["$scope","$http","$resource","$location","$uibModal","consultService","demographicService","securityService","summaryService","staticDataService","consult","user",function(n,o,a,r,i,l,s,c,u,d,p,m){var h=this;h.initialize=function(){c.hasRight("_con","r").then(function(e){h.consultReadAccess=e},function(e){console.log(e)}),c.hasRight("_con","u").then(function(e){h.consultUpdateAccess=e},function(e){console.log(e)}),c.hasRight("_con","w").then(function(e){h.consultWriteAccess=e},function(e){console.log(e)}),h.consult=p,p.referringDoctorList=Juno.Common.Util.toArray(p.referringDoctorList),p.faxList=Juno.Common.Util.toArray(p.faxList),p.sendToList=Juno.Common.Util.toArray(p.sendToList),p.attachments=Juno.Common.Util.toArray(p.attachments),Juno.Consults.Common.sortAttachmentDocs(p.attachments),l.getLetterheadList().then(function(e){if(p.letterheadList=Juno.Common.Util.toArray(e.data),null===p.letterhead)h.changeLetterhead(p.letterheadList[0]);else for(var t=0;t<p.letterheadList.length;t++)if(p.letterheadList[t].id===p.letterheadName){h.changeLetterhead(p.letterheadList[t]);break}},function(e){console.log(e)}),angular.forEach(p.referringDoctorList,function(e){null!==p.referringDoctor&&e.id===p.referringDoctor.id&&(p.referringDoctor=e)}),p.demographic.extras=Juno.Common.Util.toArray(p.demographic.extras);for(var e=0;e<p.demographic.extras.length;e++)if("demo_cell"==p.demographic.extras[e].key){p.demographic.cellPhone=p.demographic.extras[e].value;break}},h.initialize(),h.changeLetterhead=function(e){p.letterhead=e,p.letterheadName=p.letterhead.id,p.letterheadAddress=p.letterhead.address,p.letterheadPhone=p.letterhead.phone,p.letterheadFax=p.letterhead.fax},h.urgencies=d.getConsultUrgencies(),h.statuses=d.getConsultResponseStatuses(),h.hours=d.getHours(),h.minutes=d.getMinutes(),h.parseTime=function(e){var t=e.split(":");p.appointmentHour=t[0],p.appointmentMinute=t[1]},null!==p.appointmentTime&&h.parseTime(p.appointmentTime),h.consultChanged=-1,n.$watchCollection(function(){return h.consult},function(){h.consultChanged++}),n.$on("$stateChangeStart",function(e){h.consultChanged>0&&(confirm("You may have unsaved data. Are you sure to leave?")||e.preventDefault())}),h.writeToBox=function(e,t){for(var n=Juno.Common.Util.toArray(e.summaryItem),o=null,a=0;a<n.length;a++)o=Juno.Common.Util.addNewLine(n[a].displayName,o);"clinicalInfo"==t?p.clinicalInfo=Juno.Common.Util.addNewLine(o,p.clinicalInfo):"concurrentProblems"==t?p.concurrentProblems=Juno.Common.Util.addNewLine(o,p.concurrentProblems):"currentMeds"==t&&(p.currentMeds=Juno.Common.Util.addNewLine(o,p.currentMeds))},h.getFamilyHistory=function(e){u.getFamilyHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No family history"),h.writeToBox(t,e)},function(e){alert("Error grabbing family history!"),console.log(e)})},h.getMedicalHistory=function(e){u.getMedicalHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No medical history"),h.writeToBox(t,e)},function(e){alert("Error grabbing medical history!"),console.log(e)})},h.getSocialHistory=function(e){u.getSocialHistory(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No social history"),h.writeToBox(t,e)},function(e){alert("Error grabbing social history!"),console.log(e)})},h.getOngoingConcerns=function(e){u.getOngoingConcerns(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No ongoing concerns"),h.writeToBox(t,e)},function(e){alert("Error grabbing ongoing concerns!"),console.log(e)})},h.getOtherMeds=function(e){u.getOtherMeds(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No other meds"),h.writeToBox(t,e)},function(e){alert("Error grabbing other meds!"),console.log(e)})},h.getReminders=function(e){u.getReminders(p.demographic.demographicNo).then(function(t){0===t.summaryItem.length&&alert("No reminders"),h.writeToBox(t,e)},function(e){alert("Error grabbing reminders!"),console.log(e)})},h.invalidData=function(){return h.consult.urgency?h.consult.letterheadName?Juno.Common.Util.isUndefinedOrNull(h.consult.referringDoctor)?(alert("Please select a Referring Doctor"),!0):(!h.consult.demographic||""===h.consult.demographic)&&(alert("Error! Invalid patient!"),!0):(alert("Please select a Letterhead"),!0):(alert("Please select an Urgency"),!0)},h.setAppointmentTime=function(){null!==p.appointmentHour&&null!==p.appointmentMinute?(apptTime=e(Date.now()),apptTime.set("hours",p.appointmentHour),apptTime.set("minute",p.appointmentMinute),p.appointmentTime=apptTime):p.appointmentTime=null},h.openAttach=function(e){window.open("../"+e.url)},h.attachFiles=function(){i.open({templateUrl:"src/consults/consultAttachment.jsp",controller:"Consults.ConsultResponseAttachmentController as consultAttachmentCtrl",windowClass:"attachment-modal-window",backdrop:"static",resolve:{consult:function(){return p}}}).result.then(function(e){p.attachmentsChanged&&(h.consultChanged++,p.attachmentsChanged=!1)},function(e){console.log(e)})},h.save=function(){return h.consultWriteAccess||null!=p.id?h.consultUpdateAccess?!h.invalidData()&&(h.consultSaving=!0,h.setAppointmentTime(),l.saveResponse(p).then(function(e){null===p.id&&r.path("/record/"+p.demographic.demographicNo+"/consultResponse/"+e.body.id)},function(e){console.log(e)}),h.consultSaving=!1,h.consultChanged=-1,!0):(alert("You don't have right to update consult"),!1):(alert("You don't have right to save new consult"),!1)},h.close=function(){"patient"===r.search().list?r.path("/record/"+p.demographic.demographicNo+"/consultResponses"):r.path("/consultResponses")};var g="<html><style>body{width:800px;font-family:arial,verdana,tahoma,helvetica,sans serif}table{width:100%}th{text-align:left;font-weight:bold;width:1px;white-space:nowrap}td{vertical-align:top}label{font-weight:bold}em{font-size:small}.large{font-size:large}.center{text-align:center}</style><style media='print'>button{display:none}.noprint{display:none}</style><script>function printAttachments(url){window.open('../'+url);}<\/script><body>";h.sendFax=function(){var e=Juno.Common.Util.toTrimmedString(h.urgencies[t("#urgency").val()].name),n=Juno.Common.Util.toTrimmedString(p.letterheadList[t("#letterhead").val()].name),o=Juno.Common.Util.getPrintPage2(e,n,p,m),a=encodeURIComponent(g+o),r=p.id,i=p.demographic.demographicNo,l=Juno.Common.Util.toTrimmedString(p.letterheadFax),s=Juno.Common.Util.toTrimmedString(p.referringDoctor.faxNumber);window.open("../fax/CoverPage.jsp?consultResponsePage="+a+"&reqId="+r+"&demographicNo="+i+"&letterheadFax="+l+"&faxRecipients="+s)},h.printPreview=function(){if(!h.invalidData()){var e=window.open("","consultResponsePrintWin","width=830,height=900,scrollbars=yes,location=no");e.document.open();for(var n="",o=0;o<p.attachments.length;o++)n+="<div class='noprint'><button onclick=printAttachments('"+p.attachments[o].url+"')>Print attachment</button> "+p.attachments[o].displayName+"</div>";var a=Juno.Common.Util.toTrimmedString(h.urgencies[t("#urgency").val()].name),r=Juno.Common.Util.toTrimmedString(p.letterheadList[t("#letterhead").val()].name),i=h.getPrintPage2(a,r,p,m);e.document.write(g+"<button onclick='window.print()'>Print</button><button onclick='window.close()'>Close</button>"+n+i),e.document.close()}},h.getPrintPage2=function(e,t,n,o){var a=Juno.Common.Util.toTrimmedString(n.letterheadList[0].name),r=Juno.Common.Util.formatDate(n.responseDate),i=Juno.Common.Util.formatDate(n.referralDate),l=Juno.Common.Util.toTrimmedString(n.letterheadAddress),s=Juno.Common.Util.toTrimmedString(n.letterheadPhone),c=Juno.Common.Util.toTrimmedString(n.letterheadFax),u=Juno.Common.Util.toTrimmedString(n.referringDoctor.name),d=Juno.Common.Util.toTrimmedString(n.referringDoctor.phoneNumber),p=Juno.Common.Util.toTrimmedString(n.referringDoctor.faxNumber),m=Juno.Common.Util.toTrimmedString(n.referringDoctor.streetAddress),h=Juno.Common.Util.toTrimmedString(n.demographic.lastName)+", "+Juno.Common.Util.toTrimmedString(n.demographic.firstName),g=Juno.Common.Util.toTrimmedString(n.demographic.phone),f=Juno.Common.Util.toTrimmedString(n.demographic.alternativePhone),v=Juno.Common.Util.formatDate(n.demographic.dateOfBirth),b=Juno.Common.Util.toTrimmedString(n.demographic.sexDesc),S=Juno.Common.Util.toTrimmedString(n.demographic.hin)+"-"+Juno.Common.Util.toTrimmedString(n.demographic.ver),C=Juno.Common.Util.toTrimmedString(n.demographic.chartNo),N="";null!=n.demographic.address&&(N=Juno.Common.Util.toTrimmedString(n.demographic.address.address)+", "+Juno.Common.Util.toTrimmedString(n.demographic.address.city)+", "+Juno.Common.Util.toTrimmedString(n.demographic.address.province)+" "+Juno.Common.Util.toTrimmedString(n.demographic.address.postal));var y=Juno.Common.Util.formatDate(n.appointmentDate),_=Juno.Common.Util.formatTime(n.appointmentTime),A=Juno.Common.Util.toTrimmedString(n.reasonForReferral);return"<div class='center'><label class='large'>"+a+"</label><br/><label>Consultation Response</label><br/></div><br/><table><tr><td><label>Date: </label>"+r+"</td><td rowspan=6 width=10></td><td><label>Status: </label>"+e+"</td></tr><tr><td colspan=2></td></tr><tr><th>FROM:</th><th>TO:</th></tr><tr><td><p class='large'>"+t+"</p>"+l+"<br/><label>Tel: </label>"+s+"<br/><label>Fax: </label>"+c+"</td><td><table><tr><th>Referring Doctor:</th><td>"+u+"</td></tr><tr><th>Phone:</th><td>"+d+"</td></tr><tr><th>Fax:</th><td>"+p+"</td></tr><tr><th>Address:</th><td>"+m+"</td></tr></table></td></tr><tr><td colspan=2></td></tr><tr><td><table><tr><th>Patient:</th><td>"+h+"</td></tr><tr><th>Address:</th><td>"+N+"</td></tr><tr><th>Phone:</th><td>"+g+"</td></tr><tr><th>Work Phone:</th><td>"+f+"</td></tr><tr><th>Birthdate:</th><td>"+v+"</td></tr></table></td><td><table><tr><th>Sex:</th><td>"+b+"</td></tr><tr><th>Health Card No:</th><td>"+S+"</td></tr><tr><th>Appointment date:</th><td>"+y+"</td></tr><tr><th>Appointment time:</th><td>"+_+"</td></tr><tr><th>Chart No:</th><td>"+C+"</td></tr></table></td></tr></table><br/><table><tr><th>Examination:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.examination)+"<hr></td></tr><tr><th>Impression:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.impression)+"<hr></td></tr><tr><th>Plan:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.plan)+"<hr></td></tr><tr><td></td></tr><tr><th>Reason for consultation: (Date: "+i+")</th></tr><tr><td>"+A+"<hr></td></tr><tr><th>Pertinent Clinical Information:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.clinicalInfo)+"<hr></td></tr><tr><th>Significant Concurrent Problems:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.concurrentProblems)+"<hr></td></tr><tr><th>Current Medications:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.currentMeds)+"<hr></td></tr><tr><th>Allergies:</th></tr><tr><td>"+Juno.Common.Util.toTrimmedString(n.allergies)+"<hr></td></tr><tr><td><label>Consultant: </label>"+(Juno.Common.Util.toTrimmedString(o.lastName)+", "+Juno.Common.Util.toTrimmedString(o.firstName))+"</td></tr><tr><td></td></tr><tr><td><div class='center'><em>Created by: OSCAR The open-source EMR www.oscarcanada.org</em></div></td></tr></table></body></html>"}}])}).call(this,n(6),n(4))},function(e,t,n){"use strict";angular.module("Inbox",[])},function(e,t){angular.module("Inbox").controller("Inbox.InboxController",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";angular.module("Patient.Search",["Common.Services"])},function(e,t,n){"use strict";(function(e){angular.module("Patient.Search").controller("Patient.Search.PatientSearchController",["$q","$state","$stateParams","$uibModal","NgTableParams","securityService","demographicsService",function(t,n,o,a,r,i,l){var s={demographicReadAccess:null,search:{}};return s.STATUS_MODE=l.STATUS_MODE,s.SEARCH_MODE=l.SEARCH_MODE,s.defaultStatus=l.STATUS_MODE.ACTIVE,s.init=function(){s.clearParams(),Juno.Common.Util.exists(o.term)&&(s.search.term=o.term,isNaN(s.search.term)||(s.search.type=l.SEARCH_MODE.Hin)),s.search.status=s.defaultStatus,i.hasRights({items:[{objectName:"_demographic",privilege:"r"}]}).then(function(e){Juno.Common.Util.exists(e.content)&&1===e.content.length?(s.demographicReadAccess=e.content[0],s.demographicReadAccess&&s.initTable()):(console.log("failed to load rights",e),s.demographicReadAccess=!1)},function(e){console.log(e),s.demographicReadAccess=!1})},s.initTable=function(){s.tableParams=new r({page:1,count:10,sorting:{DemographicName:"asc"}},{getData:function(e){var n=t.defer(),o=e.url().count,a=e.url().page;s.search.params=e.url();var r=[];return r.push(l.search(s.search,a,o)),s.integratorResults=null,s.search.integrator&&r.push(l.searchIntegrator(s.search,100)),t.all(r).then(function(t){var o=t[0];e.total(o.meta.total),s.search.integrator&&(s.integratorResults=t[1]),n.resolve(o.data)},function(e){console.log("patient search failed",e),n.reject()}),n.promise}})},s.searchPatients=function(){if(s.search.type===l.SEARCH_MODE.DOB){var t=e(s.search.term,["YYYY-MM-DD","YYYY/MM/DD"],!0);if(!t.isValid())return void alert("Please enter Date of Birth in format YYYY-MM-DD.");s.search.term=t.format("YYYY-MM-DD")}s.tableParams.page(1),s.tableParams.reload()},s.clearParams=function(e){Juno.Common.Util.exists(e)||(e=l.SEARCH_MODE.Name),s.search={type:e,term:"",status:s.defaultStatus,integrator:!1,outofdomain:!0},s.searchTermPlaceHolder=s.search.type===l.SEARCH_MODE.DOB?"YYYY-MM-DD":"Search Term",Juno.Common.Util.exists(s.tableParams)&&(s.tableParams.page(1),s.tableParams.reload())},s.toggleParam=function(e){["integrator","outofdomain"].indexOf(e)>-1&&(s.search[e]=!s.search[e])},s.loadRecord=function(e){n.go("record.details",{demographicNo:e,hideNote:!0})},s.showIntegratorResults=function(){var e=[],t=0;Juno.Common.Util.exists(s.integratorResults)&&(e=s.integratorResults.content,t=s.integratorResults.total),a.open({templateUrl:"src/patientsearch/remotePatientResults.jsp",controller:"RemotePatientResultsController",resolve:{results:function(){return e},total:function(){return t}}})},s}])}).call(this,n(6))},function(e,t,n){"use strict";angular.module("Patient.Search").controller("Patient.Search.RemotePatientResultsController",["$http","$scope","$uibModalInstance","results","total",function(e,t,n,o,a){t.results=o,t.total=a,t.currentPage=1,t.pageSize=5,t.startIndex=0,t.close=function(){n.close("Someone Closed Me")},t.doImport=function(e){var t="../appointment/copyRemoteDemographic.jsp?remoteFacilityId="+e.remoteFacilityId+"&demographic_no="+e.demographicNo;window.open(t,"ImportDemo","width=700, height=1027")},t.save=function(){n.close("Someone Saved Me")},t.prevPage=function(){0!=t.startIndex&&(t.currentPage--,t.startIndex=(t.currentPage-1)*t.pageSize)},t.nextPage=function(){t.startIndex+t.pageSize>t.total||(t.currentPage++,t.startIndex=(t.currentPage-1)*t.pageSize)}}])},function(e,t,n){"use strict";angular.module("Report",["Common","Common.Services"])},function(e,t){angular.module("oscarProviderViewModule").factory("ReportNavigation",["$rootScope",function(e){return{location:"",load:function(e){this.location=e}}}]),angular.module("Report").controller("Report.ReportsController",["$scope","$state","$filter","$log","ReportNavigation",function(e,t,n,o,a){var r=this;e.$emit("configureShowPatientList",!1),r.reports=[{numberLabel:"1",name:"EDB List",templateUrl:"src/report/report_edb_list.jsp"},{numberLabel:"2",name:"Active Patients",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportactivepatientlist.jsp"},{numberLabel:"3",name:"Daysheets",templateUrl:"src/report/report_daysheet.jsp"},{numberLabel:"5",name:"Bad Appointments",templateUrl:"src/report/report_badAppointments.jsp"},{numberLabel:"6",name:"Patient Chart List",templateUrl:"src/report/report_patientChartList.jsp"},{numberLabel:"7",name:"Old Patients",templateUrl:"src/report/report_oldPatients.jsp"},{numberLabel:"8",name:"No Show Appointments",templateUrl:"src/report/report_noShowAppointments.jsp"},{numberLabel:"9",name:"Consultations",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/ConsultationReport.jsp"},{numberLabel:"10",name:"Lab Requisitions",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/LabReqReport.jsp"},{numberLabel:"11",name:"Demographic Report Tool",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/ReportDemographicReport.jsp"},{numberLabel:"13",name:"Preventions",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarPrevention/PreventionReporting.jsp"},{numberLabel:"14",name:"Patient Study List",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/demographicstudyreport.jsp"},{numberLabel:"15",name:"Chronic Disease Management",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/oscarMeasurements/SetupSelectCDMReport.do"},{numberLabel:"16",name:"Waiting List",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarWaitingList/SetupDisplayWaitingList.do?waitingListId="},{numberLabel:"17",name:"Forms",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportFormRecord.jsp"},{numberLabel:"18",name:"SCBP demographic Report",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/reportBCARDemo.jsp"},{numberLabel:"19",name:"Clinical",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../report/ClinicalReports.jsp"},{numberLabel:"20",name:"Injections",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/InjectionReport2.jsp"},{numberLabel:"21",name:"OSIS Report",group:"Public Health",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/OSISReport.jsp"},{numberLabel:"22",name:"One Time Consult CDS Report",group:"Public Health",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/CDSOneTimeConsultReport.jsp"},{numberLabel:"23",name:"Report By Template",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/reportByTemplate/homePage.jsp"}],r.init=function(){r.reportGroup="",r.reportGroups=r.getReportGroups(),r.reportSidebar=a,r.test=r.reportSidebar.url},r.editDemographicSet=function(){r.selectReport({name:"Demographic Set Edit",templateUrl:"src/report/report_iframe.jsp",iframeUrl:"../oscarReport/demographicSetEdit.jsp"})},r.getReports=function(){return null!=r.reportGroup&&r.reportGroup.length>0?n("filter")(r.reports,{group:r.reportGroup}):r.reports},r.getReportGroups=function(){for(var e=[{value:"",label:"All Groups"}],t={},n=0;n<r.reports.length;n++)null!=r.reports[n].group&&(t[r.reports[n].group]=r.reports[n].group);for(var o in t)e.push({value:o,label:o});return e},r.selectReport=function(e){r.currentReport=e,!0===e.direct?window.open(e.window.url,e.name,"width="+e.window.width+"&height="+e.window.height):a.load(e.templateUrl)}}])},function(e,t,n){(function(e){angular.module("Report").controller("Report.ReportBadAppointmentSheetController",["$scope","$log","providerService","$filter",function(t,n,o,a){var r=this;r.params={providerNo:"",startDate:Juno.Common.Util.formatMomentDate(e())},r.searchProviders=function(e){var t={searchTerm:e,active:!0};return o.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},r.updateProviderNo=function(e,t,n){r.params.providerNo=t,r.params.name=n},r.generateReport=function(){var e=r.params,t=a("date")(e.startDate,"yyyy-MM-dd"),n="../report/reportapptsheet.jsp?dsmode=all&provider_no="+e.providerNo+"&sdate="+t;window.open(n,"report_badApptSheet","height=900,width=700")}}])}).call(this,n(6))},function(e,t,n){(function(e){angular.module("Report").controller("Report.ReportDaySheetController",["$scope","$log","$filter","providerService",function(t,n,o,a){var r=this;r.params={providerNo:"",type:"",startDate:Juno.Common.Util.formatMomentDate(e()),endDate:Juno.Common.Util.formatMomentDate(e()),startTime:null,endTime:null},r.searchProviders=function(e){var t={searchTerm:e,active:!0};return a.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},r.updateProviderNo=function(e,t,n){r.params.providerNo=t,r.data.providerNo=n},r.generateReport=function(){var e=r.params;if("all"===e.type||"all-nr"===e.type){var t=o("date")(e.startDate,"yyyy-MM-dd"),n=o("date")(e.endDate,"yyyy-MM-dd"),a=o("date")(e.startTime,"HH:mm"),i=o("date")(e.endTime,"HH:mm"),l="../report/reportdaysheet.jsp?dsmode=all&provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t+"&edate="+n+"&sTime="+a+"&eTime="+i;"all-nr"===e.type&&(l+="&rosteredStatus=true"),window.open(l,"report_daysheet","height=900,width=700")}if("new"===e.type){t=o("date")(e.startDate,"yyyy-MM-dd"),l="../report/reportdaysheet.jsp?dsmode=new&provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t;window.open(l,"report_daysheet","height=900,width=700")}if("lab"===e.type){l="../report/printLabDaySheetAction.do?xmlStyle=labDaySheet.xml&input_date="+(t=o("date")(e.startDate,"yyyy-MM-dd"));window.open(l,"report_daysheet","height=900,width=700")}if("billing"===e.type){l="../report/printLabDaySheetAction.do?xmlStyle=billDaySheet.xml&input_date="+(t=o("date")(e.startDate,"yyyy-MM-dd"));window.open(l,"report_daysheet","height=900,width=700")}if("tab"===e.type){t=o("date")(e.startDate,"yyyy-MM-dd"),l="../report/tabulardaysheetreport.jsp?provider_no="+(""===e.providerNo?"*":e.providerNo)+"&sdate="+t;window.open(l,"report_daysheet","height=900,width=700")}},r.reset=function(){r.params={providerNo:"",type:"",startDate:Juno.Common.Util.formatMomentDate(e()),endDate:Juno.Common.Util.formatMomentDate(e()),startTime:null,endTime:null}}}])}).call(this,n(6))},function(e,t,n){(function(e){angular.module("Report").controller("Report.ReportEdbListController",["$scope","$log","$filter",function(t,n,o){var a=this;a.params={startDate:Juno.Common.Util.formatMomentDate(e()),endDate:Juno.Common.Util.formatMomentDate(e()),version:"",region:"ON"},a.generateReport=function(){n.log("run edb report");var e=o("date")(a.params.startDate,"yyyy-MM-dd"),t=o("date")(a.params.endDate,"yyyy-MM-dd"),r="";"BC"===a.params.region&&(r="05"==a.params.version?"../report/reportbcedblist2007.jsp?startDate="+e+"&endDate="+t:"../report/reportbcedblist.jsp?startDate="+e+"&endDate="+t),"ON"===a.params.region&&(r="05"==a.params.version?"../report/reportonedblist.jsp?startDate="+e+"&endDate="+t:"../report/reportnewedblist.jsp?startDate="+e+"&endDate="+t),window.open(r,"report_edb","height=900,width=700")}}])}).call(this,n(6))},function(e,t,n){(function(e){angular.module("Report").controller("Report.ReportNoShowAppointmentSheetController",["$scope","$log","$filter","providerService",function(t,n,o,a){var r=this;r.params={providerNo:"",startDate:Juno.Common.Util.formatMomentDate(e())},r.searchProviders=function(e){var t={searchTerm:e,active:!0};return a.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},r.updateProviderNo=function(e,t,n){r.params.providerNo=t,r.params.name=n},r.generateReport=function(){var e=r.params,t=o("date")(e.startDate,"yyyy-MM-dd"),n="../report/reportnoshowapptlist.jsp?provider_no="+e.providerNo+"&sdate="+t;window.open(n,"report_noShowApptSheet","height=900,width=700")}}])}).call(this,n(6))},function(e,t){angular.module("Report").controller("Report.ReportOldPatientsController",["$scope","$log","providerService",function(e,t,n){var o=this;o.params={providerNo:"",age:65},o.searchProviders=function(e){var t={searchTerm:e,active:!0};return n.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},o.updateProviderNo=function(e,t,n){o.params.providerNo=t,o.params.name=n},o.generateReport=function(){var e=o.params,t="../report/reportpatientchartlistspecial.jsp?provider_no="+(""===e.providerNo?"*":e.providerNo)+"&age="+e.age;window.open(t,"report_oldpatients","height=900,width=700")}}])},function(e,t){angular.module("Report").controller("Report.ReportPatientChartListController",["$scope","$log","providerService",function(e,t,n){var o=this;o.params={},o.searchProviders=function(e){var t={searchTerm:e,active:!0};return n.searchProviders(t,0,10).then(function(e){for(var t=[],n=0;n<e.length;n++)t.push({providerNo:e[n].providerNo,name:e[n].firstName+" "+e[n].lastName});return t},function(e){console.log(e)})},o.updateProviderNo=function(e,t,n){o.params.providerNo=t,o.params.name=n},o.generateReport=function(){var e=o.params;if(!e.providerNo)return alert("Please enter a provider"),!1;var t="../report/reportpatientchartlist.jsp?provider_no="+e.providerNo;window.open(t,"report_patientchartlist","height=900,width=700")}}])},function(e,t,n){"use strict";angular.module("Document",["Common","Common.Services"])},function(e,t){angular.module("Document").controller("Document.DocumentsController",["$scope","securityService",function(e,t){var n=this;n.me=null,e.$watch(function(){return t.getUser()},function(e){n.me=e,null!=e&&window.open("../dms/documentReport.jsp?function=provider&functionid="+n.me.providerNo,"edocView","height=700,width=1024")},!0),n.openPopup=function(){window.open("../dms/documentReport.jsp?function=provider&functionid="+n.me.providerNo,"edocView","height=700,width=1024")}}])},function(e,t,n){"use strict";angular.module("Settings",["Common","Common.Services"])},function(e,t,n){"use strict";n.r(t);var o=n(15),a=n(7);angular.module("Settings").controller("Settings.SettingsController",["$scope","$http","$httpParamSerializer","$state","$uibModal","$filter","providerList","user","billingServiceTypes","loadedSettings","providerService","encounterForms","eforms","teams","groupNames","loadedApps","appService",function(e,t,n,r,i,l,s,c,u,d,p,m,h,g,f,v,b){var S=this;S.sitesApi=new o.SitesApi(t,n,"../ws/rs"),S.scheduleApi=new a.ScheduleApi(t,n,"../ws/rs"),e.$emit("configureShowPatientList",!1),S.providerList=s,S.user=c,S.billingServiceTypes=u,S.pref=d,S.encounterForms=m.content,S.eforms=h,S.loadedApps=v,S.siteOptions=[],S.scheduleOptions=[],null==S.pref.recentPatients&&(S.pref.recentPatients="8"),S.formGroupNames=[{value:"",label:"None"}];for(var C=0;C<f.length;C++)S.formGroupNames.push({value:f[C],label:f[C]});S.teams=[{value:"-1",label:"All"}];for(C=0;C<g.length;C++)S.teams.push({value:g[C],label:g[C]});S.teams.push({value:"",label:"None"}),S.billingServiceTypesMod=[],angular.copy(S.billingServiceTypes,S.billingServiceTypesMod),S.billingServiceTypesMod.splice(0,0,{type:"no",name:"--None--"});for(C=0;C<S.pref.appointmentScreenForms.length;C++){if(null!=(y=l("filter")(S.encounterForms,{formName:S.pref.appointmentScreenForms[C]})))for(var N=0;N<y.length;N++)y[N].formName===S.pref.appointmentScreenForms[C]&&(y[N].checked=!0)}for(C=0;C<S.pref.appointmentScreenEforms.length;C++){var y;if(null!=(y=l("filter")(S.eforms,{id:S.pref.appointmentScreenEforms[C]})))for(N=0;N<y.length;N++)y[N].id===S.pref.appointmentScreenEforms[C]&&(y[N].checked=!0)}S.tabs=[{id:0,displayName:"Persona",path:"persona"},{id:1,displayName:"General",path:"general"},{id:2,displayName:"Schedule",path:"schedule"},{id:3,displayName:"Billing",path:"billing"},{id:4,displayName:"Rx",path:"rx"},{id:5,displayName:"Master Demographic",path:"masterdemo"},{id:6,displayName:"Consultations",path:"consults"},{id:7,displayName:"Documents",path:"documents"},{id:8,displayName:"Summary",path:"summary"},{id:9,displayName:"eForms",path:"eforms"},{id:10,displayName:"Inbox",path:"inbox"},{id:11,displayName:"Programs",path:"programs"},{id:12,displayName:"Integration",path:"integration"}],S.pageSizes=[{value:"PageSize.A4",label:"A4"},{value:"PageSize.A6",label:"A6"}],S.rxInteractionWarningLevels=[{value:"0",label:"Not Specified"},{value:"1",label:"Low"},{value:"2",label:"Medium"},{value:"3",label:"High"},{value:"4",label:"None"}],S.staleDates=[{value:"A",label:"All"},{value:"0",label:"0"},{value:"-1",label:"-1"},{value:"-2",label:"2"},{value:"-3",label:"3"},{value:"-4",label:"4"},{value:"-5",label:"5"},{value:"-6",label:"6"},{value:"-7",label:"7"},{value:"-8",label:"8"},{value:"-9",label:"9"},{value:"-10",label:"10"},{value:"-11",label:"11"},{value:"-12",label:"12"},{value:"-13",label:"13"},{value:"-14",label:"14"},{value:"-15",label:"15"},{value:"-16",label:"16"},{value:"-17",label:"17"},{value:"-18",label:"18"},{value:"-19",label:"19"},{value:"-20",label:"20"},{value:"-21",label:"21"},{value:"-22",label:"22"},{value:"-23",label:"23"},{value:"-24",label:"24"},{value:"-25",label:"25"},{value:"-26",label:"26"},{value:"-27",label:"27"},{value:"-28",label:"28"},{value:"-29",label:"29"},{value:"-30",label:"30"},{value:"-31",label:"31"},{value:"-32",label:"32"},{value:"-33",label:"33"},{value:"-34",label:"34"},{value:"-35",label:"35"},{value:"-36",label:"36"}],S.olisLabs=[{value:"",label:""},{value:"5552",label:"Gamma-Dynacare"},{value:"5407",label:"CML"},{value:"5687",label:"LifeLabs"}],S.pasteFormats=[{value:"single",label:"Single Line"},{value:"multi",label:"Multi Line"}],S.letterHeadNameDefaults=[{value:"1",label:"Provider (user)"},{value:"2",label:"MRP"},{value:"3",label:"Clinic"}],null==S.pref.consultationLetterHeadNameDefault&&(S.pref.consultationLetterHeadNameDefault="1"),void 0!==r.current.data?S.currentTab=l("filter")(S.tabs,{path:r.current.data.tab})[0]:S.currentTab=S.tabs[0],S.init=function(){S.sitesApi.getSiteList().then(function(e){var t=e.data.body,n=[];if(angular.isArray(t))for(var o=0;o<t.length;o++)n.push({id:t[o].siteId,value:t[o].name,label:t[o].name,color:t[o].bgColor});S.siteOptions=n}),S.scheduleApi.getScheduleGroups().then(function(e){for(var t=e.data.body,n=0;n<t.length;n++){var o=t[n];t[n].label=t[n].name,t[n].value=t[n].identifier,S.scheduleOptions.push(o)}})},S.isActive=function(e){return null!=e&&null!=S.currentTab&&e.id==S.currentTab.id},S.changeTab=function(e){S.currentTab=e,r.go("settings."+e.path)},S.save=function(){for(var e=[],t=0;t<S.pref.appointmentScreenQuickLinks.length;t++)null!=S.pref.appointmentScreenQuickLinks[t].checked&&0!=S.pref.appointmentScreenQuickLinks[t].checked||e.push({name:S.pref.appointmentScreenQuickLinks[t].name,url:S.pref.appointmentScreenQuickLinks[t].url});S.pref.appointmentScreenQuickLinks=e,S.validateSettings()&&p.saveSettings(S.user.providerNo,S.pref).then(function(e){alert("saved")})},S.validateSettings=function(){return!(!S.pref.eformPopupWidth||!S.pref.eformPopupHeight)},S.cancel=function(){S.pref={},r.go("dashboard")},S.selectEncounterForms=function(){for(var e=l("filter")(S.encounterForms,{checked:!0}),t=[],n=0;n<e.length;n++)t.push(e[n].formName);S.pref.appointmentScreenForms=t},S.selectEForms=function(){for(var e=l("filter")(S.eforms,{checked:!0}),t=[],n=0;n<e.length;n++)t.push(e[n].id);S.pref.appointmentScreenEforms=t},S.removeQuickLinks=function(){for(var e=[],t=0;t<S.pref.appointmentScreenQuickLinks.length;t++)null!=S.pref.appointmentScreenQuickLinks[t].checked&&0!=S.pref.appointmentScreenQuickLinks[t].checked||e.push(S.pref.appointmentScreenQuickLinks[t]);S.pref.appointmentScreenQuickLinks=e},S.openChangePasswordModal=function(){window.open("../provider/providerchangepassword.jsp","change_password","width=750,height=500")},S.openQuickLinkModal=function(){i.open({templateUrl:"src/settings/quickLink.jsp",controller:"QuickLinkController"}).result.then(function(e){null!=e&&null!=e&&null!=e.name&&null!=e.url&&S.pref.appointmentScreenQuickLinks.push(e)})},S.editDocumentTemplates=function(){window.open("../admin/displayDocumentDescriptionTemplate.jsp","document_templates","width=700,height=450")},S.showProviderColourPopup=function(){window.open("../provider/providerColourPicker.jsp","provider_colour","width=700,height=450")},S.showDefaultEncounterWindowSizePopup=function(){window.open("../setProviderStaleDate.do?method=viewEncounterWindowSize","encounter_window_sz","width=700,height=450")},S.openConfigureEChartCppPopup=function(){window.open("../provider/CppPreferences.do","configure_echart_cpp","width=700,height=450")},S.openManageAPIClientPopup=function(){window.open("../provider/clients.jsp","api_clients","width=700,height=450")},S.openMyOscarUsernamePopup=function(){window.open("../provider/providerIndivoIdSetter.jsp","invivo_setter","width=700,height=450")},S.authenticate=function(e){window.open("../apps/oauth1.jsp?id="+e.id,"appAuth","width=700,height=450")},S.refreshAppList=function(){console.log("refresh",S.loadedApps),b.getApps().then(function(e){S.loadedApps=e},function(e){console.log("applist:"+e)}),console.log("refresh",S.loadedApps)},S.init()}])},function(e,t){angular.module("Settings").controller("Settings.ChangePasswordController",["$scope","$uibModalInstance",function(e,t){e.close=function(){t.close("Someone Closed Me")},e.changePassword=function(){console.log("password saved - NOT"),t.close("Someone Saved Me")}}])},function(e,t){angular.module("Settings").controller("Settings.QuickLinkController",["$scope","$uibModalInstance",function(e,t){e.qll={},e.close=function(){t.close()},e.addQuickLink=function(n){n.$valid&&t.close(e.qll)}}])},function(e,t,n){"use strict";n.r(t);var o=n(23),a=n.n(o);angular.module("Settings").component("patientSummaryItems",{template:a.a,controller:function(){},bindings:{pref:"="}})},function(e,t,n){"use strict";angular.module("Help",[])},function(e,t){angular.module("Help").controller("Help.SupportController",["$scope","$http",function(e,t){e.ospInfo={name:"JunoEMR.com",phone:"250-900-7373",contact:"Juno EMR Support",email:"support@junoemr.com",url:"https://help.junoemr.com"},e.buildInfo={versionDisplayName:"Juno",version:"master-0000"}}])},function(e,t){angular.module("Help").controller("Help.HelpController",["$scope","$http",function(e,t){}])},function(e,t,n){"use strict";t.__esModule=!0}],[[24,1,2]]]);
//# sourceMappingURL=bundle.94c815eb131cd2dd336e.js.map